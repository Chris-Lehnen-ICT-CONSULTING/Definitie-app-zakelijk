---
id: US-250
titel: Modulevolgorde optimaliseren (leesbaarheid → naleving)
status: proposed
priority: P2
owner: architecture
applies_to: definitie-app@v2
canonical: false
last_verified: 2025-09-22
links:
  - EPIC-019
---

# US-019-13 — Modulevolgorde

Als lezer wil ik een logische opbouw van de prompt: van output‑specificaties en taal naar context/categorie en dan pas regels/valkuilen en de finale taak.

## As‑Is
- Huidige volgorde is goed maar kan strakker: OutputSpec → Grammar → Context → ESS‑02 → Template → Regels → ErrorPrevention → DefinitionTask.

Bronnen:
- src/services/prompts/modules/prompt_orchestrator.py:312 (_get_default_module_order)

## To‑Be
- Volgorde toepassen zoals hierboven; bevestig dat afhankelijkheden intact blijven.

## Acceptance Criteria
- AC1: Nieuwe volgorde actief; alle secties aanwezig.
- AC2: Geen dependency‑conflicten (orchestrator topological sort blijft slagen).

## Implementatie (richting)
1) Update `_get_default_module_order` naar gewenste volgorde.
2) Behoud soft dependencies (semantic category vóór Template; context vóór ErrorPrevention).

## Testplan
- Snapshot: volgorde in string volgt de lijst.
- Orchestrator resolve_execution_order blijft succesvol.

## Risks / Mitigations
- Risico: onverwachte lege secties door volgordewijziging
  - Mitigatie: smoke test met 3 contextniveaus (min/medium/rijk).
