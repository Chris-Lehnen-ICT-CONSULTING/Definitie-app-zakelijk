---
id: US-322
epic: EPIC-003
titel: Web Lookup Configuration Consolidation
status: open
prioriteit: P2
story_points: 5
aangemaakt: 2025-09-30
bijgewerkt: 2025-09-30
owner: tbd
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-30
---

# US-322: Web Lookup Configuration Consolidation

## User Story
**Als** ontwikkelaar van de DefinitieAgent applicatie
**Wil ik** één single source of truth voor alle web lookup configuratie
**Zodat** conflicterende defaults worden opgelost en maintenance wordt vereenvoudigd

## Context
Huidige problemen:
- 4 verschillende config mechanismen met conflicterende defaults
- Wikipedia weight: 0.7 (YAML) vs 0.8 (Python)
- Configuratie verspreid over meerdere bestanden
- Geen centrale validatie van settings
- Runtime configuratie conflicten

## Acceptatiecriteria
- [ ] Één YAML configuratiebestand: `config/web_lookup_config.yaml`
- [ ] Alle providers gebruiken dezelfde configuratie bron
- [ ] Configuratie wordt bij startup gevalideerd
- [ ] Geen hardcoded values in Python code
- [ ] Environment variable overrides werken consistent
- [ ] Hot reload van config mogelijk (nice to have)

## Technische Details

### Unified Config Structure
```yaml
# config/web_lookup_config.yaml
providers:
  wikipedia:
    enabled: true
    weight: 0.7  # SINGLE VALUE - used everywhere
    timeout: 5
    min_score: 0.3
    base_url: "https://nl.wikipedia.org/api/rest_v1"

cache:
  strategy: "simple"  # Voor single-user
  default_ttl: 3600
  max_entries: 1000

performance:
  max_concurrent_requests: 3  # Simpel voor single-user
  total_timeout: 3.0
```

### Config Loader Implementation
```python
class WebLookupConfig:
    _instance = None
    _config_path = Path("config/web_lookup_config.yaml")

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance._load_config()
        return cls._instance
```

## Geschatte Effort
**1 dag**

## Dependencies
- US-321 moet eerst (canonical interfaces)

## Testing
- Config validation tests
- Override mechanism tests
- Singleton pattern tests

## Notes
- Prioriteit 2 na interface unification
- Vereenvoudigde versie voor single-user
- Geen complexe caching strategies nodig

## Definition of Done
- [ ] Single config file aangemaakt
- [ ] Config loader geïmplementeerd
- [ ] Alle hardcoded values verwijderd
- [ ] Providers gebruiken centrale config
- [ ] Validation bij startup werkt
- [ ] Tests voor config loading

## Linked Items
- Epic: [[EPIC-003]] - Content Verrijking / Web Lookup
- Depends on: US-321
- Blocks: US-324