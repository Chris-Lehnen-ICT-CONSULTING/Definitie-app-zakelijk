---
id: US-445
epic: EPIC-026
titel: ModernWebLookupService Configureerbaar en Modulair maken
type: refactor
status: Nog te bepalen
prioriteit: HOOG
story_points: 5
sprint: backlog
owner: code-architect
applies_to: definitie-app@current
canonical: false
last_verified: 2025-10-03
vereisten:
  - REQ-091
---

# US-445: ModernWebLookupService Configureerbaar en Modulair maken

## Gebruikersverhaal
**Als** integratie-architect  
**wil ik** provider-gewichten, timeouts en heuristieken van de ModernWebLookupService naar configuratie verplaatsen  
**zodat** de rebuild dezelfde logica kan tunen zonder codewijzigingen.

## Acceptatiecriteria
- [ ] Config-bestand (`config/web_lookup.yaml` of gelijkwaardig) bevat alle providers, weights, enable-flags en timeouts.  
- [ ] Service laadt configuratie via dependency-injectie en heeft fallback defaults.  
- [ ] Heuristische tokenclassificatie is testbaar en documenteert rationale.  
- [ ] Integratie-/unit-tests tonen dat ranking ongewijzigd blijft t.o.v. baseline.

## Technische Context
- Bron: `src/services/modern_web_lookup_service.py`.  
- Huidige fallback-weights en enabled-flags zijn hardcoded.  
- Service gebruikt meerdere externe bronnen (Wikipedia, SRU, Rechtspraak, Wiktionary).

## Implementatiestappen
- Inventariseer alle configuratiepunten en verplaats naar YAML/ENV.  
- Maak een configuratie-loader + schema-validatie.  
- Refactor service naar losse provider-clients (optioneel) en injecteer config.  
- Update responsibility map + doc.

## Teststrategie
- Unit-tests voor configuratielader met default/override.  
- Integratietest die ranking op sample data vergelijkt.  
- Foutscenario-test (config ontbreekt) → gecontroleerde fallback.

## Risico's en Mitigatie
- **Risico:** configuratiefouten → **Mitigatie:** schema-validatie + duidelijke fouten.  
- **Risico:** veranderde ranking → **Mitigatie:** baseline dataset en difftest.  
- **Risico:** performance hit → **Mitigatie:** cache config en meet latency.

## Definition of Done
- [ ] Configfiles aangemaakt en geladen.  
- [ ] Service gebruikt geen hardcoded weights meer.  
- [ ] Tests en documentatie geüpdatet.  
- [ ] QA bevestigt functionaliteit via regression suite.
