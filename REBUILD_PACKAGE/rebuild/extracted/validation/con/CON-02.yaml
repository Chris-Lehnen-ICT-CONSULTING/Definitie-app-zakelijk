id: "CON-02"
category: "CON"
priority: "high"
enabled: true

metadata:
  naam: "Baseren op authentieke bron"
  uitleg: |
    Gebruik een gezaghebbende of officiële bron als basis voor de definitie. Een definitie moet
    gebaseerd zijn op een erkende bron (wetgeving, officiële beleidsdocumenten, standaarden).
  version: "1.0"
  last_updated: "2025-10-02"
  author: "Extracted from legacy system"

  rule_type: "contextual"
  applies_to:
    categories: ["ENT", "ACT", "REL", "ATT", "AUT", "STA", "OTH"]
    contexts: []

implementation:
  type: "regex"
  patterns:
    required:
      - pattern: '\bvolgens (de|het)\b'
        description: "Source reference 'volgens'"
        case_sensitive: false

      - pattern: '\bzoals beschreven in\b'
        description: "Source reference 'zoals beschreven in'"
        case_sensitive: false

      - pattern: '\bzoals bepaald in\b'
        description: "Source reference 'zoals bepaald in'"
        case_sensitive: false

      - pattern: '\bzoals bedoeld in\b'
        description: "Source reference 'zoals bedoeld in'"
        case_sensitive: false

      - pattern: '\bconform (de|het)\b'
        description: "Source reference 'conform'"
        case_sensitive: false

      - pattern: '\bart\.?\s*\d+'
        description: "Article reference"
        case_sensitive: false

      - pattern: '\b(wet|besluit|regeling|richtlijn|verordening|AVG|Awb|WvSr|WvSv)\b'
        description: "Legal source type"
        case_sensitive: false

  logic_description: |
    1. Check for source reference patterns in definition
    2. Look for legal source identifiers
    3. Compare with good/bad examples
    4. Return validation result with source info

  legacy_reference: "src/toetsregels/regels/CON-02.py"

validation:
  input_fields:
    - name: "definitie"
      type: "string"
      required: true

    - name: "begrip"
      type: "string"
      required: true

    - name: "context"
      type: "dict"
      required: false

  output:
    success:
      type: "boolean"
      description: "Whether validation passed"

    message:
      type: "string"
      description: "Human-readable validation message"

    score:
      type: "float"
      min: 0.0
      max: 1.0
      description: "Validation score"

examples:
  good:
    - input:
        definitie: "iedere handeling met gegevens zoals bedoeld in de AVG"
        begrip: "gegevensverwerking"
      expected:
        success: true
        score: 1.0

    - input:
        definitie: "gedraging die volgens het Wetboek van Strafrecht strafbaar is gesteld"
        begrip: "delict"
      expected:
        success: true
        score: 1.0

  bad:
    - input:
        definitie: "handeling met gegevens"
        begrip: "gegevensverwerking"
      expected:
        success: false
        score: 0.0
        message_pattern: "geen bron"

    - input:
        definitie: "iets strafbaars"
        begrip: "delict"
      expected:
        success: false
        score: 0.0

generation_hints:
  - "Verwijs naar de wettelijke of normatieve bron"
  - "Gebruik formuleringen als: 'zoals bedoeld in', 'volgens', 'conform'"
  - "Noem de specifieke wet, verordening of standaard"
  - "Geef indien mogelijk artikel- of paragraafnummers"

test_cases:
  - name: "valid_with_source_reference"
    input:
      definitie: "gedraging zoals bedoeld in artikel 1 WvSr"
      begrip: "strafbaar feit"
    expected:
      success: true
      score: 1.0

  - name: "invalid_no_source"
    input:
      definitie: "handeling die verboden is"
      begrip: "strafbaar feit"
    expected:
      success: false
      score: 0.0

performance:
  max_execution_time_ms: 50
  complexity: "O(n)"
  memory_usage: "O(1)"
