id: "ARAI-04SUB1"
category: "ARAI"
priority: "medium"
enabled: true

metadata:
  naam: "Beperk gebruik van modale werkwoorden"
  uitleg: |
    Definities vermijden modale werkwoorden zoals 'kan', 'mag', 'moet', omdat deze onduidelijkheid
    scheppen over de essentie van het begrip. Modale werkwoorden drukken mogelijkheid, toestemming
    of verplichting uit, niet objectieve beschrijving.
  version: "1.0"
  last_updated: "2025-10-02"
  author: "Extracted from legacy system"

  rule_type: "structural"
  parent_rule: "ARAI-04"
  applies_to:
    categories: ["ENT", "ACT", "REL", "ATT", "AUT", "STA", "OTH"]
    contexts: []

implementation:
  type: "regex"
  patterns:
    forbidden:
      - pattern: '\bkan\b'
        description: "Modal verb 'kan'"
        case_sensitive: false

      - pattern: '\bkunnen\b'
        description: "Modal verb 'kunnen'"
        case_sensitive: false

      - pattern: '\bmag\b'
        description: "Modal verb 'mag'"
        case_sensitive: false

      - pattern: '\bmogen\b'
        description: "Modal verb 'mogen'"
        case_sensitive: false

      - pattern: '\bmoet\b'
        description: "Modal verb 'moet'"
        case_sensitive: false

      - pattern: '\bmoeten\b'
        description: "Modal verb 'moeten'"
        case_sensitive: false

  logic_description: |
    1. Search for modal verbs that express possibility, permission or obligation
    2. Collect all matches
    3. Compare with good/bad examples
    4. Return validation result

  legacy_reference: "src/toetsregels/regels/ARAI-04SUB1.py"

validation:
  input_fields:
    - name: "definitie"
      type: "string"
      required: true

    - name: "begrip"
      type: "string"
      required: true

    - name: "context"
      type: "dict"
      required: false

  output:
    success:
      type: "boolean"
      description: "Whether validation passed"

    message:
      type: "string"
      description: "Human-readable validation message"

    score:
      type: "float"
      min: 0.0
      max: 1.0
      description: "Validation score"

examples:
  good:
    - input:
        definitie: "proces dat persoonsgegevens verwerkt"
        begrip: "gegevensverwerkingsproces"
      expected:
        success: true
        score: 1.0

    - input:
        definitie: "maatregel die tot gedragsverandering leidt"
        begrip: "gedragsmaatregel"
      expected:
        success: true
        score: 1.0

  bad:
    - input:
        definitie: "proces dat gegevens kan verwerken"
        begrip: "verwerkingsproces"
      expected:
        success: false
        score: 0.0

    - input:
        definitie: "maatregel die moet worden genomen bij overtreding"
        begrip: "sanctiemaatregel"
      expected:
        success: false
        score: 0.0

generation_hints:
  - "Beschrijf wat iets DOET, niet wat het KAN of MAG doen"
  - "Gebruik stellige werkwoorden: verwerkt, registreert, controleert"
  - "Vermijd modale twijfel: kan, mag, moet, zou"
  - "Focus op definiÃ«rende kenmerken, niet voorwaardelijke mogelijkheden"

test_cases:
  - name: "valid_definitive_action"
    input:
      definitie: "systeem dat toegang beperkt tot geautoriseerde gebruikers"
      begrip: "toegangscontrolesysteem"
    expected:
      success: true
      score: 1.0

  - name: "invalid_modal_possibility"
    input:
      definitie: "systeem dat toegang kan beperken"
      begrip: "toegangscontrolesysteem"
    expected:
      success: false
      score: 0.0

performance:
  max_execution_time_ms: 50
  complexity: "O(n)"
  memory_usage: "O(1)"
