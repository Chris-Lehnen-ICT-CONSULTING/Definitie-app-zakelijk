id: "ESS-01"
category: "ESS"
priority: "high"
enabled: true

metadata:
  naam: "Essentie, niet doel"
  uitleg: |
    Een definitie beschrijft wat iets is, niet wat het doel of de bedoeling ervan is.
    Definities moeten focussen op de aard en kenmerken, niet op de reden waarom het bestaat.
  version: "1.0"
  last_updated: "2025-10-02"
  author: "Extracted from legacy system"

  rule_type: "semantic"
  applies_to:
    categories: ["ENT", "ACT", "REL", "ATT", "AUT", "STA", "OTH"]
    contexts: []

implementation:
  type: "regex"
  patterns:
    forbidden:
      - pattern: '\bom te\b'
        description: "Purpose indicator 'om te'"
        case_sensitive: false

      - pattern: '\bmet als doel\b'
        description: "Purpose indicator 'met als doel'"
        case_sensitive: false

      - pattern: '\bbedoeld om\b'
        description: "Purpose indicator 'bedoeld om'"
        case_sensitive: false

      - pattern: '\bbedoeld voor\b'
        description: "Purpose indicator 'bedoeld voor'"
        case_sensitive: false

      - pattern: '\bteneinde\b'
        description: "Purpose indicator 'teneinde'"
        case_sensitive: false

      - pattern: '\bopdat\b'
        description: "Purpose indicator 'opdat'"
        case_sensitive: false

      - pattern: '\bten behoeve van\b'
        description: "Purpose indicator 'ten behoeve van'"
        case_sensitive: false

      - pattern: '\bin het kader van\b'
        description: "Purpose indicator 'in het kader van'"
        case_sensitive: false

      - pattern: '\bzodat\b'
        description: "Purpose indicator 'zodat'"
        case_sensitive: false

      - pattern: '\bgericht op\b'
        description: "Purpose indicator 'gericht op'"
        case_sensitive: false

  logic_description: |
    1. Search for purpose-oriented formulations
    2. Check if definition describes WHAT something is vs WHY it exists
    3. Return validation result

  legacy_reference: "src/toetsregels/regels/ESS-01.py"

validation:
  input_fields:
    - name: "definitie"
      type: "string"
      required: true

    - name: "begrip"
      type: "string"
      required: true

    - name: "context"
      type: "dict"
      required: false

  output:
    success:
      type: "boolean"
      description: "Whether validation passed"

    message:
      type: "string"
      description: "Human-readable validation message"

    score:
      type: "float"
      min: 0.0
      max: 1.0
      description: "Validation score"

examples:
  good:
    - input:
        definitie: "instantie die meldingen registreert over strafbare feiten"
        begrip: "meldpunt"
      expected:
        success: true
        score: 1.0

    - input:
        definitie: "maatregel die volgt op normovertreding"
        begrip: "sanctie"
      expected:
        success: true
        score: 1.0

  bad:
    - input:
        definitie: "instantie om meldingen te kunnen verwerken"
        begrip: "meldpunt"
      expected:
        success: false
        score: 0.0

    - input:
        definitie: "maatregel met als doel naleving te bevorderen"
        begrip: "sanctie"
      expected:
        success: false
        score: 0.0

generation_hints:
  - "Beschrijf WAT iets is, niet waarvoor het dient"
  - "Vermijd formuleringen zoals: 'om te', 'met als doel', 'bedoeld voor'"
  - "Focus op de aard en kenmerken van het begrip"
  - "Vermijd doel- of gebruiksgericht taalgebruik"

test_cases:
  - name: "valid_essence_description"
    input:
      definitie: "systematische controle die afwijkingen detecteert"
      begrip: "controle"
    expected:
      success: true
      score: 1.0

  - name: "invalid_purpose_oriented"
    input:
      definitie: "controle om afwijkingen te detecteren"
      begrip: "controle"
    expected:
      success: false
      score: 0.0

performance:
  max_execution_time_ms: 50
  complexity: "O(n)"
  memory_usage: "O(1)"
