id: "ESS-02"
category: "ESS"
priority: "high"
enabled: true

metadata:
  naam: "Ontologische categorie expliciteren (type / particulier / proces / resultaat)"
  uitleg: |
    Indien een begrip meerdere ontologische categorieÃ«n kan aanduiden, moet uit de definitie
    ondubbelzinnig blijken welke bedoeld wordt: soort (type), exemplaar (particulier),
    proces (activiteit) of resultaat (uitkomst).
  version: "1.0"
  last_updated: "2025-10-02"
  author: "Extracted from legacy system"

  rule_type: "semantic"
  applies_to:
    categories: ["ENT", "ACT", "REL", "ATT", "AUT", "STA", "OTH"]
    contexts: []

implementation:
  type: "regex"
  patterns:
    type_indicators:
      - pattern: '\b(is een|betreft een) (categorie|soort|klasse)\b'
        description: "Type category indicator"
        case_sensitive: false

    particulier_indicators:
      - pattern: '\b(is een) exemplaar\b'
        description: "Particular instance indicator"
        case_sensitive: false

    process_indicators:
      - pattern: '\b(is een|betreft een) (proces|activiteit|handeling|gebeurtenis)\b'
        description: "Process indicator"
        case_sensitive: false

    result_indicators:
      - pattern: '\b(is het resultaat van|het resultaat van)\b'
        description: "Result indicator"
        case_sensitive: false

      - pattern: '\b(uitkomst|effect|product|bevinding)\b'
        description: "Result term"
        case_sensitive: false

  logic_description: |
    1. Determine which ontological category the definition represents
    2. Check for explicit category indicators
    3. Validate clarity of categorization
    4. Return validation result

  legacy_reference: "src/toetsregels/regels/ESS-02.py"

validation:
  input_fields:
    - name: "definitie"
      type: "string"
      required: true

    - name: "begrip"
      type: "string"
      required: true

    - name: "context"
      type: "dict"
      required: false

  output:
    success:
      type: "boolean"
      description: "Whether validation passed"

    message:
      type: "string"
      description: "Human-readable validation message"

    score:
      type: "float"
      min: 0.0
      max: 1.0
      description: "Validation score"

examples:
  good:
    - input:
        definitie: "activiteit waarbij gegevens worden verzameld door directe waarneming"
        begrip: "observatie"
      expected:
        success: true
        score: 1.0

    - input:
        definitie: "resultaat van het uitwerken en analyseren van het interview"
        begrip: "interviewrapportage"
      expected:
        success: true
        score: 1.0

  bad:
    - input:
        definitie: "manier om gegevens te verzamelen"
        begrip: "observatie"
      expected:
        success: false
        score: 0.0

generation_hints:
  - "Maak expliciet of het begrip een type, exemplaar, proces of resultaat is"
  - "Gebruik termen zoals: 'activiteit waarbij', 'resultaat van', 'categorie van'"
  - "Vermijd ambigue formuleringen"
  - "Onderscheid duidelijk proces vs resultaat"

test_cases:
  - name: "valid_process_explicit"
    input:
      definitie: "activiteit waarbij data wordt geanalyseerd"
      begrip: "data-analyse"
    expected:
      success: true
      score: 1.0

  - name: "invalid_ambiguous_category"
    input:
      definitie: "iets met data"
      begrip: "dataverwerkeling"
    expected:
      success: false
      score: 0.0

performance:
  max_execution_time_ms: 50
  complexity: "O(n)"
  memory_usage: "O(1)"
