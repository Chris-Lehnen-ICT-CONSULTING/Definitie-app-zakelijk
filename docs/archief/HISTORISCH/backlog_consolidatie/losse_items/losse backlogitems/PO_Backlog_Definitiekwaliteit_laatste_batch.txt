ğŸ“ Backlogitem: Implementeer toetsregel INT-07

ğŸ¯ Doel:
Implementeer toetsregel INT-07

ğŸ“Œ Aanleiding:
Regel nog niet geÃ¯mplementeerd

ğŸ” Probleem:
Regel nog niet geÃ¯mplementeerd

ğŸ“ˆ Impact:
Onvolledige toetsing bij definities

ğŸ› ï¸ Taken:
- Onderzoek de oorzaak van het probleem
- Ontwerp oplossing en implementeer aanpassingen
- Voeg indien nodig documentatie toe

ğŸ§ª Tests:
- Unit test voor nieuwe of gewijzigde logica
- Controle op bestaande functionaliteit (regressietest)
- Testresultaat vastleggen in log of testverslag

âœ… Acceptatiecriteria:
- Regel correct geÃ¯mplementeerd in JSON en ai_toetser.py

ğŸ“¦ Bestand(en):
- ai_toetser.py, toetsregels.json

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Hoog
ğŸ—“ï¸ Sprint: 1
ğŸ†” ID: BLG-INT-07-001
ğŸ“… Datum: 2025-05-01
ğŸ“Œ Status: done

ğŸ“ Backlogitem: Voeg downloadmogelijkheid toe voor testlog als JSONL

ğŸ¯ Doel:
Sta gebruikers toe het logbestand met resultaten van verboden-woordtests als `.jsonl` te downloaden voor externe analyse.

ğŸ“Œ Aanleiding:
Het logbestand wordt wel aangemaakt, maar is niet beschikbaar buiten de app.

ğŸ” Probleem:
- Geen toegang tot testdata buiten Streamlit.
- Analyse, archivering en debugging zijn niet mogelijk.

ğŸ“ˆ Impact:
- Gebrek aan inzicht in detectiekwaliteit.
- Niet compatibel met externe tooling.

ğŸ› ï¸ Taken:
- Voeg downloadknop toe aan tabblad 3.
- Zet juiste headers en mime type.
- Beperk bestand tot 1MB of voeg waarschuwing toe.

ğŸ§ª Tests:
- Downloadbare `.jsonl` is correct opgebouwd.
- Bestand opent in JSON-viewer of teksteditor.

âœ… Acceptatiecriteria:
- Gebruiker kan testlog downloaden zonder fout.
- Bestandsformaat is standaard `.jsonl`.

ğŸ“¦ Bestand(en):
- ui_helpers.py
- verboden_woord_tests.jsonl

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Laag
ğŸ—“ï¸ Sprint: 6
ğŸ†” ID: BLG-JSONL-DOWNLOAD-002
ğŸ“… Datum: 2025-06-23
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Voeg goedkeuringsveld per ketenpartner toe

ğŸ¯ Doel:
Laat per begrip zien welke ketenpartners akkoord zijn met de definitie, via een meerkeuzeveld in de UI.

ğŸ“Œ Aanleiding:
Definities worden vaak door meerdere partijen beoordeeld. Deze accordering is nu niet zichtbaar of bewaarbaar.

ğŸ” Probleem:
- Geen consensuslog zichtbaar.
- Geen controle op herkomst goedkeuring.

ğŸ“ˆ Impact:
- Gebruikers vertrouwen de inhoud minder.
- Juridische accordering mist.

ğŸ› ï¸ Taken:
- Voeg UI-veld toe: â€œAkkoord door: [selectievakjes]â€.
- Log elke accordering + wie/wanneer.

ğŸ§ª Tests:
- Accordering is zichtbaar per partner.
- Logging bevat geschiedenis per begrip.

âœ… Acceptatiecriteria:
- Accordering is zichtbaar in UI + export.
- Historiek is raadpleegbaar.

ğŸ“¦ Bestand(en):
- definitie_agent_webinterface_logging.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar, ketenpartners

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 5
ğŸ†” ID: BLG-KETENPARTNER-UI
ğŸ“… Datum: 2025-06-13
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Automatisch genereren van unieke Streamlit-widget keys

ğŸ¯ Doel:
Voorkom `DuplicateElementID`-fouten in de Streamlit-interface door automatisch unieke widget keys te genereren.

ğŸ“Œ Aanleiding:
Wanneer meerdere elementen dezelfde key gebruiken, crasht de app of geeft foutmeldingen in dynamische UI-componenten.

ğŸ” Probleem:
- Handmatige keys zijn foutgevoelig bij hergebruik.
- Bij iteratie of conditionele rendering ontstaan conflicten.

ğŸ“ˆ Impact:
- Crashes bij formulierherlaad of dynamische lijstverwerking.
- Moeilijker onderhoud van componenten in complexe layout.

ğŸ› ï¸ Taken:
- Bouw `widget_key(prefix: str)` functie die unieke sleutel genereert.
- Voeg logica toe op basis van uuid, timestamp of tellers.
- Pas toe op kritieke knoppen, forms en velden.

ğŸ§ª Tests:
- Geen DuplicateKey-fouten bij herladen.
- Componenten renderen correct in for-loops en condities.
- Unieke key is reproduceerbaar bij herstart.

âœ… Acceptatiecriteria:
- Geen fouten in Streamlit-UI door dubbele keys.
- Functie is herbruikbaar en consistent.

ğŸ“¦ Bestand(en):
- ui_helpers.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 4
ğŸ†” ID: BLG-KEY-UNIEK
ğŸ“… Datum: 2025-06-14
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Logging uitbreiden voor toetsregel ARAI06

ğŸ¯ Doel:
Voeg gedetailleerde logging toe aan toetsregel ARAI06, zodat zichtbaar is welke verboden patronen zijn gedetecteerd en waarom de definitie werd afgekeurd.

ğŸ“Œ Aanleiding:
Bij afkeuring op basis van ARAI06 ontbreekt informatie over de precieze reden. Dit maakt evaluatie en verbetering lastig voor gebruikers en ontwikkelaars.

ğŸ” Probleem:
- Gebruiker krijgt alleen een generieke foutmelding.
- Geen inzicht in welke constructie (bijv. 'is', 'de', begrip) het probleem veroorzaakte.

ğŸ“ˆ Impact:
- Onbegrip of frustratie bij gebruiker.
- Lastiger te debuggen voor ontwikkelaar.

ğŸ› ï¸ Taken:
- Voeg logstructuur toe per patroon (matchtype, locatie).
- Voeg voorbeeldmatch toe aan logresultaat.
- Implementeer bijbehorende testcaselog.

ğŸ§ª Tests:
- Logging toont â€œmatch: 'is' op positie 0â€.
- Geen logging bij correcte definities.

âœ… Acceptatiecriteria:
- Logging verklaart afkeuring volledig.
- Loggingstructuur is machineleesbaar.

ğŸ“¦ Bestand(en):
- ai_toetser.py
- toetsresultaten_logger.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 5
ğŸ†” ID: BLG-LOG-ARAI06
ğŸ“… Datum: 2025-06-11
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Voeg visuele viewer toe voor testlog verboden woorden

ğŸ¯ Doel:
Bied gebruikers de mogelijkheid om testresultaten van individuele woorden te bekijken via een overzichtelijke tabelweergave in de UI.

ğŸ“Œ Aanleiding:
Tests met verboden woorden (zoals â€œgegevensâ€ of â€œisâ€) worden momenteel gelogd naar JSONL, maar zijn niet zichtbaar voor de gebruiker.

ğŸ” Probleem:
- Testresultaten zijn alleen terug te vinden in backend-bestanden.
- Gebruikers kunnen eerdere resultaten niet herzien of vergelijken.

ğŸ“ˆ Impact:
- Analyse en debugging zijn lastig.
- Ontwikkelaars missen transparantie bij detectie.

ğŸ› ï¸ Taken:
- Voeg tabblad 3 toe in Streamlit-app met logviewer.
- Gebruik Pandas DataFrame + Streamlit-table.
- Voeg downloadknop toe voor `verboden_woord_tests.jsonl`.

ğŸ§ª Tests:
- Bestand wordt correct geladen en weergegeven.
- Filtering en export werken zonder foutmeldingen.

âœ… Acceptatiecriteria:
- Logbestand is zichtbaar en doorzoekbaar.
- Gebruiker kan log downloaden met 1 klik.

ğŸ“¦ Bestand(en):
- definitie_agent_webinterface_logging.py
- verboden_woord_tests.jsonl

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 6
ğŸ†” ID: BLG-LOG-VIEWER-001
ğŸ“… Datum: 2025-06-23
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Dynamisch beheer van contexten, ketens en bronnen via UI

ğŸ¯ Doel:
Maak het mogelijk om waarden zoals ketenpartners, contexten en herkomstbronnen te beheren via een dynamische UI (toevoegen, verwijderen, selecteren).

ğŸ“Œ Aanleiding:
Context- en ketenvelden zijn nu hardcoded in dropdowns, wat beheer bemoeilijkt en niet schaalbaar is bij groeiende behoefte.

ğŸ” Probleem:
- Gebruiker kan geen nieuwe waarden toevoegen zonder codeaanpassing.
- Keuzelijsten zijn statisch en verouderd.

ğŸ“ˆ Impact:
- Frustratie bij domeinspecialisten.
- Onvolledige of foutieve metadatering.

ğŸ› ï¸ Taken:
- Bouw dynamische lijstbeheer-component (multiselect + toevoegen/wegklikken).
- Sla waarden op in JSON-config of dynamische opslag.
- Voeg UI-sectie toe in tab 1: "Beheer waarden".

ğŸ§ª Tests:
- Toegevoegde waarden verschijnen direct in dropdown.
- Verwijderde waarden worden niet meer getoond.
- Sessie-overdracht tussen tabs werkt zonder foutmelding.

âœ… Acceptatiecriteria:
- Gebruiker kan eigen waarden toevoegen aan context-, bron- en ketenvelden.
- Alle waarden zijn persistent en dynamisch.
- UI-fouttolerantie is gegarandeerd.

ğŸ“¦ Bestand(en):
- definitie_agent_webinterface_logging.py
- ui_helpers.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 4
ğŸ†” ID: BLG-MULTISELECT
ğŸ“… Datum: 2025-06-12
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Uitbreiding van plurale tantum-lijst met meervoudsvormen

ğŸ¯ Doel:
Voeg foutgevoelige meervoudige zelfstandige naamwoorden toe aan de JSON-lijst voor plurale tantum om grammaticale fouten in AI-toetsregels te voorkomen.

ğŸ“Œ Aanleiding:
Bepaalde woorden zoals "gegevens" worden onterecht als enkelvoud behandeld, terwijl ze uitsluitend in meervoud bestaan.

ğŸ” Probleem:
- Onjuiste grammaticale feedback bij toetsing.
- Lijst van uitzonderingen is onvolledig.
- Matching is hoofdlettergevoelig.

ğŸ“ˆ Impact:
- Foute AI-beoordelingen op correct geschreven definities.
- Onterecht afkeuren van correcte input.

ğŸ› ï¸ Taken:
- Voeg ontbrekende woorden toe aan `nl_pluralia_tantum_100.json` onder "plurale_tantum".
- Controleer lijst op redundantie en schrijfwijze.
- Maak lookup-functie case-insensitive.

ğŸ§ª Tests:
- Lookup faalt niet op woorden als â€œGegevensâ€ vs â€œgegevensâ€.
- Alle woorden in testset worden correct herkend.
- JSON blijft geldig na uitbreiding.

âœ… Acceptatiecriteria:
- JSON bevat de vereiste meervoudige uitzonderingen.
- Controle verloopt correct bij toetsregels met grammaticale analyse.

ğŸ“¦ Bestand(en):
- config/taalregels/nl_pluralia_tantum_100.json
- taalregels/validatie_pluralia.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 5
ğŸ†” ID: BLG-PLURALIA-001
ğŸ“… Datum: 2025-06-23
ğŸ“Œ Status: to do

ğŸ“ Backlogitem: Versnellen van definitiegeneratie en AI-toetsing

ğŸ¯ Doel:
Verkort de wachttijd voor gebruikers bij het genereren en toetsen van definities door optimalisatie van AI-calls, caching van regels en betere controle over UI-opties.

ğŸ“Œ Aanleiding:
Gebruikers ervaren momenteel een lange wachttijd (45â€“60 seconden) bij het genereren en toetsen van definities. Dit frustreert iteratief werken en leidt tot onnodige kosten bij gebruik van GPT-4.

ğŸ” Probleem:
- AI-aanroepen worden momenteel sequentieel uitgevoerd.
- GPT-4 is relatief traag vergeleken met gpt-4o of gpt-3.5.
- Elke actie laadt toetsregels opnieuw i.p.v. te cachen.
- Geen mogelijkheid om optionele onderdelen (zoals voorbeelden of toelichting) uit te schakelen.

ğŸ“ˆ Impact:
- Gebruikers haken sneller af bij meerdere definities.
- Hogere kosten bij OpenAI-gebruik.
- Slechtere UX voor iteratief verbeteren.

ğŸ› ï¸ Taken:
- Meet de verwerkingstijd per fase (generatie, toelichting, toetsing).
- Implementeer `asyncio.gather()` of `ThreadPoolExecutor` voor parallelle AI-aanroepen.
- Introduceer UI-toggles:  
  - "âš™ï¸ Alleen definitie genereren"  
  - "âš™ï¸ Inclusief toelichting en voorbeelden"
- Vervang `GPT-4` door `gpt-4o` of `gpt-3.5-turbo` als standaardoptie.
- Cache toetsregels na eerste parse in geheugen.
- Voeg in Streamlit een statusindicator toe ("â³ Definitie wordt opgesteld...").

ğŸ§ª Tests:
- Tijdmetingen worden gelogd per fase.
- Meerdere async-taken worden in <5s afgehandeld.
- UI-toggles schakelen effectief logica uit.
- Er is geen regressie in output of foutafhandeling.

âœ… Acceptatiecriteria:
- Totale laadtijd per definitie â‰¤ 15 seconden.
- Logging bevat tijd per AI-fase.
- Gebruiker kan AI-deelprocessen afzonderlijk in-/uitschakelen.
- Geen foutmeldingen bij wisselen van model of bij caching.

ğŸ“¦ Bestand(en):
- definitie_agent_webinterface_logging.py
- ai_toetser.py
- config/.env of settings.py

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar
- Product Owner

â±ï¸ Prioriteit: Hoog
ğŸ—“ï¸ Sprint: 4
ğŸ†” ID: BLG-PRM-009
ğŸ“… Datum: 2025-06-10
ğŸ“Œ Status: in progress

ğŸ“ Backlogitem: Verbeter zelflerende promptaanpassing op basis van toetsresultaten

ğŸ¯ Doel:
Laat de applicatie zelfstandig verboden constructies toevoegen aan de prompt op basis van eerdere toetsfouten.

ğŸ“Œ Aanleiding:
Fouten zoals â€œproces waarbijâ€ of â€œhandeling dieâ€ blijven terugkomen. Handmatige correctie is traag en foutgevoelig.

ğŸ” Probleem:
- Prompt groeit niet mee met feedback.
- Lerende werking ontbreekt.

ğŸ“ˆ Impact:
- Definities blijven dezelfde fouten herhalen.
- Gebrek aan adaptief gedrag.

ğŸ› ï¸ Taken:
- Breid `prompt_leraar.py` uit met analyse van toetslogs.
- Voeg geautomatiseerde updates toe aan forbidden_patterns.
- Log elke toevoeging.

ğŸ§ª Tests:
- Nieuwe patronen verschijnen in prompt na foutherhaling.
- Geen overaanpassing op incidentele fouten.

âœ… Acceptatiecriteria:
- Prompt groeit mee met foutpatronen.
- Logging is transparant en uitlegbaar.

ğŸ“¦ Bestand(en):
- prompt_leraar.py
- forbidden_patterns.json

ğŸ‘¥ Betrokkenen:
- Ontwikkelaar, AI engineer

â±ï¸ Prioriteit: Midden
ğŸ—“ï¸ Sprint: 6
ğŸ†” ID: BLG-PROMPTLERAAR-UPDATE
ğŸ“… Datum: 2025-06-23
ğŸ“Œ Status: to do