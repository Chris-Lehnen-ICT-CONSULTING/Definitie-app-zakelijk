---
id: US-234
titel: Single Definition Import (MVP)
epic: EPIC-005
status: Open
prioriteit: HIGH
story_points: 5
sprint: backlog
toegevoegd_door: development-team
aangemaakt: 2025-09-22
bijgewerkt: 2025-09-22
owner: product
type: feature
vereisten:
- REQ-043
- REQ-037
applies_to: definitie-app@current
canonical: true
last_verified: 2025-09-22
---

# US-234: Single Definition Import (MVP)

Als dataâ€‘beheerder wil ik Ã©Ã©n definitie kunnen importeren (met validatie en duplicaatcontrole), zodat ik snel een individuele definitie kan toevoegen of bijwerken zonder batchâ€‘import.

## Probleembeschrijving
De applicatie biedt nu alleen een eenvoudige JSONâ€‘bestand import (meerdere records) zonder validatie/verrijking. Er is behoefte aan een laagdrempelige, veilige manier om exact Ã©Ã©n definitie te importeren mÃ©t voorafgaande validatie en duidelijke preview/feedback.

## Scope (MVP)
- Enkelvoudige import via UI (formulier of JSONâ€‘plakveld)
- V2 validatie vÃ³Ã³r opslag; toon score en violations
- Duplicaatcontrole op begrip + context; toon keuze of blokkeer
- Opslaan als Draft (default) met herkomstmetadata (IMPORTED)
- Logging naar `import_export_logs`

Niet in scope (dit komt in latere stories): CSV/XLSX/JSONL, streaming, queue/resume/cancel, bulkâ€‘rapportage, mapping UI.

## Acceptatiecriteria
- [ ] UI biedt een â€œEnkelvoudige importâ€ sectie met twee opties:
  - [ ] Formulier met velden: begrip, definitie, categorie, organisatorische_context (lijst), juridische_context (lijst, optioneel), wettelijke_basis (lijst, optioneel)
  - [ ] Alternatief: JSONâ€‘plakveld voor hetzelfde schema
- [ ] Bij submit voert het systeem V2â€‘validatie uit en toont:
  - [ ] Totale score en indicator acceptabel/nietâ€‘acceptabel
  - [ ] Tabel met violations (code, severity, message)
- [ ] Duplicaatcontrole op begrip + context:
  - [ ] Bij exact duplicaat: waarschuwing en keus: Annuleren of Overschrijven (MVP mag overschrijven uitzetten als we â€˜nieuw versienummerâ€™ nog niet hebben)
- [ ] Opslaan pas na expliciete bevestiging (â€œImporteer als Draftâ€)
- [ ] Na opslag:
  - [ ] Record heeft `source_type=imported` en `imported_from="single_import_ui"`
  - [ ] Validatieresultaat is opgeslagen (score en issues) zoals ondersteund door repository
  - [ ] Operatie gelogd in `import_export_logs` met `operatie_type='import'`

## UI Voorstel
- Locatie: Management tab â†’ sectie â€œðŸ“¥ Import Definitiesâ€ uitbreiden met blok â€œEnkelvoudige import (MVP)â€
- Componenten:
  - Radio: [Formulier, JSON]
  - Bij Formulier: invoervelden + â€œValiderenâ€ knop â†’ previewpaneel met validatieresultaten â†’ â€œImporteer als Draftâ€
  - Bij JSON: groot tekstgebied, validatieknop idem
  - Duplicateâ€‘waarschuwing inline vÃ³Ã³r bevestiging

## Technisch Ontwerp (MVP)
- Service: `DefinitionImportService` (nieuw, eenvoudige variant)
  - `validate_single(payload: dict) -> ValidationResult`
  - `import_single(payload: dict, *, allow_duplicate: bool=False) -> ImportResult`
  - Roept onder water aan:
    - `ValidationOrchestratorV2.validate_definition(Definition)`
    - `DefinitionRepository.create_definitie(...)` (of update bij overschrijven â€“ optioneel buiten MVP)
- Contract input (JSON/form):
```json
{
  "begrip": "string",
  "definitie": "string",
  "categorie": "string",
  "organisatorische_context": ["string"],
  "juridische_context": ["string"],
  "wettelijke_basis": ["string"]
}
```
- Default status: `draft`
- Herkomst metadata bij opslag:
  - `source_type = "imported"`, `imported_from = "single_import_ui"`, `created_by = current_user|"ui_user"`

## Beveiliging & Kwaliteit
- Geen secrets/PII in logs
- Inputlengteâ€‘limieten en UTFâ€‘8 validatie
- Validatie timeouts respecteren (via bestaande orchestrator)

## Definition of Done
- [ ] Documentatie (dit bestand) en implementatieplan bijgewerkt
- [ ] UI bevat een werkende flow voor enkelvoudige import (zonder batch)
- [ ] Validatie vÃ³Ã³r opslag, violations zichtbaar
- [ ] Duplicaatcontrole met duidelijke feedback
- [ ] Succes/foutmeldingen voor de gebruiker
- [ ] Logging naar `import_export_logs`

## Relaties
- EPIC: EPIC-005 (Export & Import)
- Vereisten: REQ-043 (Import), REQ-037 (Batch validatie â€“ deels relevant voor validatiecomponent)
- Gerelateerd: US-062 (Bulk Import), US-138 (Import Validation)

