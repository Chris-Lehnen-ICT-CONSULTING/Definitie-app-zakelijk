---
id: US-323
epic: EPIC-003
titel: "US-323: titel: Web Lookup Test Interface Fix"
status: open
prioriteit: P2
story_points: 5
aangemaakt: 2025-09-30
bijgewerkt: 2025-09-30
owner: tbd
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-30
---

# US-323: Web Lookup Test Interface Fix

## User Story
**Als** ontwikkelaar van de DefinitieAgent applicatie
**Wil ik** dat de validation service interface in tests correct is
**Zodat** alle web lookup tests kunnen draaien zonder failures

## Context
Huidige blokkerende issues:
- ValidationService interface mismatch in test fixtures
- 2 van 15 integration tests falen
- Mock service gebruikt verkeerde method namen
- Tests kunnen niet draaien door interface errors

## Acceptatiecriteria
- [ ] MockValidationService heeft correcte `validate_definition` method
- [ ] Alle web lookup tests draaien zonder interface errors
- [ ] Test fixtures matchen productie interfaces exact
- [ ] Integration tests voor web lookup zijn groen
- [ ] Type hints in mocks matchen productie

## Technische Details

### Correcte Mock Interface
```python
class MockValidationService:
    async def validate_definition(
        self,
        request: Any,
        context: Optional[Dict[str, Any]] = None
    ) -> ValidationResult:
        """Match the actual validate_definition interface."""
        return ValidationResult(
            is_acceptable=True,
            overall_score=0.9
        )
```

### Te Fixen Files
- `tests/fixtures/service_stubs.py`
- `tests/integration/test_web_lookup_integration.py`
- Alle test files die ValidationService mocken

## Geschatte Effort
**2-4 uur** (quick win)

## Dependencies
- Geen, kan direct opgepakt worden

## Testing
- Draai complete test suite
- Specifiek integration tests voor web lookup
- Verify geen interface mismatches meer

## Notes
- Dit is een quick win die direct waarde oplevert
- Blokkeert momenteel alle web lookup testing
- Moet voor andere development gebeuren

## Definition of Done
- [ ] Mock interfaces gefixed
- [ ] Alle tests draaien zonder interface errors
- [ ] Integration tests zijn groen
- [ ] Type checking passes voor test files
- [ ] CI/CD pipeline draait zonder failures

## Linked Items
- Epic: [[EPIC-003]] - Content Verrijking / Web Lookup
- Blocks: US-325 (test coverage)
- Related: WEB-LOOKUP-ANALYSIS-REPORT.md (test failures sectie)