# US-214: Web Lookup Interface Unification

## User Story
**Als** ontwikkelaar van de DefinitieAgent applicatie
**Wil ik** één canonieke interface voor alle web lookup functionaliteit
**Zodat** de 60% development velocity loss wordt opgelost en bugs door inconsistentie worden voorkomen

## Context
De huidige implementatie heeft 6+ verschillende interfaces voor dezelfde functionaliteit wat leidt tot:
- Development velocity loss van 60%
- Hoge bug risk door inconsistenties
- Moeilijk te onderhouden codebase
- Duplicatie van logica

## Acceptatiecriteria
- [ ] Er is precies één `CanonicalLookupResult` dataclass voor alle providers
- [ ] Er is één `WebLookupProvider` abstract base class
- [ ] Alle providers implementeren dezelfde interface
- [ ] Legacy interfaces zijn verwijderd (geen backwards compatibility nodig voor single-user)
- [ ] Type hints zijn consistent door de hele codebase
- [ ] Geen import errors door interface mismatches

## Technische Details

### Canonical Interface Design
```python
@dataclass
class CanonicalLookupResult:
    provider_key: str
    source_name: str
    title: str
    content: str
    summary: Optional[str]
    url: Optional[str]
    confidence: float
    relevance: float
    retrieved_at: datetime
    cache_hit: bool
    response_time_ms: float
```

### Implementatie Volgorde
1. Definieer canonical interfaces in `src/services/web_lookup/core/interfaces.py`
2. Migreer Wikipedia provider naar nieuwe interface
3. Migreer SRU providers naar nieuwe interface
4. Update `ModernWebLookupService` om alleen canonical interface te gebruiken
5. Verwijder alle legacy interfaces

## Geschatte Effort
**2 dagen** (single-user versie zonder compatibility layer)

## Dependencies
- Geen externe dependencies
- Moet voor andere web lookup refactoring gebeuren

## Testing
- Unit tests voor interface compliance
- Integration test dat alle providers dezelfde interface gebruiken
- Type checking met mypy

## Notes
- Dit is de hoogste prioriteit omdat het alle andere werk blokkeert
- Geen backwards compatibility nodig (single-user applicatie)
- Focus op simpliciteit en consistency

## Definition of Done
- [ ] Canonical interfaces gedefinieerd
- [ ] Alle providers gemigreerd
- [ ] Legacy code verwijderd
- [ ] Tests groen
- [ ] Type checking passes
- [ ] Development snelheid merkbaar verbeterd

## Linked Items
- Epic: [[EPIC-003]] - Content Verrijking / Web Lookup
- Blocking: US-215, US-217, US-218
- Related: WEB-LOOKUP-ANALYSIS-REPORT.md