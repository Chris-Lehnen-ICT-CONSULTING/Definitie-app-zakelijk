---
id: US-235
epic: EPIC-004
titel: "US-235: titel: Per-onderdeel “↻ Vernieuw” knoppen voor voorbeelden in Bewerk‑tab"
status: proposed
prioriteit: GEMIDDELD
story_points: 3
aangemaakt: 2025-09-22
bijgewerkt: 2025-09-22
owner: product
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-22
---

# US-235: Per-onderdeel “↻ Vernieuw” knoppen voor voorbeelden in Bewerk‑tab

## Gebruikersverhaal
Als redacteur wil ik in het Bewerk‑tabblad per onderdeel (Voorbeeldzinnen, Praktijkvoorbeelden, Tegenvoorbeelden, Synoniemen, Antoniemen, Toelichting) een “↻ Vernieuw” knop hebben, zodat ik alleen dat onderdeel opnieuw kan laten genereren door de AI zonder de overige onderdelen te overschrijven.

## Acceptatiecriteria
- [ ] In de Bewerk‑tab toont elk onderdeel (6 stuks) een “↻ Vernieuw” knop naast de titel.
- [ ] Bij klikken wordt uitsluitend het betreffende onderdeel opnieuw gegenereerd en in de UI vervangen; overige onderdelen blijven ongewijzigd.
- [ ] De call hergebruikt de bestaande V2‑stack (UnifiedExamplesGenerator/AIServiceV2) met begrip, actuele definitietekst en de drie contextlijsten uit de edit‑velden.
- [ ] Respecteert centrale configuratie (aantal voorbeelden, model/temperatuur) en time‑out; toont spinner tijdens genereren.
- [ ] Bij ontbrekende `OPENAI_API_KEY` is de knop disabled met een duidelijke hint.
- [ ] Fouten worden gebruikersvriendelijk gemeld; de bestaande content blijft dan staan.
- [ ] (Debug) Optionele toggle kan de ruwe respons voor het onderdeel tonen.

## Technisch
- UI (`DefinitionEditTab`):
  - Voeg per sectie een `st.button("↻ Vernieuw …")` toe.
  - Bouw `context_dict` uit de huidige edit‑velden (organisatorisch/juridisch/wettelijk).
  - Roep via `run_async(...)` een single‑type generator aan en update alleen `SessionStateManager[edit_<id>_examples][<type>]`.
- Voorbeelden API (hergebruik):
  - Gebruik `UnifiedExamplesGenerator.generate_examples(ExampleRequest(..., example_type=<type>, generation_mode=ASYNC))` via een lichtgewicht async wrapper (toe te voegen helper) om één type te genereren.
- Tests:
  - UI‑smoke met stubbed generator: “verniew” voor één type overschrijft alleen die key in de examples‑dict.

## Testscenario’s
1) Happy path – Synoniemen vernieuwen
   - Gegeven een geladen definitie met bestaande examples.
   - Als ik op “↻ Vernieuw Synoniemen” klik,
   - Dan wordt alleen de lijst ‘synoniemen’ vervangen en overige lijsten blijven gelijk.

2) Geen API key
   - Als er geen `OPENAI_API_KEY` is,
   - Dan is de knop disabled en zie ik een hint in de UI.

3) Foutafhandeling
   - Als de call faalt,
   - Dan toont de UI een foutmelding en blijven de oude values intact.

## Uitvoer/Deliverables
- UI‑wijziging in `src/ui/components/definition_edit_tab.py` (per‑onderdeel refresh knoppen).
- (Indien nodig) Kleinere helper in `voorbeelden/unified_voorbeelden.py` om één type async te genereren.
- Unit/smoke test voor het update‑gedrag per key.

