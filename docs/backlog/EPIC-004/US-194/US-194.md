---
id: US-194
epic: EPIC-004
status: active
prioriteit: HOOG
story_points: 5
sprint: next
owner: ui
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-16
---

# US-194 â€” Quality Control: Toetsregels Browser (JSONâ€‘regels browse/filter)

Context
De Editâ€‘tab toont alleen violations. Voor experts is een browsable overzicht van Ã¡lle JSONâ€‘toetsregels (id, naam, uitleg, patronen, voorbeelden) nodig om snel te verifiÃ«ren wat geladen is en hoe regels toegepast worden, los van de validatieâ€‘uitkomst.

Doel
Voeg in de Quality Controlâ€‘tab een â€œToetsregels Browserâ€ toe met filter en detailweergave van de JSONâ€‘regels, inclusief een snelle â€˜probeer op huidige definitieâ€™ check per regel.

Scope
- UIâ€‘laag (Streamlit) binnen Quality Controlâ€‘tab:
  - Load regels via `ToetsregelManager` (geen directe fileâ€‘IO buiten manager).
  - Filter op prefix/categorie (ARAI/CON/ESS/INT/SAM/STR/VER).
  - Toon per regel: id, naam, uitleg, herkenbaar_patronen, goede_voorbeelden, foute_voorbeelden.
  - Toon â€œV2 statusâ€: hoe de V2â€‘validator de regel evalueert (forbidden/required/structure), afgeleid uit onze migratie/mapping.
  - â€œProbeer op huidige definitieâ€: voer een adâ€‘hoc check uit tegen alleen deze regel (via V2â€‘validator of legacy loader; resultaat inline tonen).

Niet in scope
- Regels wijzigen of nieuwe regels aanmaken (gÃ©Ã©n .py/.json toevoegen).
- Backendâ€‘services aanpassen (UI only); geen Streamlit in services per CLAUDE.md.

Architectuur/Constraints
- Respecteer CLAUDE.md: geen services in UIâ€‘services importeren, geen asyncio.run in services.
- Gebruik ToetsregelManager als bron; geen direct pad naar bestanden.
- Prestatie: lazy loading + eenvoudige caching; UI blijft responsief.

Acceptatiecriteria
- [ ] Lijst met alle JSONâ€‘regels zichtbaar met filter op prefix.
- [ ] Detailweergave toont id, naam, uitleg, patronen en voorbeelden.
- [ ] â€œV2 statusâ€ zichtbaar per regel (forbidden/required/structure/none) o.b.v. mapping.
- [ ] Knop â€œProbeer op huidige definitieâ€ valideert alleen die regel en toont resultaat.
- [ ] Geen nieuwe regelbestanden; alle data komt uit ToetsregelManager.

Implementatiestappen
1) UIâ€‘component in Quality Controlâ€‘tab: nieuwe sectie â€œğŸ“‹ Toetsregels Browserâ€.
2) Load regels: `get_toetsregel_manager().get_all_regels()` en ordenen op id.
3) Filtercontrols: multiselect prefix + tekstzoekveld.
4) Tabel met regels; klik toont detailpaneel.
5) â€œV2 statusâ€: mapping tonen op basis van migratieplan (forbidden/required/structure/none).
6) â€œProbeer op huidige definitieâ€: call naar V2â€‘validator met beperking tot 1 regel (of simuleer door output te filteren op code).
7) UX: expanders en paging voor performance; simpele cache in UIâ€‘state.

Risicoâ€™s & mitigaties
- Te veel regels/tekens â†’ paging/expander, lazy render.
- Onzeker V2â€‘status per regel â†’ mapping onderhouden in Ã©Ã©n helper (geen duplicatie).

