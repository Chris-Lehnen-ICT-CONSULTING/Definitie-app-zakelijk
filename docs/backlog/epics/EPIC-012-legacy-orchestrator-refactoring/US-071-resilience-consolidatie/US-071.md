# US-071: Resilience-consolidatie naar één robuuste module

## Story Overview
**ID**: US-071
**Epic**: EPIC-012 - Legacy Orchestrator Refactoring
**Status**: TODO
**Priority**: MEDIUM
**Points**: 5

## User Story
Als platform engineer wil ik één consistente resilience-implementatie hebben zodat retries, health monitoring, failover en queue persistence eenduidig en testbaar zijn.

## Business Context
Er zijn meerdere resilience-varianten (`utils/resilience.py`, `utils/optimized_resilience.py`, `utils/integrated_resilience.py`, `utils/resilience_summary.py`) met overlappende verantwoordelijkheid. Consolidatie reduceert complexiteit, verbetert testbaarheid en maakt gedrag voorspelbaar.

## Acceptance Criteria
- [ ] Eén primaire resilience module met:
  - [ ] Retry (exponential/adaptive)
  - [ ] Health monitoring + status (healthy/degraded/unhealthy)
  - [ ] Circuit breaker of vergelijkbare failover
  - [ ] Queue-and-retry met persistente dead-letter queue
  - [ ] Samenvattingsrapport (geconsolideerd uit `resilience_summary.py`)
- [ ] Alle call-sites verwijzen naar de nieuwe module
- [ ] Bestaande varianten gemarkeerd als archived/legacy met verwijzing
- [ ] Unit- en integratietests dekken alle scenario’s

## Technical Implementation
- Kies basismodule: `utils/integrated_resilience.py` als fundament (compleetste set).
- Integreer delen uit `resilience.py` en `optimized_resilience.py` (API’s harmoniseren; duplicaten verwijderen).
- Houd `resilience_summary.py` als rapportagemodule, laten aanroepen door de primaire resilience service.
- Introduceer één publiek API-contract (bijv. `ResilienceService` class) met duidelijke methoden.

## Testing Requirements
- Unit tests voor retry, circuit breaker, health monitor, DLQ.
- Integratietest met AI/validation pad (foutinjectie + recovery), budgetteer latentie.

## Migration Plan
1. Nieuwe module bouwen + testen.
2. Call-sites migreren (gefaseerd) en legacy modules deprecaten.
3. Documentatie en operaties-handleiding bijwerken.

## Dependencies
- Geen functionele afhankelijkheden; beïnvloedt servicelagen die resilience gebruiken.

## Definition of Done
- [ ] Nieuwe module actief; legacy modules gedeactiveerd
- [ ] 90%+ coverage op kritieke paden
- [ ] Integratie met monitoring/logging
- [ ] Documentatie up-to-date
