# US-069: Archiveer V1 Orchestrator en Generator Modules

## User Story
**Als** ontwikkelaar
**Wil ik** de legacy V1 orchestrator en generator modules archiveren
**Zodat** de codebase alleen moderne V2 implementaties bevat

## Context
De V1 orchestrator (`src/services/definition_orchestrator.py`) en bijbehorende generator modules zijn niet meer in gebruik door de container maar bevatten waardevolle business logica die eerst geëxtraheerd moet worden.

## Legacy Modules om te Archiveren
1. `src/services/definition_orchestrator.py` (530 regels)
   - Status bepaling algoritme
   - Update flow logica
   - Stats tracking

2. Generator modules:
   - `definition_generator_config.py` - Business configuratie
   - `definition_generator_context.py` - EnrichedContext management
   - `definition_generator_enhancement.py` - Enhancement rules
   - `definition_generator_prompts.py` - Prompt building
   - `definition_generator_cache.py` - Performance optimalisaties
   - `definition_generator_monitoring.py` - Metrics logica

## Acceptatiecriteria
- [ ] Alle waardevolle business logica gedocumenteerd
- [ ] Business rules geëxtraheerd naar V2 services
- [ ] Legacy files verplaatst naar docs/archief/
- [ ] Geen imports meer naar legacy modules
- [ ] Container gebruikt alleen V2 orchestrator
- [ ] Alle tests blijven groen

## Business Logica te Extraheren

### Van definition_orchestrator.py
```python
# Status bepaling algoritme
def _determine_status(self, validation_result) -> DefinitionStatus:
    """Business rule: status based on validation score."""
    if validation_result.overall_score >= 0.8:
        return DefinitionStatus.ESTABLISHED
    elif validation_result.overall_score >= 0.6:
        return DefinitionStatus.REVIEW
    else:
        return DefinitionStatus.DRAFT
```

### Van generator modules
- Config parameters → ServiceConfig
- Context enrichment → HybridContextManager
- Enhancement rules → EnhancementService
- Prompt templates → PromptServiceV2
- Cache strategies → Unified cache config
- Monitoring metrics → MetricsService

## Implementatie Stappen
1. Analyseer elke module voor business logica
2. Documenteer business rules in EPIC-012 docs
3. Implementeer ontbrekende logica in V2 services
4. Update alle imports
5. Test functionaliteit behouden
6. Archiveer oude modules

## Dependencies
- US-061: Business kennis extractie moet compleet zijn
- US-062: FeedbackBuilder moet gerefactored zijn
- Alle UI/integratie moet V2 gebruiken

## Risico's
- Verlies van niet-gedocumenteerde business logica
- Performance optimalisaties kunnen verloren gaan
- Hidden dependencies in test code

## Verificatie
1. Volledige test suite groen
2. Performance metrics gelijk of beter
3. Geen import errors
4. Business logica werkt in V2

## Story Points: 8

## Priority: MEDIUM

## Sprint: TBD

## Notes
- Maak eerst complete inventory van business rules
- Overweeg tijdelijk beide versies naast elkaar
- Documenteer alle extracted patterns
