---
id: US-124
epic: EPIC-014
titel: "US-124: titel: Enhancement‑flow (minimaal): violations→gerichte verbetering + retry‑pad"
status: Nog te bepalen
prioriteit: HOOG
story_points: 5
sprint: sprint-38
owner: developer-implementer
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-12
links:
  - docs/backlog/DEEP_DIVE_IMPROVEMENT_PLAN.md#orchestrator--flow
---

# US-124: Enhancement‑flow (minimaal): violations→gerichte verbetering + retry‑pad

## Gebruikersverhaal
Als ontwikkelaar wil ik bij validatiefouten een gericht verbeterpad (enhancement) kunnen triggeren, zodat de definitie automatisch verbetert binnen beperkte iteraties.

## Acceptatiecriteria (SMART)
- Specifiek: pad in orchestrator dat top‑N violations vertaalt naar gerichte prompt‑aanpassingen en één retry uitvoert; duidelijke metadata `enhancement_applied: true`.
- Meetbaar: in ≥70% van gevallen stijgt score ≥0.05 na enhancement op testset; max 1 retry (configurable).
- Tijdgebonden: sprint‑38.

## Implementatienotities
- Kleine EnhancementService implementatie met mapping rule→prompt‑hint.
- Uitbreiding van PromptServiceV2 voor targeted hints zonder tokenexplosie.

## Testplan
- tests/services/test_enhancement_minimal_path.py – simulate violations en controleer scoreverbetering en metadata.

## Definition of Done
- Documenteer mapping en beperkingen in `docs/architectuur/`.

