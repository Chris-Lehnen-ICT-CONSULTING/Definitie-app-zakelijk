---
id: US-156
epic: EPIC-014
titel: "US-156: titel: Implementeer FeedbackBuilder Priority Algorithm"
status: open
prioriteit: P2
story_points: 5
aangemaakt: 2025-09-30
bijgewerkt: 2025-09-30
owner: tbd
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-30
---

# US-156: Implementeer FeedbackBuilder Priority Algorithm

## User Story
**Als** ontwikkelaar  
**Wil ik** het bewezen feedback prioritering algoritme implementeren  
**Zodat** de AI model effectieve, niet-overweldigende feedback krijgt  

## Status
**Status**: TODO  
**Priority**: CRITICAL  
**Story Points**: 5  
**Epic**: [EPIC-014: Business Logic Refactoring](../EPIC-014.md)  

## Business Context
Dit algoritme is cruciaal voor de iteratieve verbetering. Het zorgt ervoor dat de AI:
- Niet overweldigd wordt met teveel feedback tegelijk
- Focus houdt op de meest impactvolle problemen
- Variatie krijgt in feedback tussen iteraties

## Acceptance Criteria
- [ ] Implementeer 5-staps prioritering: Kritiek â†’ Groepering â†’ Type-specifiek â†’ Leren â†’ Versterking
- [ ] Maximum 3 kritieke violations tegelijk presenteren
- [ ] Maximum 5 totale feedback items per iteratie
- [ ] Iteratie-bewuste feedback (verschillende formuleringen per iteratie)
- [ ] Deduplicatie van feedback items
- [ ] Emoji gebruik voor prioriteit indicatie (ðŸš¨ voor kritiek, ðŸ’¡ voor suggesties)

## Technical Details

### Priority Order Algorithm
```python
def prioritize_feedback(feedback_items):
    # 1. Critical items met ðŸš¨
    critical = [f for f in feedback if f.startswith("ðŸš¨")]
    
    # 2. Concrete suggesties met ðŸ’¡
    suggestions = [f for f in feedback if "ðŸ’¡" in f or "Voeg toe:" in f or "Vervang" in f]
    
    # 3. Overige feedback
    other = [f for f in feedback if f not in critical + suggestions]
    
    # Combineer en dedupliceer
    prioritized = critical[:3] + suggestions + other
    return unique(prioritized)[:5]
```

### Iteratie-Bewuste Feedback
```python
iteration_feedback = {
    1: "Vermijd deze patronen: {patterns}",
    2: "Nog steeds aanwezig: {patterns}. Probeer alternatieve formuleringen.",
    3: "Fundamentele herformulering nodig voor: {patterns}"
}
```

## Test Cases
1. Test met 10+ violations â†’ max 5 feedback items
2. Test met 5 critical violations â†’ max 3 critical in output
3. Test deduplicatie met duplicate feedback
4. Test iteratie-specifieke formuleringen
5. Test emoji prioriteit ordering

## Dependencies
- Validation result met violations
- Feedback context met history

## Notes
- Dit is CORE functionaliteit - geen wijzigingen zonder uitgebreide testing
- Performance kritiek: moet <100ms blijven
