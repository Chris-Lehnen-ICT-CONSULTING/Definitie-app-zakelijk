# US-119: Implementeer Feedback History Manager

## User Story
**Als** iteratie controller  
**Wil ik** feedback history efficiënt beheren  
**Zodat** de prompt niet overloaded wordt met oude feedback  

## Status
**Status**: TODO  
**Priority**: MEDIUM  
**Story Points**: 2  
**Epic**: [EPIC-014: Business Logic Refactoring](../EPIC-014.md)  

## Business Context
Beheert feedback geschiedenis met FIFO principe om prompt bloat te voorkomen terwijl relevante feedback behouden blijft.

## Acceptance Criteria
- [ ] Maximum 10 feedback items in history
- [ ] FIFO: oudste items worden eerst verwijderd
- [ ] Feedback consolidatie waar mogelijk
- [ ] Deduplicatie van vergelijkbare feedback
- [ ] Efficiënte string concatenatie

## Implementation
```python
class FeedbackHistoryManager:
    MAX_ITEMS = 10
    
    def __init__(self):
        self.history = []
    
    def add_feedback(self, new_feedback: list[str]):
        # Add new feedback
        self.history.extend(new_feedback)
        
        # Deduplicate
        self.history = list(dict.fromkeys(self.history))
        
        # FIFO trimming
        if len(self.history) > self.MAX_ITEMS:
            self.history = self.history[-self.MAX_ITEMS:]
    
    def get_formatted(self) -> str:
        return " | ".join(self.history)
```

## Performance Considerations
- String operations moeten efficient zijn
- Geen deep copies tenzij nodig
- Cache formatted output

## Dependencies
- Feedback builder output
- Generation context

## Notes
- 10 items is empirisch bepaald optimum
- Te veel feedback vermindert AI performance
- Te weinig verliest context tussen iteraties