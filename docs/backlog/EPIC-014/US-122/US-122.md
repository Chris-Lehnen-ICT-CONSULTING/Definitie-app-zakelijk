---
id: US-122
epic: EPIC-014
titel: "US-122: Een “Branches” subview in de Portal die per branch toont:"
type: feature
status: active
prioriteit: HOOG
story_points: 3
sprint: backlog
owner: developer
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-11
---

# US-122: Branch Overzicht & Koppeling met US/BUG

## Achtergrond
Als single developer wil ik in de Portal snel zien welke git branches er zijn, wat hun status is (ahead/behind), en welke user stories/bugs eraan gerelateerd zijn, zodat ik gericht kan mergen of opruimen.

## Doel
Een “Branches” subview in de Portal die per branch toont:
- Naam, ahead/behind tov `main`, laatste commit
- Gerelateerde items: herkend via branchnaam (US-XXX/BUG-XXX) en via diff-op-bestanden (backlog/EPIC-XXX/…)

## Acceptatiecriteria
- [ ] CLI/Script dat branch‑metadata ophaalt (zonder netwerk):
  - `git for-each-ref` op remotes en locals (naam, sha, datum)
  - ahead/behind t.o.v. main (`git rev-list --left-right --count`)
- [ ] Mapping naar werkitems:
  - Herken US/BUG in branchnaam (regex: `US-\d+`, `BUG-\d+`)
  - Diff t.o.v. main: files onder `docs/backlog/EPIC-*/US-*/` en `BUG-*` koppelen
- [ ] Output JSON: `docs/portal/branches.json` (per branch: meta + related_us + related_bugs + changed_files)
- [ ] Portal view “Branches”: tabel met kolommen (branch, ahead/behind, laatste commit, items), chips klikbaar naar docs.
- [ ] Pre‑commit/CI job die `branches.json` bijwerkt bij push/PR (optioneel)

## Uitwerking (schets)
- Script: `scripts/docs/scan_branches.py`
  - Schrijft `docs/portal/branches.json`
- UI: nieuw tabje “Branches” in `docs/portal/index.html` + rendering in `portal.js`

## Definition of Done
- [ ] `branches.json` genereert lokaal < 0.5s
- [ ] Portal toont branches met correcte counts (validatie middels 1-2 testbranches)
- [ ] Documentatie in `docs/portal/README.md` over deeplinks/filters

