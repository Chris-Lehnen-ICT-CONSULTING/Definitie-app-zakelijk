---
id: US-227
titel: Documentcontext doorgeven aan service (GenerationRequest)
epic: EPIC-018
status: Open
prioriteit: HOOG
story_points: 5
owner: architecture
aangemaakt: 2025-09-22
bijgewerkt: 2025-09-22
canonical: true
applies_to: definitie-app@current
last_verified: 2025-09-22
---

# US-227: Documentcontext doorgeven aan service (GenerationRequest)

## Gebruikersverhaal
Als gebruiker wil ik dat de door mij geselecteerde documenten daadwerkelijk worden gebruikt in de prompt, zodat de definitie contextspecifiek is.

## Acceptatiecriteria
- [ ] UI aggregeert documentcontext (keywords/concepten/juridische verwijzingen)
- [ ] `GenerationRequest` bevat `document_context` (samenvatting)
- [ ] HybridContextManager voegt een “document” bron toe met hoge confidence
- [ ] Prompt‑contextsectie toont documentcontext aanwezig

## Technisch
- UI: bouw korte samenvatting uit `get_aggregated_context(selected_ids)`
- ServiceFactory: zet samenvatting door in request
- Geen wijzigingen aan web_lookup pad

## Tests
- Integratietest verifieert presence van documentcontext in prompt/metadata

