---
id: US-238
titel: "US-238: Als lezer van de prompt wil ik elke basisrichtlijn precies Ã©Ã©n keer zien, zodat de instructies compact, eenduidig en ..."
status: proposed
priority: P0
owner: architecture
applies_to: definitie-app@v2
canonical: false
last_verified: 2025-09-22
links:
  - EPIC-019
---

# US-019-01 â€” Deduplicatie basisvereisten

Als lezer van de prompt wil ik elke basisrichtlijn precies Ã©Ã©n keer zien, zodat de instructies compact, eenduidig en zonder redundantie zijn.

## Asâ€‘Is
- ExpertiseModule schrijft een sectie â€œBELANGRIJKE VEREISTENâ€.
- OutputSpecificationModule schrijft â€œğŸ“ DEFINITIE KWALITEITâ€.
- Inhoud overlapt grotendeels â†’ tokenverspilling.

Bronnen:
- src/services/prompts/modules/expertise_module.py:187
- src/services/prompts/modules/output_specification_module.py:139

## Toâ€‘Be
- Slechts Ã©Ã©n generieke kwaliteitssectie in de prompt (OutputSpecification leidend).
- ExpertiseModule bevat geen duplicerende kwaliteitslijst (optioneel: behoud korte taak/rol).

## Acceptance Criteria
- AC1: In een gegenereerde prompt komt slechts Ã©Ã©n generieke kwaliteitssectie voor.
- AC2: De resterende kwaliteitssectie bevat alle noodzakelijke bullets (geen inhoudsverlies).
- AC3: Tokenvergelijking toont reductie t.o.v. huidige prompt (â‰¥ 3â€“5% absolute winst).

## Implementatie (richting)
1) ExpertiseModule: verwijder of gate de methode `_build_basic_requirements()` (config flag)
   - src/services/prompts/modules/expertise_module.py:187
   - Voeg ENV â€˜PROMPT_DEDUP_BASIC_REQ=trueâ€™ of gebruik bestaande compact flags.
2) OutputSpecificationModule blijft bron voor generieke kwaliteitsrichtlijnen
   - src/services/prompts/modules/output_specification_module.py:139, 167
3) ModularPromptAdapter: map flags â†’ module configs (examples off, compact)
   - src/services/prompts/modular_prompt_adapter.py:139

## Testplan
- Unit: render prompt voor begrip â€˜semantiekâ€™ en assert dat â€œBELANGRIJKE VEREISTENâ€ niet voorkomt, â€œğŸ“ DEFINITIE KWALITEITâ€ wel.
- Snapshot: diff op promptstring vÃ³Ã³r/na wijziging â†’ geen verlies van plichtâ€‘bullets.
- Tokenmeting: verslag met oude vs nieuwe tokencount (min 5 cases).

## Risks / Mitigations
- Risico: verlies van een specifieke bullet uit ExpertiseModule
  - Mitigatie: expliciet vergelijken en zo nodig Ã©Ã©n bullet toevoegen in OutputSpecification.
