---
id: US-251
titel: "US-251: titel: Centraliseer compact‑mode flags (ENV/Config → Adapter)"
status: proposed
priority: P2
owner: architecture
applies_to: definitie-app@v2
canonical: false
last_verified: 2025-09-22
links:
  - EPIC-019
---

# US-019-14 — Compact‑mode flags

Als ontwikkelaar wil ik één centrale manier (ENV/Config) om compact gedrag te sturen (geen voorbeelden, beperkte regels, geen metrics), zodat gedrag consistent is.

## As‑Is
- Modules hebben eigen `include_examples`/`detailed_*` switches; geen centrale flag mapping.

Bronnen:
- src/services/prompts/modular_prompt_adapter.py:139 (module config mapping)

## To‑Be
- ENV flags (bijv. PROMPT_COMPACT, PROMPT_INCLUDE_EXAMPLES, PROMPT_RULES_MAX_PER_CATEGORY, PROMPT_INCLUDE_METRICS) → één mapping in Adapter.

## Acceptance Criteria
- AC1: Eén wijziging van ENV toggles werkt voor alle modules.
- AC2: Documentatie van flags + defaults.

## Implementatie (richting)
1) Lees ENV in ModularPromptAdapter.__init__ of _convert_config_to_module_configs.
2) Zet waarden op module configs (‘include_examples=False’, ‘include_detailed_metrics=False’, ‘max_per_category=N’ via shared state/config).

## Testplan
- Unit: set ENV → controleer module configs via `get_component_metadata()`.
- Snapshot: prompt reageert conform vlaggen.

## Risks / Mitigations
- Risico: ENV drift per omgeving
  - Mitigatie: vastleggen in config manager + README sectie.
