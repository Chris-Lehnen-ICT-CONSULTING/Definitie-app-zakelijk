---
id: US-248
titel: Document‑snippets — scherpere standaardbudgetten
status: proposed
priority: P1
owner: architecture
applies_to: definitie-app@v2
canonical: false
last_verified: 2025-09-22
links:
  - EPIC-019
  - EPIC-018
---

# US-019-11 — Document‑snippets budget

Als productteam wil ik lagere standaardbudgetten voor document‑snippets, zodat prompts korter worden zonder context te verliezen.

## As‑Is
- Defaults: max 16 snippets, max 800 chars (te ruim voor meeste prompts).

Bronnen:
- src/services/prompts/prompt_service_v2.py:216–223 (_maybe_augment_with_document_snippets)

## To‑Be
- Defaults: max 3 snippets; totaal ~300–400 chars.

## Acceptance Criteria
- AC1: Standaard config beperkt snippets zichtbaar.
- AC2: UI kan hoger budget afdwingen, maar blijft binnen hard limit.

## Implementatie (richting)
1) Verlaag standaardwaarden in `_maybe_augment_with_document_snippets` (env default waarden).
2) Documenteer override via ENV.

## Testplan
- Snapshot: ≤3 snippets; ≤400 chars totaal.

## Risks / Mitigations
- Risico: te weinig context in lastige cases
  - Mitigatie: UI setting om tijdelijk op te schalen.
