---
id: US-428
epic: EPIC-025
titel: "US-428: titel: Resolve Agent Instruction Conflicts"
status: open
prioriteit: P1
story_points: 1
sprint: 1
aangemaakt: 2025-09-30
bijgewerkt: 2025-09-30
owner: process-guardian
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-30
---

# US-428: Resolve Agent Instruction Conflicts

## User Story

**Als** AI agent (Claude/Codex/BMad)
**Wil ik** één duidelijke instructiebron
**Zodat** ik weet welke regels te volgen zonder conflicten

## Description

Resolve conflict tussen 3 agent instruction sources:

1. `CLAUDE.md` (376 regels, project-specific)
2. `~/.ai-agents/UNIFIED_INSTRUCTIONS.md` (220 regels, generiek)
3. `AGENTS.md` (5749 regels, BMad method)

CLAUDE.md zegt "Unified instructions > dit document" maar bevat overlapping content.

## Acceptance Criteria

- [ ] CLAUDE.md contains ONLY project-specific rules
- [ ] UNIFIED_INSTRUCTIONS precedence explicitly stated
- [ ] Agent name mapping table added (TDD ↔ Codex ↔ Claude ↔ BMad)
- [ ] No overlapping/conflicting rules
- [ ] Clear which document for which purpose

## Tasks

1. **Refactor CLAUDE.md (1h)**
   - Remove generieke regels (defer naar UNIFIED)
   - Keep only DefinitieAgent-specific patterns
   - Add explicit precedence statement
   - Add agent mapping table

2. **Update UNIFIED_INSTRUCTIONS.md (30min)**
   - Clarify precedence over project docs
   - Deduplicate overlap with CLAUDE.md
   - Reference CLAUDE.md for project specifics

3. **Create Agent Mapping Table (30min)**
   ```markdown
   | Workflow Role | Codex | Claude | BMad |
   |---------------|-------|--------|------|
   | Business Analysis | analyst | Analysis mode | bmad-analyst |
   | Architecture | architect | Design mode | bmad-architect |
   | Development | dev | Implementation | bmad-dev |
   ```

## Validation

```bash
# No "conflict" mentions in CLAUDE.md
grep -c "conflict" CLAUDE.md
# Expected: 0 (or only in historical context)

# Precedence clearly stated
grep "precedence\|priority" CLAUDE.md
# Expected: Clear statement found

# Mapping table exists
grep "Agent.*Mapping\|TDD.*Codex" CLAUDE.md
# Expected: Table found
```

## Dependencies

- Process Guardian analysis report
- Understanding of all 3 instruction systems

## Owner

**Agent:** ⚙️ Process Guardian Agent
**Effort:** 2 hours
**Sprint:** 1

## Notes

- Preserve BMad-specific content in AGENTS.md (don't modify)
- UNIFIED_INSTRUCTIONS is shared across projects (careful with edits)
- Focus on clarity, not perfection

## Related

- **Epic:** EPIC-025
- **Agent Report:** Finding #3 (Agent Instruction Conflict)
