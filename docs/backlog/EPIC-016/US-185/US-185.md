id: US-185
titel: Configuratie auditlog en versiebeheer
epic: EPIC-016
status: Backlog
prioriteit: GEMIDDELD
story_points: 3
aangemaakt: 2025-09-13
bijgewerkt: 2025-09-15
owner: architecture
type: feature
applies_to: definitie-app@current
canonical: true
last_verified: 2025-09-15
vereisten:
- REQ-096
---

# US-185: Configuratie auditlog en versiebeheer

## Doel
Elke wijziging aan configuratie vastleggen (wie/wat/wanneer/voorheen→nieuw) en versies kunnen inzien/terugdraaien.

## Acceptatiecriteria
- [ ] Auditlog per wijziging zichtbaar in Beheer‑tab
- [ ] Versieoverzicht per configuratiegroep; mogelijkheid tot rollback naar vorige versie
- [ ] Exporteer auditlog als CSV/JSON

## Definition of Done
- [ ] DB‑audittabel(len)
- [ ] UI‑weergave audit + rollback‑actie
- [ ] Documentatie bijgewerkt

## Data‑model
- Tabel `config_audit` (id, config_key, prev_value_json, new_value_json, changed_by, changed_at, comment)
- Tabel `config_versions` (id, config_key, version, value_json, created_at, created_by)

## UI‑Details
- Auditlijst met filter op key/user/datum; actie “Rollback naar versie X”.
- Rollback toont diff en confirmatie.

## Performance/retentie
- Retentiebeleid (bijv. max 100 versies per key of 180 dagen); export vóór purge.

## Testplan
- Unit: insert audit entries; rollback produceert juiste value_json en nieuwe audit entry
- Integratie: versieoverzicht en rollback flow; diff‑preview correct
- UI: filters, export naar CSV/JSON
