---
id: US-035
epic: EPIC-007
titel: DI‑consolidatie & UI‑caching + guard (performance & init‑stabiliteit)
status: Nog te bepalen
prioriteit: HOOG
story_points: 3
owner: platform-engineer
sprint: sprint-37
canonical: true
last_verified: 2025-09-12
applies_to: definitie-app@current
links:
- docs/backlog/DEEP_DIVE_IMPROVEMENT_PLAN.md#architectuur--di
---

# US-035: DI‑consolidatie & UI‑caching + guard (performance & init‑stabiliteit)

## Gebruikersverhaal
Als platform engineer wil ik één containerinstantie per sessie en geen directe `ServiceContainer()` news, zodat startup‑kosten dalen en reruns stabiel blijven.

## Acceptatiecriteria (SMART)
- Specifiek: alle container verkrijging via `get_container()`; UI wrapper met `st.cache_resource`; guard test die directe `ServiceContainer()` buiten container detecteert.
- Meetbaar: container init count 1 per sessie (log/assert); cold‑start dev < 2s.
- Tijdgebonden: sprint‑37.

## Testplan
- tests/services/test_container_wiring_v2_cutover.py uitbreiden met init‑count asserts.
- Guard test voor `new ServiceContainer(` via ripgrep in CI script.

## Definition of Done
- Init‑stabiliteit geborgd; CI guard actief; documentatie in README “Performance Quick Wins”.

