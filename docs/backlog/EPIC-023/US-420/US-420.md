---
id: US-420
titel: Toetsregels Usage Analysis Dashboard
epic: EPIC-023
type: user-story
status: Open
prioriteit: HIGH
story_points: 5
sprint: backlog
aangemaakt: 2025-09-29
bijgewerkt: 2025-09-29
owner: development-team
tags:
  - toetsregels
  - analysis
  - quality-control
---

# US-420: Toetsregels Usage Analysis Dashboard

## User Story
**Als een** kwaliteitsmanager
**wil ik** inzicht in het gebruik van toetsregels via een dashboard
**zodat** ik kan zien welke regels actief zijn en hoe ze presteren

## Acceptance Criteria

### Functional Requirements
- [ ] Analyse toont totaal aantal geladen regels
- [ ] Service mode, architecture en version worden getoond
- [ ] Analyse resultaten worden gecached in session state
- [ ] Timestamp van laatste analyse is zichtbaar
- [ ] Vorige analyse resultaten kunnen bekeken worden
- [ ] Refresh knop voor nieuwe analyse

### Technical Requirements
- [ ] Integratie met V2 ValidationService
- [ ] get_service_info() methode wordt gebruikt
- [ ] Results opslaan via SessionStateManager
- [ ] Error handling voor service unavailable
- [ ] Async processing voor zware analyses

## Implementation Details

### Analysis Metrics
- Total rules loaded
- Rules per category
- Active vs inactive rules
- Performance per rule (avg execution time)
- Success/failure rates
- Coverage percentages

### Dashboard Layout
```
┌─────────────────────────────────┐
│    Toetsregels Analysis         │
├─────────┬───────────────────────┤
│ Summary │ Details               │
│         │                       │
│ Total:45│ ARAI: 8 rules         │
│ Active:42│ CON: 6 rules         │
│ Coverage:│ ESS: 5 rules         │
│   93%   │ ...                   │
└─────────┴───────────────────────┘
```

## Test Scenarios

1. **Initial Load**
   - Dashboard loads with cached data
   - Shows last analysis timestamp
   - Refresh button visible

2. **New Analysis**
   - Click refresh
   - Loading indicator shown
   - New data displayed
   - Cache updated

3. **Service Error**
   - Service unavailable
   - Error message shown
   - Previous data still visible
   - Retry option available

## Definition of Done

- [ ] Dashboard component implemented
- [ ] All metrics calculated correctly
- [ ] Caching working properly
- [ ] Error handling comprehensive
- [ ] UI responsive and clear
- [ ] Documentation updated