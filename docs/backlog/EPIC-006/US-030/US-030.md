---
id: US-030
epic: EPIC-006
titel: Logging‑redactie (PII masking) en retentiebeleid
status: Nog te bepalen
prioriteit: HOOG
story_points: 3
sprint: sprint-37
owner: security-engineer
applies_to: definitie-app@current
canonical: false
last_verified: 2025-09-12
vereisten:
  - REQ-045
  - REQ-006
links:
  - docs/backlog/DEEP_DIVE_IMPROVEMENT_PLAN.md#security--privacy-req006-owasp
---

# US-030: Logging‑redactie (PII masking) en retentiebeleid

## Gebruikersverhaal
Als privacy officer wil ik dat logs geen PII bevatten en volgens een retentiebeleid worden beheerd, zodat privacywetgeving en interne policies worden nageleefd.

## Acceptatiecriteria (SMART)
- Specifiek: Logging‑filter/formatter die PII en secrets maskeert; retentieconfig (30/90 dagen) toepasbaar per omgeving.
- Meetbaar: 0 PII‑hits in gesynthetiseerde testlogs; logrotate/cleanup scripts aanwezig; documentatie van beleid.
- Acceptabel: integreer in bestaand loggingconfig (config_manager.logging/module levels).
- Relevant: REQ‑045.
- Tijdgebonden: sprint‑37.

## Implementatienotities
- Implementatie van `PIIRedactingFilter` + masker voor API keys (laatste 4 chars zichtbaar).
- Config via `config_manager` met per‑env retention.

## Testplan
- Unit: filter maskeert BSN/e‑mail/telefoon/API keys.
- Integration: produceer logs met voorbeeld PII; assert gemaskeerde output.

## Definition of Done
- Filter actief in alle entrypoints; documentatie retentie in README/SECURITY sectie.

