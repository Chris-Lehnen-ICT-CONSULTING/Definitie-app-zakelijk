---
aangemaakt: '08-09-2025'
bijgewerkt: '08-09-2025'
id: REQ-040
links:
  docs:
  - docs/technisch/web_lookup_config.md
  epics:
  - EPIC-003
  stories:
  - US-016
prioriteit: GEMIDDELD
sources:
- line: 200-300
  path: src/services/modern_web_lookup_service.py
- line: 30-50
  path: config/web_lookup_defaults.yaml
status: In Progress
titel: SRU (Search/Retrieve via URL) Integration
type: functional
---



# Requirement REQ-040: SRU (Search/Retrieve via URL) Integration

## Beschrijving
Het systeem moet SRU protocol gebruiken voor het doorzoeken van juridische databases en bibliotheken zoals de Koninklijke Bibliotheek.

Gerelateerd: US-016 (SRU Legal Database Integratie)

## Rationale
SRU biedt toegang tot autoritatieve juridische bronnen en officiële publicaties die essentieel zijn voor het onderbouwen van juridische definities.

## Acceptatiecriteria (SMART)
- SRU 2.0 protocol implementatie
- Query translation van natuurlijke taal naar CQL
- Response parsing (XML/Dublin Core)
- Timeout hEnling (10 seconden max)
- Result relevance scoring


### SMART Acceptatiecriteria

- **Specifiek:** Implementeer SRU 2.0 protocol voor juridische database toegang
- **Meetbaar:**
  - Query response: < 3 seconden (95e percentiel)
  - Success rate: > 80% voor KB queries
  - Min 5 resultaten per succesvolle query
  - XML parsing: < 100ms
  - Relevance score: 0.0-1.0 schaal
  - Timeout: 10 seconden hard limit
- **Acceptabel:** Python SRU client library met async support
- **Relevant:** Toegang tot officiële juridische bronnen
- **Tijdgebonden:** MVP in Sprint 3, volledig in Sprint 4


## BDD Test Scenario's

```gherkin
Scenario: SRU query naar Koninklijke Bibliotheek
  Gegeven de KB SRU endpoint is beschikbaar
  En de zoekterm is "wetboek van strafrecht"
  Wanneer een SRU search wordt uitgevoerd
  Dan wordt CQL query gebouwd: "title=wetboek AND title=strafrecht"
  En wordt de query naar KB gestuurd
  En komt response binnen 3 seconden
  En bevat minimaal 5 resultaten
  En heeft elk resultaat titel, auteur, en jaar

Scenario: SRU timeout handling
  Gegeven een trage SRU server
  Wanneer de response > 10 seconden duurt
  Dan wordt de request gecancelled
  En wordt een timeout error gelogd
  En valt het systeem terug op andere bronnen
  En krijgt gebruiker melding "KB tijdelijk onbereikbaar"

Scenario: Dublin Core metadata parsing
  Gegeven een SRU response in XML formaat
  Wanneer de response wordt geparseerd
  Dan worden Dublin Core velden geëxtraheerd:
    | Veld | Mapping |
    | dc:title | titel |
    | dc:creator | auteur |
    | dc:date | publicatiejaar |
    | dc:subject | onderwerp |
    | dc:identifier | isbn/issn |
  En worden speciale karakters correct gedecodeerd
  En wordt de relevance score berekend

Scenario: Multi-source aggregatie met SRU
  Gegeven SRU resultaten van KB
  En Wikipedia resultaten
  Wanneer resultaten worden geaggregeerd
  Dan krijgt SRU weight factor 1.0
  En krijgt Wikipedia factor 0.7
  En worden duplicaten gedetecteerd op titel
  En is de finale ranking op gewogen score
```

## Uitwerking / Notities
SRU endpoints:
- KB (Koninklijke Bibliotheek): https://jsru.kb.nl/sru
- Officiële bekendmakingen: https://zoek.officielebekendmakingen.nl/sru
- Parlementaire documenten: via KB gateway
- Weight factor 1.0 in aggregation (hoogste prioriteit)
- CQL (Contextual Query Language) voor complexe queries
- Batch queries mogelijk voor performance

## Conflicten (indien van toepassing)
Geen conflicten geïdentificeerd.


### Compliance Referenties

- **ASTRA Controls:**
  - ASTRA-QUA-001: Kwaliteitsborging
  - ASTRA-SEC-002: Beveiliging by Design
- **NORA Principes:**
  - NORA-BP-07: Herbruikbaarheid
  - NORA-BP-12: Betrouwbaarheid
- **GEMMA Referenties:**
  - GEMMA-ARC-03: Architectuur patterns
- **Justice Sector:**
  - DJI/OM integratie vereisten
  - Rechtspraak compatibiliteit
