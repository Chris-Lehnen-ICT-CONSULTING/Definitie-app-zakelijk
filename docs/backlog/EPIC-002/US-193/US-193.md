---
id: US-193
status: TE_DOEN
prioriteit: HOOG
owner: ui
canonical: true
sprint: next
story_points: 5
last_verified: 16-09-2025
---

# US-193 — UI toont V2‑validatie (alle toetsregels) i.p.v. legacy validator

Doel
- De UI toont uitsluitend de resultaten van de V2‑validator (ValidationOrchestratorV2/ModularValidationService), inclusief alle toetsregels uit de JSON‑set, en geen resultaten of ruis van de legacy/modulaire validator.

Scope
- UI (validatiepaneel in tabbed interface en eventuele detailvensters) gebruikt één bron: V2‑validatieresultaat uit orchestrator/validator.
- Toon violations met code/severity/description/suggestion; sorteervolgorde deterministisch.
- Toon aanvullende metadata bij specifieke regels (bv. CON‑01 duplicate: link/ID naar bestaande definitie in DB).

Niet in scope
- Promptcategorie‑propagatie (valt onder EPIC‑010/US‑179).
- ESS‑02 presence/consistency herontwerp (valt onder EPIC‑002/US‑191).
- V2 JSON‑regeldekking (valt onder EPIC‑002/US‑192).

Oplossing (functioneel)
- UI gebruikt het canonieke V2‑resultaat (ValidationDetailsDict) met:
  - overall_score (0.0–1.0)
  - is_acceptable (bool)
  - violations: [{rule_id, severity, description, suggestion?}]
  - passed_rules: [rule_id]
- Legacy paden verwijderen uit UI (geen `ai_toetser/modular_toetser`, geen `toetsregels/modular_loader`).
- Duidelijke mapping naar UI‑stijlen: high=rood, medium=oranje, low=geel; passed in groen.
- (Optioneel) Expand/collapse details per violation, met eventuele metadata (bijv. duplicate definitie ID klikbaar naar beheerpagina).

Technisch (voorstel)
1) Data‑bron
   - Gebruik `response.validation_result` van DefinitionOrchestratorV2 of roep `validation_orchestrator.validate_text(...)`.
2) Rendering
   - Component in UI/validatiepaneel die V2‑dict rendert; geen legacy objectvorm.
   - Sorteer violations op code (determinisme) en severity.
3) Verwijder legacy integratie
   - Verwijder imports/aanroepen `ai_toetser.modular_toetser` en `toetsregels.modular_loader` uit UI code.
4) Telemetrie (optioneel)
   - Toon aantal regels toegepast, aantal passed, aantal violations.

Acceptatiecriteria
- AC1: UI toont alleen V2‑validatieresultaat (één bron), geen dubbele meldingen uit legacy pad.
- AC2: Violations bevatten code/severity/description en (indien aanwezig) suggestion/metadata; deterministische sortering.
- AC3: CON‑01 duplicate toont een duidelijke melding met bestaande definitie ID/naam/links (indien aanwezig in metadata).
- AC4: Geen “Kon Python module niet laden …” warnings in logs na UI‑flow.
- AC5: Performance: UI‑rendering van validatie blijft < 50ms per render (excl. network/db werk).

Testplan
- Unit: rendercomponenten voor verschillende severities en met/zonder suggestions/metadata.
- Integratie: orchestrator flow levert V2‑resultaat, UI toont juiste tellingen/kleuren/volgorde.
- Logsanity: geen legacy validator warnings in testlogs.
