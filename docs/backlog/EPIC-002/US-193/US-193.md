---
id: US-193
titel: "US-193: - De UI toont uitsluitend de resultaten van de V2â€‘validator (ValidationOrchestratorV2/ModularValidationService), incl..."
status: completed
prioriteit: HOOG
story_points: 5
sprint: next
owner: ui
applies_to: definitie-app@current
canonical: false
last_verified: 18-09-2025
completed_at: 2025-09-18
---

# US-193 â€” UI toont V2â€‘validatie (alle toetsregels) i.p.v. legacy validator

Doel
- De UI toont uitsluitend de resultaten van de V2â€‘validator (ValidationOrchestratorV2/ModularValidationService), inclusief alle toetsregels uit de JSONâ€‘set, en geen resultaten of ruis van de legacy/modulaire validator.

Scope
- UI (validatiepaneel in tabbed interface en eventuele detailvensters) gebruikt Ã©Ã©n bron: V2â€‘validatieresultaat uit orchestrator/validator.
- Toon violations met code/severity/description/suggestion; sorteervolgorde deterministisch.
- Toon aanvullende metadata bij specifieke regels (bv. CONâ€‘01 duplicate: link/ID naar bestaande definitie in DB).

Niet in scope
- Promptcategorieâ€‘propagatie (valt onder EPICâ€‘010/USâ€‘179).
- ESSâ€‘02 presence/consistency herontwerp (valt onder EPICâ€‘002/USâ€‘191).
- V2 JSONâ€‘regeldekking (valt onder EPICâ€‘002/USâ€‘192).

Oplossing (functioneel)
- UI gebruikt het canonieke V2â€‘resultaat (ValidationDetailsDict) met:
  - overall_score (0.0â€“1.0)
  - is_acceptable (bool)
  - violations: [{rule_id, severity, description, suggestion?}]
  - passed_rules: [rule_id]
- Legacy paden verwijderen uit UI (geen `ai_toetser/modular_toetser`, geen `toetsregels/modular_loader`).
- Duidelijke mapping naar UIâ€‘stijlen: high=rood, medium=oranje, low=geel; passed in groen.
- (Optioneel) Expand/collapse details per violation, met eventuele metadata (bijv. duplicate definitie ID klikbaar naar beheerpagina).

Technisch (voorstel)
1) Dataâ€‘bron
   - Gebruik `response.validation_result` van DefinitionOrchestratorV2 of roep `validation_orchestrator.validate_text(...)`.
2) Rendering
   - Component in UI/validatiepaneel die V2â€‘dict rendert; geen legacy objectvorm.
   - Sorteer violations op code (determinisme) en severity.
3) Verwijder legacy integratie
   - Verwijder imports/aanroepen `ai_toetser.modular_toetser` en `toetsregels.modular_loader` uit UI code.
4) Telemetrie (optioneel)
   - Toon aantal regels toegepast, aantal passed, aantal violations.

Acceptatiecriteria
- AC1: UI toont alleen V2â€‘validatieresultaat (Ã©Ã©n bron), geen dubbele meldingen uit legacy pad.
- AC2: Violations bevatten code/severity/description en (indien aanwezig) suggestion/metadata; deterministische sortering.
- AC3: CONâ€‘01 duplicate toont een duidelijke melding met bestaande definitie ID/naam/links (indien aanwezig in metadata).
- AC4: Geen â€œKon Python module niet laden â€¦â€ warnings in logs na UIâ€‘flow.
- AC5: Performance: UIâ€‘rendering van validatie blijft < 50ms per render (excl. network/db werk).

Testplan
- Unit: rendercomponenten voor verschillende severities en met/zonder suggestions/metadata.
- Integratie: orchestrator flow levert V2â€‘resultaat, UI toont juiste tellingen/kleuren/volgorde.
- Logsanity: geen legacy validator warnings in testlogs.

## Voortgang
- **VOLTOOID (2025-09-18):**
  - UI-detailpaneel bouwt "ğŸ“‹ Alle Toetsregels Resultaten" nu af uit V2â€‘resultaat (geen legacy validator nodig voor deze weergave).
  - V2â€‘violations bevatten nu ook `description` (mirror van `message`) zodat UI consistent tekst toont.
  - Tests toegevoegd voor descriptionâ€‘veld en initiÃ«le goldens (INTâ€‘01/CONâ€‘01).
  - Legacy aanroep in `tabbed_interface.py` volledig verwijderd (regels 1006-1047).
  - Alle legacy validator imports uit UI verwijderd:
    - `ai_toetser.modular_toetser` verwijderd uit tabbed_interface.py
    - `toetsregels.modular_loader` verwijderd uit tabbed_interface.py
    - `toetsregels.loader` verwijderd uit management_tab.py
    - `validation.definitie_validator` verwijderd uit management_tab.py
    - Legacy analyse tools vervangen door V2 service in quality_control_tab.py
  - V2 ValidationDetailsDict is nu de enige bron voor validatieresultaten in de UI.
  - Deterministische sortering geÃ¯mplementeerd (severity dan rule_id).
  - Alle acceptatiecriteria zijn vervuld.
