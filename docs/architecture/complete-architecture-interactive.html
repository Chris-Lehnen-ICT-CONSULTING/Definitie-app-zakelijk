<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DefinitieAgent - Complete Architectuur Overzicht</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1, h2, h3 {
            color: #2c3e50;
        }
        
        .header {
            background-color: #34495e;
            color: white;
            padding: 30px 0;
            margin-bottom: 40px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: white;
            margin: 0;
            text-align: center;
        }
        
        .tabs {
            display: flex;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background-color: #ecf0f1;
            border: none;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }
        
        .tab:hover {
            background-color: #bdc3c7;
        }
        
        .tab.active {
            background-color: #3498db;
            color: white;
        }
        
        .content {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .diagram-container {
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        .mermaid {
            text-align: center;
        }
        
        .legend {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .legend-item {
            display: inline-block;
            margin: 5px 15px;
        }
        
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            vertical-align: middle;
            border-radius: 3px;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .metric-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .metric-value {
            font-size: 36px;
            font-weight: bold;
            color: #3498db;
            margin: 10px 0;
        }
        
        .transformation-steps {
            margin: 30px 0;
        }
        
        .step {
            background-color: #f8f9fa;
            padding: 20px;
            margin: 10px 0;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        
        .step h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .complexity-matrix {
            overflow-x: auto;
            margin: 30px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #34495e;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .risk-high { color: #e74c3c; font-weight: bold; }
        .risk-medium { color: #f39c12; font-weight: bold; }
        .risk-low { color: #27ae60; font-weight: bold; }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .content {
                padding: 20px;
            }
            
            .metrics {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>DefinitieAgent - Complete Architectuur Overzicht</h1>
        </div>
    </div>
    
    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="showTab('current')">AS-IS Architectuur</button>
            <button class="tab" onclick="showTab('future')">TO-BE Architectuur</button>
            <button class="tab" onclick="showTab('transformation')">Transformatie Pad</button>
            <button class="tab" onclick="showTab('metrics')">Metrics & Risico's</button>
        </div>
        
        <div id="current" class="content">
            <h2>AS-IS Architectuur (Huidige Situatie)</h2>
            <p>De huidige architectuur kent significante uitdagingen die de verdere ontwikkeling belemmeren.</p>
            
            <div class="metrics">
                <div class="metric-card">
                    <h4>UI Functionaliteit</h4>
                    <div class="metric-value">30%</div>
                    <p>Slechts 3 van 10 tabs werkend</p>
                </div>
                <div class="metric-card">
                    <h4>Test Coverage</h4>
                    <div class="metric-value">13%</div>
                    <p>87% tests broken</p>
                </div>
                <div class="metric-card">
                    <h4>Response Tijd</h4>
                    <div class="metric-value">8-12s</div>
                    <p>Ver boven target</p>
                </div>
                <div class="metric-card">
                    <h4>Technische Schuld</h4>
                    <div class="metric-value">Hoog</div>
                    <p>God Object, 5 broken web lookups</p>
                </div>
            </div>
            
            <div class="diagram-container">
                <div class="mermaid" id="as-is-diagram">
graph TB
    subgraph "Frontend Layer - Streamlit UI"
        UI[Streamlit App<br/>10 Tabs - 30% Functional]
        T1[‚úÖ Definitie Gen]
        T2[‚úÖ Geschiedenis]
        T3[‚úÖ Export Basic]
        T4[‚ö†Ô∏è Kwaliteitscontrole]
        T5[‚ùå Prompt Viewer]
        T6[‚ùå Aangepaste Def]
        T7[‚ùå Developer Tools]
        T8[‚ùå Expert Review]
        T9[‚ùå Externe Bronnen]
        T10[‚ùå Orchestratie]
        
        UI --> T1
        UI --> T2
        UI --> T3
        UI --> T4
        UI --> T5
        UI --> T6
        UI --> T7
        UI --> T8
        UI --> T9
        UI --> T10
    end
    
    subgraph "Service Layer - GOD OBJECT"
        UDS[UnifiedDefinitionService<br/>üî¥ 1000+ lines<br/>Singleton Pattern]
        
        subgraph "Mixed Responsibilities"
            GEN[Generation Logic]
            VAL[Validation Orchestration]
            CACHE[Cache Management]
            LEGACY[Legacy Compatibility]
            PROMPT[Prompt Building]
            RATE[Rate Limiting]
            ERROR[Error Handling]
        end
        
        UDS --> GEN
        UDS --> VAL
        UDS --> CACHE
        UDS --> LEGACY
        UDS --> PROMPT
        UDS --> RATE
        UDS --> ERROR
    end
    
    subgraph "AI & Validation Layer"
        AI[OpenAI GPT-4<br/>8-12 sec response]
        TOETS[46 Toetsregels<br/>‚úÖ Working]
        
        subgraph "Content Services üî¥ BROKEN"
            WEB1[definitie_lookup_broken.py]
            WEB2[definitie_lookup_encoding.py]
            WEB3[bron_lookup_encoding.py]
            WEB4[legacy_lookup_v1.py]
            WEB5[legacy_lookup_v2.py]
            ENRICH[‚ùå Synoniemen<br/>‚ùå Antoniemen<br/>‚ùå Voorbeelden]
        end
    end
    
    subgraph "Data Layer"
        DB[(SQLite DB<br/>‚ö†Ô∏è Locking Issues)]
        REPO[Repository Pattern<br/>‚úÖ Modern]
        SESSION[Session State<br/>‚ö†Ô∏è Inconsistent]
        
        subgraph "Direct DB Access üî¥"
            UI_DB[UI ‚Üí DB Direct]
            TAB_DB[Tabs ‚Üí DB Direct]
        end
    end
    
    subgraph "Infrastructure & Config"
        subgraph "Config Chaos üî¥"
            C1[.env Config]
            C2[config.py]
            C3[settings.json]
            C4[hardcoded values]
        end
        
        subgraph "Import Chaos üî¥"
            I1[Relative imports ...]
            I2[Absolute imports]
            I3[sys.path hacks]
        end
        
        TEST[Test Suite<br/>üî¥ 87% Broken]
    end
    
    %% Connections AS-IS
    T1 --> UDS
    T2 --> UDS
    T3 --> UDS
    T4 --> UDS
    
    %% Direct DB violations
    T2 -.-> DB
    T3 -.-> DB
    
    UDS --> AI
    UDS --> TOETS
    UDS --> DB
    UDS --> REPO
    UDS --> SESSION
    
    GEN --> AI
    VAL --> TOETS
    
    %% Broken connections
    UDS -.-> WEB1
    UDS -.-> WEB2
    UDS -.-> ENRICH
    
    %% Config connections
    UDS --> C1
    UDS --> C2
    UI --> C3
    
    classDef broken fill:#ff6b6b,stroke:#c92a2a,color:#fff
    classDef working fill:#51cf66,stroke:#2b8a3e,color:#fff
    classDef partial fill:#ffd43b,stroke:#fab005,color:#000
    classDef godObject fill:#ff8787,stroke:#fa5252,color:#fff,stroke-width:4px
    
    class WEB1,WEB2,WEB3,WEB4,WEB5,ENRICH,T5,T6,T7,T8,T9,T10,TEST,UI_DB,TAB_DB,I1,I2,I3 broken
    class T1,T2,T3,TOETS,REPO working
    class T4,DB,SESSION,UI partial
    class UDS godObject
                </div>
            </div>
            
            <div class="legend">
                <h4>Legenda:</h4>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #51cf66;"></span>
                    Werkend
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #ffd43b;"></span>
                    Gedeeltelijk werkend
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #ff6b6b;"></span>
                    Broken
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #ff8787; border: 3px solid #fa5252;"></span>
                    God Object
                </div>
            </div>
        </div>
        
        <div id="future" class="content" style="display: none;">
            <h2>TO-BE Architectuur (Gewenste Situatie)</h2>
            <p>Een moderne, schaalbare architectuur met clean separation of concerns en volledige functionaliteit.</p>
            
            <div class="metrics">
                <div class="metric-card">
                    <h4>UI Functionaliteit</h4>
                    <div class="metric-value">100%</div>
                    <p>Alle 10 tabs volledig werkend</p>
                </div>
                <div class="metric-card">
                    <h4>Test Coverage</h4>
                    <div class="metric-value">60%+</div>
                    <p>Betrouwbare test suite</p>
                </div>
                <div class="metric-card">
                    <h4>Response Tijd</h4>
                    <div class="metric-value">&lt;5s</div>
                    <p>60% verbetering</p>
                </div>
                <div class="metric-card">
                    <h4>API Kosten</h4>
                    <div class="metric-value">-70%</div>
                    <p>Prompt optimalisatie</p>
                </div>
            </div>
            
            <div class="diagram-container">
                <div class="mermaid" id="to-be-diagram">
graph TB
    subgraph "Frontend Layer - Complete UI"
        UI_NEW[Streamlit App<br/>‚úÖ 100% Functional]
        subgraph "Active Tabs"
            NT1[‚úÖ Definitie Generatie]
            NT2[‚úÖ Geschiedenis]
            NT3[‚úÖ Export Advanced]
            NT4[‚úÖ Kwaliteitscontrole]
            NT5[‚úÖ Prompt Viewer]
            NT6[‚úÖ Aangepaste Definitie]
            NT7[‚úÖ Developer Tools]
            NT8[‚úÖ Expert Review]
            NT9[‚úÖ Externe Bronnen]
            NT10[‚úÖ Orchestratie]
        end
        
        COMP[Component Library<br/>Reusable UI Parts]
        STATE[Centralized State<br/>Management]
    end
    
    subgraph "Service Layer - Clean Architecture"
        FACADE[DefinitionFacade<br/>API Gateway]
        
        subgraph "Focused Services"
            S1[DefinitionGenerator<br/>Core AI Logic]
            S2[ValidationOrchestrator<br/>46 Rules Engine]
            S3[ContentEnrichmentService<br/>Synoniemen/Antoniemen]
            S4[PromptOptimizer<br/>&lt;10k chars]
            S5[CacheManager<br/>Redis/Memory]
            S6[WebLookupService<br/>‚úÖ UTF-8 Fixed]
        end
        
        subgraph "Cross-Cutting"
            AUTH[AuthenticationService<br/>User Management]
            MONITOR[MonitoringService<br/>Metrics & Logs]
            RATELIMIT[RateLimiter<br/>Smart Throttling]
        end
    end
    
    subgraph "AI & External Services"
        AI_OPT[OpenAI GPT-4<br/>&lt;5 sec response]
        REDIS[Redis Cache<br/>80% hit rate]
        
        subgraph "External APIs"
            EXT1[wetten.nl API]
            EXT2[rechtspraak.nl API]
            EXT3[officielebekendmakingen.nl]
        end
    end
    
    subgraph "Data Layer - Clean Access"
        subgraph "Database"
            PG[(PostgreSQL<br/>Production)]
            SQLITE[(SQLite<br/>Development)]
        end
        
        subgraph "Data Access"
            REPO_NEW[Repository Layer<br/>No Direct Access]
            MAPPER[Data Mappers]
            MIGRATE[Migration System]
        end
        
        CACHE_LAYER[Cache Layer<br/>Query Cache]
    end
    
    subgraph "Infrastructure - Unified"
        CONFIG[Unified Config<br/>Single Source]
        
        subgraph "Quality Assurance"
            TESTS[Test Suite<br/>‚úÖ 60% Coverage]
            CI[CI/CD Pipeline<br/>Automated]
            LINT[Code Quality<br/>Black/Ruff/MyPy]
        end
        
        subgraph "Monitoring"
            LOG[Structured Logging]
            METRIC[Metrics Collection]
            ALERT[Alert System]
        end
        
        DEPLOY[Deployment<br/>Docker/Cloud Ready]
    end
    
    %% Connections TO-BE
    UI_NEW --> STATE
    STATE --> COMP
    
    NT1 --> FACADE
    NT2 --> FACADE
    NT3 --> FACADE
    NT4 --> FACADE
    NT5 --> FACADE
    NT6 --> FACADE
    NT7 --> FACADE
    NT8 --> FACADE
    NT9 --> FACADE
    NT10 --> FACADE
    
    FACADE --> S1
    FACADE --> S2
    FACADE --> S3
    FACADE --> S4
    FACADE --> S5
    FACADE --> S6
    
    FACADE --> AUTH
    FACADE --> MONITOR
    FACADE --> RATELIMIT
    
    S1 --> AI_OPT
    S1 --> S4
    S2 --> MONITOR
    S3 --> AI_OPT
    S5 --> REDIS
    S6 --> EXT1
    S6 --> EXT2
    S6 --> EXT3
    
    S1 --> REPO_NEW
    S2 --> REPO_NEW
    S3 --> REPO_NEW
    S6 --> REPO_NEW
    
    REPO_NEW --> MAPPER
    MAPPER --> PG
    MAPPER --> SQLITE
    REPO_NEW --> CACHE_LAYER
    CACHE_LAYER --> REDIS
    
    AUTH --> REPO_NEW
    MONITOR --> LOG
    MONITOR --> METRIC
    METRIC --> ALERT
    
    FACADE --> CONFIG
    S1 --> CONFIG
    S2 --> CONFIG
    
    CI --> TESTS
    CI --> LINT
    CI --> DEPLOY
    
    classDef working fill:#51cf66,stroke:#2b8a3e,color:#fff
    classDef new fill:#74c0fc,stroke:#339af0,color:#fff
    classDef improved fill:#63e6be,stroke:#20c997,color:#fff
    
    class NT1,NT2,NT3,NT4,NT5,NT6,NT7,NT8,NT9,NT10,TESTS working
    class S1,S2,S3,S4,S5,S6,AUTH,MONITOR,RATELIMIT,FACADE new
    class AI_OPT,REDIS,CONFIG,CI,DEPLOY improved
                </div>
            </div>
            
            <h3>Key Verbeteringen</h3>
            <div class="transformation-steps">
                <div class="step">
                    <h4>üèóÔ∏è Service Architecture</h4>
                    <p>Van √©√©n God Object naar 6 focused services met duidelijke verantwoordelijkheden en clean interfaces.</p>
                </div>
                <div class="step">
                    <h4>üéØ Complete UI</h4>
                    <p>Van 30% naar 100% functionele tabs met een herbruikbare component library.</p>
                </div>
                <div class="step">
                    <h4>‚ö° Performance</h4>
                    <p>Response tijd van 8-12s naar &lt;5s, prompt size van 35k naar &lt;10k karakters.</p>
                </div>
                <div class="step">
                    <h4>üîí Security & Quality</h4>
                    <p>Authentication, monitoring, 60% test coverage, en automated deployment pipeline.</p>
                </div>
            </div>
        </div>
        
        <div id="transformation" class="content" style="display: none;">
            <h2>Transformatie Pad (AS-IS ‚Üí TO-BE)</h2>
            <p>Een gefaseerde aanpak om risico's te minimaliseren en incrementele waarde te leveren.</p>
            
            <div class="diagram-container">
                <div class="mermaid" id="transformation-diagram">
graph LR
    subgraph "Phase 1: Foundation"
        A1[Fix Import Paths] --> A2[Fix Widget Keys]
        A2 --> A3[Enable WAL Mode]
        A3 --> A4[Basic Auth]
    end
    
    subgraph "Phase 2: Service Split"
        B1[Extract PromptOptimizer] --> B2[Extract CacheManager]
        B2 --> B3[Extract ValidationOrchestrator]
        B3 --> B4[Create Facade Pattern]
        B4 --> B5[Remove God Object]
    end
    
    subgraph "Phase 3: Feature Restoration"
        C1[Fix Web Lookup] --> C2[Content Enrichment]
        C2 --> C3[Activate All Tabs]
        C3 --> C4[Component Library]
    end
    
    subgraph "Phase 4: Quality & Performance"
        D1[Repair Tests] --> D2[Add Monitoring]
        D2 --> D3[Optimize Prompts]
        D3 --> D4[Add Caching]
        D4 --> D5[CI/CD Setup]
    end
    
    A4 --> B1
    B5 --> C1
    C4 --> D1
    
    classDef phase1 fill:#ff6b6b,stroke:#c92a2a,color:#fff
    classDef phase2 fill:#ffd43b,stroke:#fab005,color:#000
    classDef phase3 fill:#51cf66,stroke:#2b8a3e,color:#fff
    classDef phase4 fill:#74c0fc,stroke:#339af0,color:#fff
    
    class A1,A2,A3,A4 phase1
    class B1,B2,B3,B4,B5 phase2
    class C1,C2,C3,C4 phase3
    class D1,D2,D3,D4,D5 phase4
                </div>
            </div>
            
            <h3>Transformatie Timeline</h3>
            <div class="transformation-steps">
                <div class="step" style="border-left-color: #ff6b6b;">
                    <h4>Phase 1: Foundation (Sprint 0-1)</h4>
                    <p><strong>Focus:</strong> Technische blokkades wegnemen</p>
                    <ul>
                        <li>Import paths standaardiseren</li>
                        <li>Widget key generator fixen</li>
                        <li>Database concurrent access enablen</li>
                        <li>Basis authenticatie toevoegen</li>
                    </ul>
                </div>
                
                <div class="step" style="border-left-color: #ffd43b;">
                    <h4>Phase 2: Service Split (Sprint 2-3)</h4>
                    <p><strong>Focus:</strong> God Object refactoren</p>
                    <ul>
                        <li>Services √©√©n voor √©√©n extraheren</li>
                        <li>Facade pattern implementeren</li>
                        <li>Legacy compatibility behouden</li>
                        <li>Service tests toevoegen</li>
                    </ul>
                </div>
                
                <div class="step" style="border-left-color: #51cf66;">
                    <h4>Phase 3: Feature Restoration (Sprint 4-5)</h4>
                    <p><strong>Focus:</strong> Alle features activeren</p>
                    <ul>
                        <li>Web lookup consolideren en fixen</li>
                        <li>Content enrichment implementeren</li>
                        <li>Alle UI tabs activeren</li>
                        <li>Component library bouwen</li>
                    </ul>
                </div>
                
                <div class="step" style="border-left-color: #74c0fc;">
                    <h4>Phase 4: Quality & Performance (Sprint 6-7)</h4>
                    <p><strong>Focus:</strong> Productie-ready maken</p>
                    <ul>
                        <li>Test suite repareren (60% coverage)</li>
                        <li>Monitoring implementeren</li>
                        <li>Prompts optimaliseren (70% reductie)</li>
                        <li>CI/CD pipeline opzetten</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div id="metrics" class="content" style="display: none;">
            <h2>Metrics & Risico Analyse</h2>
            
            <h3>Verwachte Verbeteringen</h3>
            <div class="metrics">
                <div class="metric-card">
                    <h4>Development Velocity</h4>
                    <div class="metric-value">+200%</div>
                    <p>Door clean architecture</p>
                </div>
                <div class="metric-card">
                    <h4>Bug Rate</h4>
                    <div class="metric-value">-75%</div>
                    <p>Door betere tests</p>
                </div>
                <div class="metric-card">
                    <h4>API Kosten</h4>
                    <div class="metric-value">-70%</div>
                    <p>Door prompt optimalisatie</p>
                </div>
                <div class="metric-card">
                    <h4>User Satisfaction</h4>
                    <div class="metric-value">+90%</div>
                    <p>Alle features beschikbaar</p>
                </div>
            </div>
            
            <h3>Migration Complexity Matrix</h3>
            <div class="complexity-matrix">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Complexity</th>
                            <th>Risk</th>
                            <th>Priority</th>
                            <th>Sprint</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Import Path Fixes</td>
                            <td>Low</td>
                            <td class="risk-low">Low</td>
                            <td>Critical</td>
                            <td>Sprint 0</td>
                        </tr>
                        <tr>
                            <td>Widget Key Generator</td>
                            <td>Low</td>
                            <td class="risk-low">Low</td>
                            <td>High</td>
                            <td>Sprint 0</td>
                        </tr>
                        <tr>
                            <td>Service Layer Split</td>
                            <td>High</td>
                            <td class="risk-medium">Medium</td>
                            <td>Critical</td>
                            <td>Sprint 2</td>
                        </tr>
                        <tr>
                            <td>Web Lookup Fix</td>
                            <td>Medium</td>
                            <td class="risk-high">High</td>
                            <td>High</td>
                            <td>Sprint 3</td>
                        </tr>
                        <tr>
                            <td>UI Tab Activation</td>
                            <td>Medium</td>
                            <td class="risk-low">Low</td>
                            <td>High</td>
                            <td>Sprint 4-5</td>
                        </tr>
                        <tr>
                            <td>Test Suite Repair</td>
                            <td>High</td>
                            <td class="risk-low">Low</td>
                            <td>Medium</td>
                            <td>Sprint 5-6</td>
                        </tr>
                        <tr>
                            <td>Performance Optimization</td>
                            <td>Medium</td>
                            <td class="risk-medium">Medium</td>
                            <td>Medium</td>
                            <td>Sprint 5</td>
                        </tr>
                        <tr>
                            <td>Monitoring Setup</td>
                            <td>Low</td>
                            <td class="risk-low">Low</td>
                            <td>Low</td>
                            <td>Sprint 6</td>
                        </tr>
                        <tr>
                            <td>PostgreSQL Migration</td>
                            <td>Medium</td>
                            <td class="risk-medium">Medium</td>
                            <td>Future</td>
                            <td>Post-MVP</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <h3>Top 5 Risico's</h3>
            <div class="transformation-steps">
                <div class="step" style="border-left-color: #e74c3c;">
                    <h4>1. UnifiedDefinitionService Complexiteit</h4>
                    <p><strong>Impact:</strong> Nieuwe features 3x langzamer</p>
                    <p><strong>Mitigatie:</strong> Incrementele extractie met facade pattern voor backward compatibility</p>
                </div>
                
                <div class="step" style="border-left-color: #e74c3c;">
                    <h4>2. Broken Test Suite</h4>
                    <p><strong>Impact:</strong> Geen vertrouwen bij refactoring</p>
                    <p><strong>Mitigatie:</strong> Fix imports eerst, dan incrementeel tests repareren</p>
                </div>
                
                <div class="step" style="border-left-color: #f39c12;">
                    <h4>3. Ontbrekende Security</h4>
                    <p><strong>Impact:</strong> Kan niet naar productie</p>
                    <p><strong>Mitigatie:</strong> Basic auth in Sprint 1, uitbreiden in Sprint 3</p>
                </div>
                
                <div class="step" style="border-left-color: #f39c12;">
                    <h4>4. UI Incomplete</h4>
                    <p><strong>Impact:</strong> 70% features onbereikbaar</p>
                    <p><strong>Mitigatie:</strong> Prioriteer high-value tabs eerst</p>
                </div>
                
                <div class="step" style="border-left-color: #27ae60;">
                    <h4>5. Performance Bottlenecks</h4>
                    <p><strong>Impact:</strong> Slechte UX, hoge kosten</p>
                    <p><strong>Mitigatie:</strong> Quick win caching, dan prompt optimalisatie</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>DefinitieAgent Architecture Overview - Generated by Winston (Architect) - 2025</p>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryBorderColor: '#2980b9',
                primaryTextColor: '#fff',
                lineColor: '#5a6c7d',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#95a5a6'
            }
        });
        
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all content
            const contents = document.querySelectorAll('.content');
            contents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected content
            document.getElementById(tabName).style.display = 'block';
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Re-render Mermaid diagrams when tab is shown
            mermaid.init();
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.init();
        });
    </script>
</body>
</html>