<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EPIC-006: Security Baseline - Minimale safeguards voor single-user deployments</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">← Terug naar Portal</a>
    <p>---</p>
<p>id: EPIC-006</p>
<p>titel: "EPIC-006: Security Baseline - Minimale safeguards voor single-user deployments"</p>
<p>status: active</p>
<p>prioriteit: HOOG</p>
<p>aangemaakt: 01-01-2025</p>
<p>bijgewerkt: 05-09-2025</p>
<p>owner: product-development</p>
<p>applies_to: definitie-app@current</p>
<p>canonical: true</p>
<p>last_verified: 05-09-2025</p>
<p>vereisten:</p>
<ul>
<li> - REQ-044</li>
<li> - REQ-045</li>
<li> - REQ-047</li>
<li> - REQ-063</li>
<p>stories:</p>
<li> - US-140</li>
<li> - US-029</li>
<li> - US-030</li>
<li> - US-031</li>
<li> - US-032</li>
<p>astra_compliance: true</p>
<p>completion: 10%</p>
<p>target_release: v1.1</p>
<p>---</p>
</ul>



<h1>EPIC-006: Security Baseline</h1>

<h2>Managementsamenvatting</h2>

<p>Deze epic borgt de minimale beveiligingsmaatregelen die nodig zijn voor een single-user/single-developer setup. Focuspunten: direct falen bij ontbrekende of ongeldige API-sleutels, standaard HTTP-beveiligingsheaders, privacyvriendelijke logging en routinele dependency/secrets-scans. Zwaardere enterprise-controls (RBAC, SSO, uitgebreide audittrail) zijn naar het archief verplaatst.</p>

<h2>Bedrijfswaarde</h2>
<ul>
<li>**Snelle detectie van misconfiguraties**: gebruiker ziet meteen wat hij moet herstellen</li>
<li>**Privacybescherming**: gevoelige data komt niet in logs of exports terecht</li>
<li>**Beheersbare risico’s**: regressies in dependencies of lekken worden vroegtijdig gesignaleerd</li>
</ul>

<h2>Succesmetrieken</h2>
<ul>
<li>[ ] Startup blokkeert binnen 3s bij ongeldige API key (US-140)</li>
<li>[ ] Alle responses bevatten beveiligingsheaders (CSP, HSTS, X-Frame, X-Content) en request rate-limiting (US-029)</li>
<li>[ ] Logs tonen geen PII of secrets; retentie ≤ 30 dagen (US-030)</li>
<li>[ ] CI-pipeline draait dependency audit + secrets-scan op main en feature branches (US-031)</li>
<li>[ ] Encryptie-at-rest geconfigureerd of aantoonbaar niet nodig voor lokale opslag (US-032 – stretch)</li>
</ul>

<h2>Story-overzicht</h2>
<ul>
<li>**US-140 – API key validatie bij startup**  </li>
<p>  Minimalistische health-check met duidelijke foutmeldingen en optionele retry zonder herstart.</p>
<li>**US-029 – Security headers & rate limiting**  </li>
<p>  Streamlit/fastapi config uitbreiden met standaard headers, throttling en baseline tests.</p>
<li>**US-030 – Logging redactie & retentie**  </li>
<p>  Introduceer central logging helper die PII maskt en logretentie/rotatie afdwingt.</p>
<li>**US-031 – Secrets/dependency audits in CI**  </li>
<p>  Automatiseer <code>pip-audit</code>, <code>safety</code> en <code>detect-secrets</code> of alternatief script; rapportage in pipeline-artifacts.</p>
<li>**US-032 – Encryptie at rest (stretch)**  </li>
<p>  Onderzoek SQLite + dossierencryptie; markeer als optioneel wanneer opslag op vertrouwde laptop blijft.</p>
</ul>

<h2>Afbakening</h2>
<ul>
<li>Geen user management, RBAC of SSO (verplaatst naar `_archive/enterprise/`)</li>
<li>Audit trail en forensische logging vallen buiten dit baseline bereik</li>
<li>Geen hosting-specifieke hardening (infrastructurele maatregelen liggen bij toekomstige opschalingsstappen)</li>
</ul>

<h2>Deliverables</h2>
<ol>
<li>Checklist “Security Baseline” opgenomen in releaseproces</li>
<li>Tests/scripts voor headers, logging en scans toegevoegd aan `scripts/security/`</li>
<li>Documentatie in `docs/security-baseline.md` (nieuw) met configuratie-instructies voor lokale omgevingen</li>
</ol>
<ul>
<li>❌ Rate limiting</li>
<li>❌ Session management</li>
</ul>

<h3>Data beveiliging</h3>
<ul>
<li>✅ Encrypted API communication</li>
<li>⏳ Database encryption at rest</li>
<li>⏳ Backup encryption</li>
<li>❌ Field-level encryption for PII</li>
<li>❌ Data retention policies</li>
<li>❌ Secure deletion</li>
</ul>

<h3>Infrastructure beveiliging</h3>
<ul>
<li>✅ HTTPS only</li>
<li>⏳ beveiliging headers</li>
<li>⏳ Content beveiliging Policy</li>
<li>❌ Web Application Firewall</li>
<li>❌ DDoS protection</li>
<li>❌ Intrusion detection</li>
</ul>

<h2>Audit vereisten</h2>

<h3>Events to Log</h3>
<ul>
<li>User authenticatie (success/failure)</li>
<li>Definition CRUD operations</li>
<li>Validation executions</li>
<li>Export/Import operations</li>
<li>Configuration Wijzigingen</li>
<li>beveiliging events</li>
</ul>

<h3>Log Format</h3>
<pre><code>{
  "timestamp": "ISO 8601",
  "event_type": "string",
  "user_id": "uuid",
  "session_id": "uuid",
  "resource": "string",
  "action": "string",
  "result": "success|failure",
  "metadata": {}
}</code></pre>

<h2>Afhankelijkheden</h2>

<ul>
<li>Justice SSO system integration</li>
<li>Audit logging infrastructure</li>
<li>beveiliging scanning tools</li>
<li>Penetration testing resources</li>
</ul>

<h2>Risico's & Mitigaties</h2>

<p>| Risk | Impact | Mitigation |</p>
<p>|------|--------|------------|</p>
<p>| API Key Exposure | KRITIEK | Environment variables, key rotation |</p>
<p>| Data Breach | KRITIEK | Encryption, access controls |</p>
<p>| Insider Threat | HOOG | Audit logging, least privilege |</p>
<p>| Supply Chain | GEMIDDELD | Dependency scanning, vendoring |</p>

<h2>Compliance vereisten</h2>

<h3>AVG/GDPR</h3>
<ul>
<li>⏳ Privacy by design</li>
<li>⏳ Data minimization</li>
<li>❌ Right to erasure</li>
<li>❌ Data portability</li>
<li>❌ Consent management</li>
</ul>

<h3>justitiesector</h3>
<ul>
<li>❌ Justid integration</li>
<li>❌ Chain authorization</li>
<li>❌ beveiliging baseline justice</li>
<li>❌ Incident response plan</li>
</ul>

<h3>NORA/ASTRA</h3>
<ul>
<li>✅ Configuration management</li>
<li>⏳ beveiliging architecture</li>
<li>⏳ Identity management</li>
<li>❌ beveiliging monitoring</li>
</ul>

<h2>Definitie van Gereed</h2>

<ul>
<li>[ ] All API keys secured</li>
<li>[ ] Startup validation geïmplementeerd</li>
<li>[ ] SSO integration complete</li>
<li>[ ] Audit logging operational</li>
<li>[ ] beveiliging scan passed</li>
<li>[ ] Penetration test passed</li>
<li>[ ] Compliance review Goedgekeurd</li>
<li>[ ] Incident response plan ready</li>
</ul>

<h2>Wijzigingslog</h2>

<p>| Datum | Versie | Wijzigingen |</p>
<p>|------|---------|---------|</p>
<p>| 01-01-2025 | 1.0 | Episch Verhaal aangemaakt |</p>
<p>| 05-09-2025 | 1.x | Vertaald naar Nederlands met justitie context |</p>
<p>| 04-09-2025 | 1.1 | API keys secured |</p>
<p>| 05-09-2025 | 1.2 | Status: 40% complete |</p>

<h2>Gerelateerde Documentatie</h2>

<ul>
<li>beveiliging Architecture</li>
<li>Audit Logging Design</li>
<li>Justice SSO Integration</li>
</ul>

<h2>Stakeholder Goedkeuring</h2>

<ul>
<li>beveiliging Officer: ⏳ In progress</li>
<li>Privacy Officer: ❌ Not started</li>
<li>Compliance Officer: ❌ Not started</li>
<li>Operations Team: ⏳ In progress</li>
</ul>

<p>---</p>

<p><em>This epic is part of the DefinitieAgent project and folLAAGs ASTRA/NORA/BIR guidelines for justice domain systems.</em></p>

  </div>
</body>
</html>