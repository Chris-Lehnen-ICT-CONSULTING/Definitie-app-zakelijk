<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Business Kennis uit External Sources Implementatie</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">← Terug naar Portal</a>
    <p>---</p>
<p>id: BUSINESS-KNOWLEDGE-022</p>
<p>epic: EPIC-022</p>
<p>titel: Business Kennis uit External Sources Implementatie</p>
<p>type: knowledge-document</p>
<p>status: Preserved</p>
<p>aangemaakt: 2025-09-29</p>
<p>owner: development-team</p>
<p>applies_to: definitie-app@current</p>
<p>canonical: true</p>
<p>last_verified: 2025-10-02</p>
<p>reden: Code wordt verwijderd maar business kennis moet behouden blijven</p>
<p>---</p>

<h1>Business Kennis uit External Sources Implementatie</h1>

<p>Dit document bewaart belangrijke business kennis uit de verwijderde External Sources implementatie voor toekomstige referentie.</p>

<h2>1. Status Mapping Logica (KRITIEK)</h2>

<p>Bij het importeren van externe definities moet de status correct worden gemapped:</p>

<pre><code>STATUS_MAPPING = {
    "draft": DefinitieStatus.DRAFT,
    "concept": DefinitieStatus.DRAFT,
    "review": DefinitieStatus.REVIEW,
    "pending": DefinitieStatus.REVIEW,
    "approved": DefinitieStatus.ESTABLISHED,
    "established": DefinitieStatus.ESTABLISHED,
    "final": DefinitieStatus.ESTABLISHED,
    "archived": DefinitieStatus.ARCHIVED,
    "deprecated": DefinitieStatus.ARCHIVED,
}
# Default: Als status onbekend → DRAFT</code></pre>

<p><strong>Business Rationale</strong>:</p>
<ul>
<li>Externe systemen gebruiken verschillende terminologie</li>
<li>Voorkomt dat goedgekeurde externe definities als draft worden geïmporteerd</li>
<li>Behoudt workflow integriteit</li>
</ul>

<h2>2. Import Validatie Regels</h2>

<h3>Duplicate Prevention</h3>
<ul>
<li>**Regel**: Check altijd of begrip al bestaat voordat import</li>
<li>**Optie**: Gebruiker kan kiezen voor "overwrite_existing"</li>
<li>**Default**: NIET overschrijven (veilige default)</li>
</ul>

<h3>Metadata Preservatie</h3>
<p>Bij import ALTIJD bewaren:</p>
<ul>
<li>`source_reference`: "{source_id}:{external_id}"</li>
<li>`imported_from`: Naam van de bron</li>
<li>`import_timestamp`: Wanneer geïmporteerd</li>
<li>**Reden**: Audit trail, provenance, compliance</li>
</ul>

<h2>3. Bulk Import Strategie</h2>

<h3>Error Handling</h3>
<ul>
<li>**Principe**: Individual failure mag bulk import NIET stoppen</li>
<li>**Implementatie**:</li>
<li> - Verzamel errors in lijst</li>
<li> - Ga door met volgende items</li>
<li> - Rapporteer aan einde: X van Y succesvol</li>
<li>**UI Feedback**: Progress bar met real-time status updates</li>
</ul>

<h3>Performance Limits</h3>
<ul>
<li>**Max bulk import**: 100 items per keer</li>
<li>**Default**: 10 items</li>
<li>**Timeout per item**: 30 seconden</li>
<li>**Retry count**: 3 pogingen bij failure</li>
</ul>

<h2>4. Configuration Management</h2>

<h3>Export Format</h3>
<pre><code>{
  "export_timestamp": "ISO-8601 datetime",
  "sources": [
    {
      "source_id": "unique_id",
      "source_name": "human_readable_name",
      "source_type": "database|rest_api|file_system|web_service|graph_api",
      "connection_string": "...",
      "timeout": 30,
      "retry_count": 3
    }
  ]
}</code></pre>

<h3>Security Considerations</h3>
<ul>
<li>**NOOIT** exporteer credentials (api_key, password)</li>
<li>**ALTIJD** vraag om re-authenticatie bij import</li>
<li>**Log** alle import/export acties voor audit</li>
</ul>

<h2>5. Source Type Hierarchy</h2>

<pre><code>ExternalSourceType:
├── DATABASE      → Voor directe database connecties
├── REST_API      → Voor RESTful services
├── FILE_SYSTEM   → Voor lokale/netwerk bestanden
├── WEB_SERVICE   → Voor SOAP/XML services
└── GRAPH_API     → Voor GraphQL endpoints</code></pre>

<p><strong>Prioritering</strong>: File system eerst (laagste complexiteit), dan REST, dan database</p>

<h2>6. Import History Tracking</h2>

<p>Elk import event moet vastleggen:</p>
<pre><code>{
    "timestamp": "ISO-8601",
    "source_id": "bron identificatie",
    "begrip": "geïmporteerde term (bij single)",
    "imported_count": aantal_succesvol,
    "total_attempted": aantal_geprobeerd,
    "errors": ["lijst", "van", "error", "messages"],
    "status": "success|partial|failed"
}</code></pre>

<p><strong>Retention</strong>: Laatste 50 import events bewaren in session</p>

<h2>7. Adapter Pattern Requirements</h2>

<p>Elke externe bron adapter MOET implementeren:</p>
<ol>
<li>`connect()` - Verbinding maken</li>
<li>`disconnect()` - Verbinding verbreken</li>
<li>`test_connection()` - Connectiviteit testen</li>
<li>`search_definitions()` - Zoeken met filters</li>
<li>`get_definition()` - Specifieke definitie ophalen</li>
<li>`create_definition()` - Nieuwe definitie aanmaken</li>
<li>`update_definition()` - Bestaande definitie updaten</li>
<li>`delete_definition()` - Definitie verwijderen</li>
<li>`get_source_info()` - Metadata over de bron</li>
</ol>

<h2>8. Mock Data als Business Voorbeelden</h2>

<p>De mock adapter bevatte deze representatieve juridische definities:</p>
<ol>
<li>**Overeenkomst** - type - Burgerlijk Wetboek</li>
<li>**Rechtspersoon** - type - Handelsrecht</li>
<li>**Dwangsom** - proces - Bestuursrecht</li>
<li>**Hoger beroep** - proces - Procesrecht</li>
<li>**Eigendom** - type - Goederenrecht</li>
<li>**Aansprakelijkheid** - resultaat - Verbintenissenrecht</li>
<li>**Vonnis** - resultaat - Procesrecht</li>
<li>**Dagvaarding** - proces - Procesrecht</li>
<li>**Testament** - type - Erfrecht</li>
<li>**Vruchtgebruik** - type - Goederenrecht</li>
</ol>

<p>Deze voorbeelden tonen de verwachte categorieën en contexten.</p>

<h2>9. Beslissingslogica voor Toekomstige Implementatie</h2>

<h3>Wanneer WEL External Sources implementeren:</h3>
<ul>
<li>Multiple gebruikers delen definities</li>
<li>Integratie met juridische databases (Rechtspraak.nl, EUR-Lex)</li>
<li>Synchronisatie met organisatie-brede terminologie</li>
<li>Import van legacy systemen</li>
</ul>

<h3>Wanneer NIET nodig:</h3>
<ul>
<li>Single-user applicatie (huidige situatie)</li>
<li>Alleen web lookup voor verrijking</li>
<li>Eenvoudige file import/export voldoet</li>
</ul>

<h2>10. Lessons Learned</h2>

<ol>
<li>**Over-engineering**: Adapter pattern was te complex voor huidige requirements</li>
<li>**Feature overlap**: Export tab dekt 95% van de use cases</li>
<li>**Mock complexity**: Mock adapter bevatte meer code dan werkende implementatie</li>
<li>**UI cognitive load**: Extra tab zonder duidelijke meerwaarde verwart gebruikers</li>
<li>**Maintenance burden**: 1291 regels code voor hypothetische toekomst</li>
</ol>

<h2>Bewaar Deze Kennis Voor:</h2>

<ul>
<li>Als organisatie groeit naar multi-user</li>
<li>Bij integratie met juridische databases</li>
<li>Voor enterprise deployment</li>
<li>Als API integratie requirement wordt</li>
</ul>

<p>---</p>
<p><em>Deze business kennis is geëxtraheerd uit de verwijderde implementatie om toekomstige herimplementatie te vergemakkelijken zonder het verlies van opgedane inzichten.</em></p>
  </div>
</body>
</html>