<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UFO Relationship Management - Design Voorstel</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">â† Terug naar Portal</a>
    <h1>UFO Relationship Management - Design Voorstel</h1>

<p><strong>Datum</strong>: 2025-10-13</p>
<p><strong>Status</strong>: ğŸ“‹ DESIGN PROPOSAL</p>
<p><strong>Auteur</strong>: Product Owner + Claude Code</p>
<p><strong>Doel</strong>: Ontologie-laag toevoegen voor relaties tussen juridische begrippen op basis van Unified Foundational Ontology (UFO)</p>

<p>---</p>

<h2>ğŸ¯ Executive Summary</h2>

<p>Uitbreiding van DefinitieAgent met UFO-gebaseerde ontologische relaties tussen begrippen. Hiermee kunnen we:</p>
<ul>
<li>**Begrippen classificeren** volgens UFO lagen (A/B/C)</li>
<li>**Relaties vastleggen** tussen begrippen (participates_in, part_of, creates, etc.)</li>
<li>**Visueel exploreren** van begrippenkaders in juridische context</li>
<li>**Valideren** of definities consistent zijn met hun ontologische aard</li>
</ul>

<p>---</p>

<h2>ğŸ“š UFO Fundamentals</h2>

<h3>UFO Lagen voor Juridische Begrippen</h3>

<p><strong>UFO-A: Enduranten</strong> - Dingen die bestaan in tijd</p>
<ul>
<li>**Definitie**: Entiteiten die door tijd heen bestaan en kunnen veranderen maar hun identiteit behouden</li>
<li>**Juridische voorbeelden**:</li>
<li> - Personen: verdachte, rechter, getuige, advocaat, officier van justitie</li>
<li> - Rollen: beklaagde, eiser, gedaagde</li>
<li> - Objecten: bewijsstuk, dossier, document</li>
<li> - Organisaties: rechtbank, openbaar ministerie, politie</li>
</ul>

<p><strong>UFO-B: Perduranten</strong> - Gebeurtenissen die gebeuren</p>
<ul>
<li>**Definitie**: Gebeurtenissen die plaatsvinden in tijd, met duidelijk begin en eind</li>
<li>**Juridische voorbeelden**:</li>
<li> - Procedures: hoorzitting, vonnis, uitspraak, arrest</li>
<li> - Acties: dagvaarding, aanhouding, schorsing</li>
<li> - Processen: voorlopige hechtenis, strafvervolging</li>
<li> - Termijnen: vervaltermijn, appeltermijn</li>
</ul>

<p><strong>UFO-C: Sociale Entiteiten</strong> - Sociale constructen</p>
<ul>
<li>**Definitie**: Entiteiten die bestaan door sociale overeenstemming en juridische erkenning</li>
<li>**Juridische voorbeelden**:</li>
<li> - Instrumenten: overeenkomst, bezwaar, beroep, rechtsmiddel</li>
<li> - Statussen: schuldig, onschuldig, onherroepelijk</li>
<li> - Rechten: eigendomsrecht, vorderingsrecht</li>
<li> - Gevolgen: straf, schadevergoeding, boete</li>
</ul>

<p>---</p>

<h2>ğŸ”— Relatie Types</h2>

<h3>1. `participates_in` (A â†’ B)</h3>
<p><strong>Betekenis</strong>: Een endure neemt deel aan een gebeurtenis</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>verdachte `participates_in` hoorzitting</li>
<li>getuige `participates_in` verhoor</li>
<li>rechter `participates_in` vonnis</li>
<li>advocaat `participates_in` pleidooi</li>
</ul>

<p><strong>Inverse</strong>: <code>has_participant</code> (B â†’ A)</p>

<p>---</p>

<h3>2. `part_of` (A â†’ A, B â†’ B, C â†’ C)</h3>
<p><strong>Betekenis</strong>: Is onderdeel van (binnen zelfde laag)</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>advocaat `part_of` verdediging (A â†’ A)</li>
<li>verhoor `part_of` vooronderzoek (B â†’ B)</li>
<li>bezwaar `part_of` rechtsmiddelen (C â†’ C)</li>
</ul>

<p><strong>Inverse</strong>: <code>has_part</code></p>

<p>---</p>

<h3>3. `creates` (B â†’ C)</h3>
<p><strong>Betekenis</strong>: Gebeurtenis creÃ«ert sociaal construct</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>vonnis `creates` rechtsgevolg</li>
<li>uitspraak `creates` straf</li>
<li>overeenkomst sluiten `creates` verbintenis</li>
</ul>

<p><strong>Inverse</strong>: <code>created_by</code> (C â†’ B)</p>

<p>---</p>

<h3>4. `has_role_in` (A â†’ C)</h3>
<p><strong>Betekenis</strong>: Endure heeft een rol in sociaal construct</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>rechter `has_role_in` rechtspraak</li>
<li>verdachte `has_role_in` strafvervolging</li>
<li>officier van justitie `has_role_in` openbaar ministerie</li>
</ul>

<p><strong>Inverse</strong>: <code>involves_role</code> (C â†’ A)</p>

<p>---</p>

<h3>5. `precedes` / `follows` (B â†’ B)</h3>
<p><strong>Betekenis</strong>: Temporele volgorde tussen gebeurtenissen</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>dagvaarding `precedes` hoorzitting</li>
<li>hoorzitting `precedes` vonnis</li>
<li>vonnis `follows` hoorzitting</li>
</ul>

<p><strong>Inverse</strong>: Bidirectioneel (precedes â†” follows)</p>

<p>---</p>

<h3>6. `causes` / `caused_by` (B â†’ B, B â†’ C)</h3>
<p><strong>Betekenis</strong>: Causale relatie</p>
<p><strong>Voorbeelden</strong>:</p>
<ul>
<li>misdrijf plegen `causes` strafvervolging (B â†’ B)</li>
<li>vonnis `causes` straf (B â†’ C)</li>
</ul>

<p><strong>Inverse</strong>: Bidirectioneel (causes â†” caused_by)</p>

<p>---</p>

<h2>ğŸ—„ï¸ Database Schema</h2>

<h3>Tabel: `ufo_classifications`</h3>

<pre><code>CREATE TABLE ufo_classifications (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    definitie_id INTEGER NOT NULL,
    ufo_layer TEXT NOT NULL CHECK(ufo_layer IN ('UFO-A', 'UFO-B', 'UFO-C')),
    classification_type TEXT,  -- person, event, social_construct, etc.
    properties JSON,           -- Layer-specific metadata
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by TEXT DEFAULT 'system',
    FOREIGN KEY (definitie_id) REFERENCES definities(id) ON DELETE CASCADE,
    UNIQUE(definitie_id)  -- Each definitie has exactly 1 classification
);

CREATE INDEX idx_ufo_class_definitie ON ufo_classifications(definitie_id);
CREATE INDEX idx_ufo_class_layer ON ufo_classifications(ufo_layer);
CREATE INDEX idx_ufo_class_type ON ufo_classifications(classification_type);</code></pre>

<p><strong>Properties JSON voorbeelden</strong>:</p>
<pre><code>// UFO-A (person)
{
  "role_type": "legal_professional",
  "can_change_roles": true,
  "typical_contexts": ["strafrecht", "civielrecht"]
}

// UFO-B (event)
{
  "typical_duration": "2-4 uur",
  "required_participants": ["rechter", "verdachte"],
  "produces_outcome": "vonnis"
}

// UFO-C (social_construct)
{
  "legal_basis": "Wetboek van Strafvordering",
  "requires_authority": "rechter",
  "temporal_validity": "onbepaald"
}</code></pre>

<p>---</p>

<h3>Tabel: `ufo_relationships`</h3>

<pre><code>CREATE TABLE ufo_relationships (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    source_definitie_id INTEGER NOT NULL,
    target_definitie_id INTEGER NOT NULL,
    relationship_type TEXT NOT NULL,  -- participates_in, part_of, creates, etc.
    relationship_direction TEXT DEFAULT 'forward'
        CHECK(relationship_direction IN ('forward', 'bidirectional')),
    strength REAL DEFAULT 1.0 CHECK(strength &gt;= 0.0 AND strength &lt;= 1.0),
    context_json TEXT,         -- Additional context/rationale
    validated_by TEXT,
    validated_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by TEXT DEFAULT 'system',
    FOREIGN KEY (source_definitie_id) REFERENCES definities(id) ON DELETE CASCADE,
    FOREIGN KEY (target_definitie_id) REFERENCES definities(id) ON DELETE CASCADE,
    UNIQUE(source_definitie_id, target_definitie_id, relationship_type)
);

CREATE INDEX idx_ufo_rel_source ON ufo_relationships(source_definitie_id);
CREATE INDEX idx_ufo_rel_target ON ufo_relationships(target_definitie_id);
CREATE INDEX idx_ufo_rel_type ON ufo_relationships(relationship_type);
CREATE INDEX idx_ufo_rel_both ON ufo_relationships(source_definitie_id, target_definitie_id);</code></pre>

<p><strong>Context JSON voorbeeld</strong>:</p>
<pre><code>{
  "rationale": "Verdachte neemt verplicht deel aan hoorzitting volgens art. 268 Sv",
  "legal_basis": "Wetboek van Strafvordering art. 268",
  "exceptions": ["Afwezigheidsprocedure bij non-verschijning"],
  "cardinality": "1:N",  // 1 verdachte kan in meerdere hoorzittingen participeren
  "temporal_constraints": "Tijdens strafprocedure"
}</code></pre>

<p>---</p>

<h2>ğŸ—ï¸ Architecture (volgt bestaand patroon)</h2>

<h3>Repository Laag</h3>
<pre><code>src/repositories/
  ufo_repository.py          # Data access voor classifications &amp; relationships</code></pre>

<p><strong>Verantwoordelijkheden</strong>:</p>
<ul>
<li>CRUD voor `ufo_classifications`</li>
<li>CRUD voor `ufo_relationships`</li>
<li>Validation van UFO constraints (bijv. UFO-A kan niet `participates_in` UFO-A)</li>
<li>Bidirectional lookup (gegeven begrip, vind alle relaties)</li>
<li>Graph queries (transitieve relaties, pad tussen begrippen)</li>
</ul>

<p>---</p>

<h3>Service Laag</h3>
<pre><code>src/services/
  ufo_classifier_service.py   # Classificatie business logic
  ufo_relationship_service.py # Relatie business logic + validation
  ufo_validator.py            # UFO constraint validation</code></pre>

<p><strong>UFO Validator Rules</strong>:</p>
<pre><code># Allowed relationship directions per UFO layers
RELATIONSHIP_RULES = {
    "participates_in": {
        "allowed": [("UFO-A", "UFO-B")],
        "description": "Endures participate in events"
    },
    "part_of": {
        "allowed": [("UFO-A", "UFO-A"), ("UFO-B", "UFO-B"), ("UFO-C", "UFO-C")],
        "description": "Within-layer composition"
    },
    "creates": {
        "allowed": [("UFO-B", "UFO-C")],
        "description": "Events create social entities"
    },
    "has_role_in": {
        "allowed": [("UFO-A", "UFO-C")],
        "description": "Endures have roles in social entities"
    },
    "precedes": {
        "allowed": [("UFO-B", "UFO-B")],
        "description": "Temporal ordering of events"
    },
    "causes": {
        "allowed": [("UFO-B", "UFO-B"), ("UFO-B", "UFO-C")],
        "description": "Causal relationships"
    }
}</code></pre>

<p>---</p>

<h3>Models</h3>
<pre><code>src/models/
  ufo_models.py              # UFOClassification, UFORelationship dataclasses</code></pre>

<pre><code>@dataclass
class UFOClassification:
    id: int | None
    definitie_id: int
    ufo_layer: str  # UFO-A, UFO-B, UFO-C
    classification_type: str | None
    properties: dict[str, Any] | None
    created_at: datetime | None
    updated_at: datetime | None
    created_by: str

@dataclass
class UFORelationship:
    id: int | None
    source_definitie_id: int
    target_definitie_id: int
    relationship_type: str
    relationship_direction: str  # forward, bidirectional
    strength: float
    context_json: str | None
    validated_by: str | None
    validated_at: datetime | None
    created_at: datetime | None
    updated_at: datetime | None
    created_by: str</code></pre>

<p>---</p>

<h3>Config</h3>
<pre><code>config/
  ufo_config.yaml            # UFO layer definitions &amp; relationship rules</code></pre>

<p><strong>Voorbeeld config</strong>:</p>
<pre><code>ufo_layers:
  UFO-A:
    name: "Enduranten (Objecten &amp; Personen)"
    description: "Entiteiten die in tijd bestaan en kunnen veranderen"
    icon: "ğŸ‘¤"
    classification_types:
      person:
        label: "Persoon"
        examples: ["verdachte", "rechter", "getuige"]
      role:
        label: "Rol"
        examples: ["advocaat", "officier van justitie"]
      object:
        label: "Object"
        examples: ["bewijsstuk", "dossier"]
      organization:
        label: "Organisatie"
        examples: ["rechtbank", "openbaar ministerie"]

  UFO-B:
    name: "Perduranten (Gebeurtenissen)"
    description: "Gebeurtenissen die plaatsvinden in tijd"
    icon: "âš¡"
    classification_types:
      judicial_event:
        label: "Juridische Gebeurtenis"
        examples: ["hoorzitting", "vonnis", "uitspraak"]
      procedural_event:
        label: "Procedurele Gebeurtenis"
        examples: ["dagvaarding", "aanhouding"]
      temporal_event:
        label: "Temporele Gebeurtenis"
        examples: ["termijn", "schorsing"]

  UFO-C:
    name: "Sociale Entiteiten (Concepten)"
    description: "Sociale constructen en intentionele entiteiten"
    icon: "ğŸ›ï¸"
    classification_types:
      legal_construct:
        label: "Juridisch Construct"
        examples: ["overeenkomst", "recht", "plicht"]
      legal_status:
        label: "Juridische Status"
        examples: ["schuldig", "onschuldig"]
      legal_instrument:
        label: "Juridisch Instrument"
        examples: ["bezwaar", "beroep", "rechtsmiddel"]
      legal_consequence:
        label: "Juridisch Gevolg"
        examples: ["straf", "schadevergoeding"]

relationship_types:
  participates_in:
    allowed_directions: ["A-&gt;B"]
    description: "Een persoon/object neemt deel aan gebeurtenis"
    inverse: "has_participant"
    bidirectional: false

  part_of:
    allowed_directions: ["A-&gt;A", "B-&gt;B", "C-&gt;C"]
    description: "Is onderdeel van"
    inverse: "has_part"
    bidirectional: false

  creates:
    allowed_directions: ["B-&gt;C"]
    description: "Gebeurtenis creÃ«ert sociaal construct"
    inverse: "created_by"
    bidirectional: false

  has_role_in:
    allowed_directions: ["A-&gt;C"]
    description: "Heeft een rol in sociaal construct"
    inverse: "involves_role"
    bidirectional: false

  precedes:
    allowed_directions: ["B-&gt;B"]
    description: "Gebeurt voor"
    inverse: "follows"
    bidirectional: true

  causes:
    allowed_directions: ["B-&gt;B", "B-&gt;C"]
    description: "Veroorzaakt"
    inverse: "caused_by"
    bidirectional: true</code></pre>

<p>---</p>

<h2>ğŸ¨ UI Design: UFO Admin Page</h2>

<p><strong>Locatie</strong>: <code>src/pages/ufo_admin.py</code> (volgt <code>synonym_admin.py</code> patroon)</p>

<h3>Tab 1: ğŸ“Š Classificatie</h3>

<p><strong>Doel</strong>: Assign UFO layers aan begrippen</p>

<p><strong>Layout</strong>:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Zoek Begrip: [_________________] ğŸ”„ Refresh         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filter: â—‹ Alle  â—‹ Geclassificeerd  â—‹ Niet-geclassific.â”‚
â”‚ UFO Layer: â—‹ Alle  â—‹ UFO-A  â—‹ UFO-B  â—‹ UFO-C          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Begrip           â”‚ UFO Layer    â”‚ Type           â”‚ Act.â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ verdachte        â”‚ ğŸ‘¤ UFO-A     â”‚ person         â”‚ âœï¸  â”‚
â”‚ hoorzitting      â”‚ âš¡ UFO-B     â”‚ judicial_event â”‚ âœï¸  â”‚
â”‚ vonnis           â”‚ âš¡ UFO-B     â”‚ judicial_event â”‚ âœï¸  â”‚
â”‚ straf            â”‚ ğŸ›ï¸ UFO-C    â”‚ legal_conseq.  â”‚ âœï¸  â”‚
â”‚ getuige          â”‚ [Niet gecl.] â”‚ -              â”‚ â•  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

ğŸ“Œ Bulk Acties:
[âœ… Classificeer Geselecteerd] [âŒ Verwijder Classificaties]</code></pre>

<p><strong>Edit Dialog</strong> (bij klik op âœï¸ of â•):</p>
<pre><code>â”Œâ”€â”€â”€ Classificeer: verdachte â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                    â”‚
â”‚ UFO Layer: â— UFO-A  â—‹ UFO-B  â—‹ UFO-C             â”‚
â”‚                                                    â”‚
â”‚ Classification Type:                               â”‚
â”‚ [person                    â–¼]                      â”‚
â”‚                                                    â”‚
â”‚ Properties (optioneel):                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ {                                           â”‚   â”‚
â”‚ â”‚   "role_type": "legal_participant",         â”‚   â”‚
â”‚ â”‚   "can_change_roles": true                  â”‚   â”‚
â”‚ â”‚ }                                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                    â”‚
â”‚ [ğŸ’¾ Opslaan]  [âŒ Annuleren]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

<p>---</p>

<h3>Tab 2: ğŸ”— Relaties</h3>

<p><strong>Doel</strong>: Manage relationships tussen begrippen</p>

<p><strong>Layout</strong>:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Filter Relaties:                                        â”‚
â”‚ Type: [Alle types          â–¼]                          â”‚
â”‚ Van Layer: â—‹ Alle  â—‹ UFO-A  â—‹ UFO-B  â—‹ UFO-C          â”‚
â”‚ Naar Layer: â—‹ Alle  â—‹ UFO-A  â—‹ UFO-B  â—‹ UFO-C         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Van (Source)    â”‚ Relatie       â”‚ Naar (Target)  â”‚ Act â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ verdachte    â”‚ participates  â”‚ âš¡ hoorzitting â”‚ âœï¸  â”‚
â”‚ âš¡ hoorzitting  â”‚ precedes      â”‚ âš¡ vonnis      â”‚ âœï¸  â”‚
â”‚ âš¡ vonnis       â”‚ creates       â”‚ ğŸ›ï¸ straf      â”‚ âœï¸  â”‚
â”‚ ğŸ‘¤ rechter      â”‚ has_role_in   â”‚ ğŸ›ï¸ rechtspraakâ”‚ âœï¸  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

[â• Nieuwe Relatie]</code></pre>

<p><strong>Nieuwe Relatie Wizard</strong>:</p>
<pre><code>â”Œâ”€â”€â”€ Nieuwe Relatie â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚ Stap 1/3: Selecteer Source Begrip                   â”‚
â”‚ [verdachte                              â–¼]           â”‚
â”‚ UFO Layer: ğŸ‘¤ UFO-A (person)                        â”‚
â”‚                                                      â”‚
â”‚ Stap 2/3: Selecteer Relatie Type                    â”‚
â”‚ â— participates_in â†’ Een persoon neemt deel aan ...  â”‚
â”‚ â—‹ part_of â†’ Is onderdeel van ...                    â”‚
â”‚ â—‹ has_role_in â†’ Heeft rol in ...                    â”‚
â”‚ (Alleen relaties die UFO-A mag gebruiken)           â”‚
â”‚                                                      â”‚
â”‚ Stap 3/3: Selecteer Target Begrip                   â”‚
â”‚ [hoorzitting                            â–¼]           â”‚
â”‚ UFO Layer: âš¡ UFO-B (judicial_event)                â”‚
â”‚ (Gefilterd: alleen UFO-B begrippen)                 â”‚
â”‚                                                      â”‚
â”‚ Strength: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 0.80                          â”‚
â”‚                                                      â”‚
â”‚ Rationale (optioneel):                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Verdachte moet aanwezig zijn bij hoorzitting â”‚   â”‚
â”‚ â”‚ volgens Wetboek van Strafvordering art. 268  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â”‚ [ğŸ’¾ Aanmaken]  [âŒ Annuleren]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

<p>---</p>

<h3>Tab 3: ğŸ“ˆ Visualisatie</h3>

<p><strong>Doel</strong>: Network graph van begrippen en relaties</p>

<p><strong>Layout</strong>:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¨ Visualisatie Opties:                                 â”‚
â”‚ UFO Layer: â˜‘ UFO-A  â˜‘ UFO-B  â˜‘ UFO-C                   â”‚
â”‚ Relatie: â˜‘ participates_in â˜‘ creates â˜‘ precedes       â”‚
â”‚ Centrale Begriff: [verdachte          â–¼] Diepte: [2]  â”‚
â”‚ Layout: â—‹ Force  â— Hierarchisch  â—‹ Circulair          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚          ğŸ‘¤ getuige                                     â”‚
â”‚               â†“ participates_in                         â”‚
â”‚          âš¡ hoorzitting                                 â”‚
â”‚            â†™           â†˜                               â”‚
â”‚  participates_in    precedes                            â”‚
â”‚         â†™               â†˜                              â”‚
â”‚   ğŸ‘¤ verdachte      âš¡ vonnis                           â”‚
â”‚         â†“               â†“                               â”‚
â”‚   has_role_in       creates                             â”‚
â”‚         â†“               â†“                               â”‚
â”‚   ğŸ›ï¸ strafvervolging  ğŸ›ï¸ straf                        â”‚
â”‚                                                         â”‚
â”‚ [ğŸ’¾ Export PNG] [ğŸ“Š Export GraphML] [ğŸ” Zoom In]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Œ Klik op node voor details</code></pre>

<p><strong>Graph Implementatie</strong>:</p>
<ul>
<li>**Option 1** (eenvoudig): Plotly network graph</li>
<li>**Option 2** (geavanceerd): Cytoscape.js voor interactieve graaf</li>
<li>**Export formats**: PNG, GraphML, JSON</li>
</ul>

<p>---</p>

<h2>ğŸ”„ Integration met Bestaande Features</h2>

<h3>1. Definition Generation</h3>
<p><strong>Optioneel</strong>: UFO classificatie suggereren tijdens generatie</p>
<pre><code># In DefinitionGenerator
if term_has_ufo_classification(begrip):
    classification = get_ufo_classification(begrip)
    prompt += f"\nOntologische categorie: {classification.ufo_layer}"</code></pre>

<h3>2. Validation Rules</h3>
<p><strong>Nieuw</strong>: UFO consistency validation</p>
<pre><code># Toetsregel: UFO-0001 - Consistency Check
def validate_ufo_consistency(definitie: Definitie) -&gt; ValidationResult:
    """Check of definitie consistent is met UFO classificatie"""
    classification = get_ufo_classification(definitie.id)

    if classification.ufo_layer == "UFO-B":
        # Events moeten temporele markers hebben
        if not has_temporal_markers(definitie.definitie):
            return ValidationResult(
                passed=False,
                message="UFO-B begrip moet temporele markers bevatten"
            )</code></pre>

<h3>3. CSV Import/Export</h3>
<p><strong>Uitbreiding</strong>: Voeg UFO kolommen toe</p>
<pre><code>Begrip,Definitie,UFO_Layer,UFO_Type,Related_To
verdachte,"...",UFO-A,person,"hoorzitting|participates_in"
hoorzitting,"...",UFO-B,judicial_event,"vonnis|precedes"</code></pre>

<p>---</p>

<h2>ğŸ“‹ Implementation Roadmap</h2>

<h3>Fase 1: Foundation (1 week)</h3>
<ul>
<li>[ ] Database migration: `ufo_classifications` & `ufo_relationships` tables</li>
<li>[ ] Models: `UFOClassification`, `UFORelationship` dataclasses</li>
<li>[ ] Repository: `UFORepository` met CRUD operaties</li>
<li>[ ] Config: `ufo_config.yaml` met layer definitions</li>
</ul>

<h3>Fase 2: Services (1 week)</h3>
<ul>
<li>[ ] `UFOClassifierService`: Classificatie business logic</li>
<li>[ ] `UFORelationshipService`: Relatie business logic</li>
<li>[ ] `UFOValidator`: Constraint validation (allowed relationships)</li>
<li>[ ] Unit tests voor services</li>
</ul>

<h3>Fase 3: UI - Tab 1 Classificatie (3 dagen)</h3>
<ul>
<li>[ ] Page skeleton: `src/pages/ufo_admin.py`</li>
<li>[ ] Tab 1: Begrippen lijst met UFO classificaties</li>
<li>[ ] Edit dialog voor classificeren</li>
<li>[ ] Bulk operations</li>
</ul>

<h3>Fase 4: UI - Tab 2 Relaties (3 dagen)</h3>
<ul>
<li>[ ] Relaties tabel view</li>
<li>[ ] Nieuwe relatie wizard (3-step)</li>
<li>[ ] Validation van allowed relationships</li>
<li>[ ] Edit/delete functionaliteit</li>
</ul>

<h3>Fase 5: UI - Tab 3 Visualisatie (4 dagen)</h3>
<ul>
<li>[ ] Graph data preparation</li>
<li>[ ] Plotly/Cytoscape.js implementatie</li>
<li>[ ] Filter & zoom controls</li>
<li>[ ] Export functionaliteit (PNG, GraphML)</li>
</ul>

<h3>Fase 6: Integration & Testing (2 dagen)</h3>
<ul>
<li>[ ] Integration tests voor volledige flows</li>
<li>[ ] CSV import/export uitbreiding</li>
<li>[ ] Documentatie bijwerken</li>
<li>[ ] User acceptance testing</li>
</ul>

<p><strong>Totaal</strong>: ~3 weken development</p>

<p>---</p>

<h2>ğŸ¯ Success Metrics</h2>

<ul>
<li>[ ] Alle juridische begrippen geclassificeerd (100% coverage UFO layers)</li>
<li>[ ] Minimaal 50 relaties vastgelegd tussen begrippen</li>
<li>[ ] Visualisatie werkend voor minimaal 20 begrippen netwerk</li>
<li>[ ] 0 invalid relationships (alle UFO constraints gerespecteerd)</li>
<li>[ ] Export/import functionaliteit werkend</li>
<li>[ ] Performance: Graph render < 2 seconden voor 100 begrippen</li>
</ul>

<p>---</p>

<h2>ğŸš§ Open Questions</h2>

<ol>
<li>**AI-assisted classification**: Moet GPT-4 UFO classificaties kunnen suggereren?</li>
</ol>
<ul>
<li>  - Pro: Snellere classificatie van bestaande begrippen</li>
<li>  - Con: Mogelijk onnauwkeurig, vereist menselijke review</li>
</ul>

<ol>
<li>**Transitieve relaties**: Automatisch afleiden van transitieve relaties?</li>
</ol>
<ul>
<li>  - Voorbeeld: Als A `part_of` B en B `part_of` C, dan A `part_of` C?</li>
<li>  - Implementatie: Zou graph queries complexer maken</li>
</ul>

<ol>
<li>**Cardinality constraints**: Moeten we cardinaliteit vastleggen (1:1, 1:N, M:N)?</li>
</ol>
<ul>
<li>  - Voorbeeld: 1 verdachte kan in meerdere hoorzittingen participeren (1:N)</li>
<li>  - Zou als property in `context_json` kunnen</li>
</ul>

<ol>
<li>**Visualization library**: Plotly (simpel) of Cytoscape.js (geavanceerd)?</li>
</ol>
<ul>
<li>  - Plotly: Sneller te implementeren, basic interactiviteit</li>
<li>  - Cytoscape.js: Krachtigere graph layouts, betere UX</li>
</ul>

<p>---</p>

<h2>ğŸ“š References</h2>

<ul>
<li>**UFO Specification**: https://nemo.inf.ufes.br/en/projects/ufo/</li>
<li>**UFO-A (Structural)**: Enduring entities, objects, relations</li>
<li>**UFO-B (Dynamics)**: Events, processes, states</li>
<li>**UFO-C (Social)**: Social entities, norms, roles</li>
</ul>

<p>---</p>

<p><strong>Status</strong>: ğŸ“‹ Design gereed voor review</p>
<p><strong>Next</strong>: Feedback van Product Owner â†’ Prioritering â†’ EPIC aanmaken</p>

  </div>
</body>
</html>