<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>US-216: Web Lookup Test Interface Fix</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>US-216: Web Lookup Test Interface Fix</h1>

<h2>User Story</h2>
<p><strong>Als</strong> ontwikkelaar van de DefinitieAgent applicatie</p>
<p><strong>Wil ik</strong> dat de validation service interface in tests correct is</p>
<p><strong>Zodat</strong> alle web lookup tests kunnen draaien zonder failures</p>

<h2>Context</h2>
<p>Huidige blokkerende issues:</p>
<ul>
<li>ValidationService interface mismatch in test fixtures</li>
<li>2 van 15 integration tests falen</li>
<li>Mock service gebruikt verkeerde method namen</li>
<li>Tests kunnen niet draaien door interface errors</li>
</ul>

<h2>Acceptatiecriteria</h2>
<ul>
<li>[ ] MockValidationService heeft correcte `validate_definition` method</li>
<li>[ ] Alle web lookup tests draaien zonder interface errors</li>
<li>[ ] Test fixtures matchen productie interfaces exact</li>
<li>[ ] Integration tests voor web lookup zijn groen</li>
<li>[ ] Type hints in mocks matchen productie</li>
</ul>

<h2>Technische Details</h2>

<h3>Correcte Mock Interface</h3>
<pre><code>class MockValidationService:
    async def validate_definition(
        self,
        request: Any,
        context: Optional[Dict[str, Any]] = None
    ) -&gt; ValidationResult:
        """Match the actual validate_definition interface."""
        return ValidationResult(
            is_acceptable=True,
            overall_score=0.9
        )</code></pre>

<h3>Te Fixen Files</h3>
<ul>
<li>`tests/fixtures/service_stubs.py`</li>
<li>`tests/integration/test_web_lookup_integration.py`</li>
<li>Alle test files die ValidationService mocken</li>
</ul>

<h2>Geschatte Effort</h2>
<p><strong>2-4 uur</strong> (quick win)</p>

<h2>Dependencies</h2>
<ul>
<li>Geen, kan direct opgepakt worden</li>
</ul>

<h2>Testing</h2>
<ul>
<li>Draai complete test suite</li>
<li>Specifiek integration tests voor web lookup</li>
<li>Verify geen interface mismatches meer</li>
</ul>

<h2>Notes</h2>
<ul>
<li>Dit is een quick win die direct waarde oplevert</li>
<li>Blokkeert momenteel alle web lookup testing</li>
<li>Moet voor andere development gebeuren</li>
</ul>

<h2>Definition of Done</h2>
<ul>
<li>[ ] Mock interfaces gefixed</li>
<li>[ ] Alle tests draaien zonder interface errors</li>
<li>[ ] Integration tests zijn groen</li>
<li>[ ] Type checking passes voor test files</li>
<li>[ ] CI/CD pipeline draait zonder failures</li>
</ul>

<h2>Linked Items</h2>
<ul>
<li>Epic: [[EPIC-003]] - Content Verrijking / Web Lookup</li>
<li>Blocks: US-219 (test coverage)</li>
<li>Related: WEB-LOOKUP-ANALYSIS-REPORT.md (test failures sectie)</li>
</ul>
  </div>
</body>
</html>