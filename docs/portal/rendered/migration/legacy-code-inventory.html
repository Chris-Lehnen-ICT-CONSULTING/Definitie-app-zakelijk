<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üìã Legacy Code Inventory - Complete Overzicht</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>üìã Legacy Code Inventory - Complete Overzicht</h1>

<h2>üîç Wat is al verwijderd</h2>
<p>‚úÖ <strong>src/services/definition_validator.py</strong> - VERWIJDERD</p>
<p>‚úÖ <strong>ServiceContainer.validator()</strong> method - VERWIJDERD</p>
<p>‚úÖ <strong>ValidatorConfig</strong> in container.py - VERWIJDERD</p>
<p>‚úÖ <strong>validator stats</strong> uit ServiceFactory.get_stats() - VERWIJDERD</p>

<h2>‚ö†Ô∏è Wat is NOG aanwezig (legacy code te verwijderen)</h2>

<h3>1. Interfaces (src/services/interfaces.py)</h3>

<h4>DefinitionValidatorInterface (lines 194-232)</h4>
<pre><code>class DefinitionValidatorInterface(ABC):
    """DEPRECATED: Deze sync interface is onderdeel van V1 architectuur."""
    def validate(self, definition: Definition) -&gt; ValidationResult
    def validate_field(self, field_name: str, value: Any) -&gt; ValidationResult</code></pre>
<p><strong>Gebruikt door</strong>: Niemand meer (was voor DefinitionValidator)</p>
<p><strong>Actie</strong>: Kan volledig verwijderd worden</p>

<h3>2. Validator in andere locaties</h3>

<h4>src/validation/definitie_validator.py (40KB!)</h4>
<ul>
<li>**ANDERE validator** (niet services layer)</li>
<li>Gebruikt door management_tab.py voor health checks</li>
<li>**Beslissing nodig**: Behouden of migreren naar V2?</li>
</ul>

<h3>3. Legacy Patterns te onderzoeken</h3>

<h4>UnifiedGenerator / UnifiedDefinitionGenerator</h4>
<ul>
<li>**UnifiedGeneratorConfig** - Nog VEEL gebruikt (87+ references!)</li>
<li>**UnifiedDefinitionGenerator** class - Verwijderd maar comments blijven</li>
<li>**UnifiedPromptBuilder** - Nog in gebruik door tests</li>
<li>**Beslissing nodig**: UnifiedGeneratorConfig behouden of vervangen?</li>
</ul>

<h4>Sync vs Async patterns</h4>
<ul>
<li>Veel oude code is sync</li>
<li>V2 is volledig async</li>
<li>**Check nodig**: Welke sync code kan weg?</li>
</ul>

<h3>4. Test Files met Legacy References</h3>

<h4>Tests die DefinitionValidatorInterface gebruiken</h4>
<ul>
<li>tests/services/test_service_container.py - Heeft nog imports</li>
<li>tests/test_legacy_validation_removed.py - Test of het verwijderd is</li>
<li>tests/test_container.py - Mogelijk legacy references</li>
</ul>

<h3>5. Dead Code Candidates</h3>

<h4>Mogelijk ongebruikte services</h4>
<ul>
<li>[ ] Check of UnifiedGeneratorConfig nog gebruikt wordt</li>
<li>[ ] Check of alle interfaces in interfaces.py nog nodig zijn</li>
<li>[ ] Check voor duplicate service implementations</li>
</ul>

<h3>6. Import Analysis</h3>

<h4>Files die mogelijk legacy imports hebben</h4>
<pre><code># Files to check:
- src/services/service_factory.py
- src/services/container.py
- src/ui/components/*.py
- tests/**/*.py</code></pre>

<h2>üìä Dependency Matrix</h2>

<p>| Component | Depends On | Used By | Status |</p>
<p>|-----------|-----------|---------|--------|</p>
<p>| DefinitionValidatorInterface | - | Nobody | ‚ùå Can remove |</p>
<p>| definitie_validator.py | toetsregels | management_tab | ‚ö†Ô∏è Different system |</p>
<p>| ValidatorConfig | - | Nobody | ‚úÖ Already removed |</p>
<p>| DefinitionValidator | ValidatorConfig | Nobody | ‚úÖ Already removed |</p>

<h2>üéØ Removal Prioriteit</h2>

<h3>High Prioriteit (Direct verwijderen)</h3>
<ol>
<li>**DefinitionValidatorInterface** - Geen afhankelijkheden meer</li>
<li>**Test file updates** - Update tests die oude interface verwachten</li>
</ol>

<h3>Medium Prioriteit (Analyse nodig)</h3>
<ol>
<li>**src/validation/definitie_validator.py** - Andere validator, check gebruik</li>
<li>**Legacy imports** - Scan alle files voor oude imports</li>
</ol>

<h3>Low Prioriteit (Nice to have)</h3>
<ol>
<li>**Dead code** - Ongebruikte classes/functions</li>
<li>**Comment cleanup** - Oude TODO's en DEPRECATED comments</li>
</ol>

<h2>üîß Commands voor Analysis</h2>

<pre><code># Find all validator references
grep -r "validator" src/ --include="*.py" | grep -v "__pycache__"

# Find all deprecated code
grep -r "DEPRECATED" src/ --include="*.py"

# Find all TODO comments
grep -r "TODO" src/ --include="*.py"

# Find unused imports
python -m pyflakes src/

# Find dead code
vulture src/ --min-confidence 80</code></pre>

<h2>‚ö° Quick Wins</h2>

<p>Deze kunnen direct verwijderd worden zonder risico:</p>
<ol>
<li>DefinitionValidatorInterface uit interfaces.py</li>
<li>Alle mentions van DefinitionValidator in comments</li>
<li>Unused imports van validator classes</li>
</ol>

<h2>‚ö†Ô∏è Risico's</h2>

<ol>
<li>**src/validation/definitie_validator.py** - Mogelijk in gebruik door UI</li>
<li>**Health checks** - Management tab gebruikt mogelijk validators</li>
<li>**Hidden afhankelijkheden** - Dynamische imports niet gevonden door grep</li>
</ol>

<h2>üìù Recommended Approach</h2>

<ol>
<li>**Fase 1**: Verwijder obvious dead code (interfaces, comments)</li>
<li>**Fase 2**: Update alle tests OM legacy niet meer te verwachten</li>
<li>**Fase 3**: Analyseer src/validation/ directory voor consolidatie</li>
<li>**Fase 4**: Final cleanup van imports en comments</li>
</ol>

<p>---</p>
<p><em>Inventory gemaakt op: 09-01-2025</em></p>
<p><em>Status: Analyse compleet, wacht op goedkeuring voor removal</em></p>

  </div>
</body>
</html>