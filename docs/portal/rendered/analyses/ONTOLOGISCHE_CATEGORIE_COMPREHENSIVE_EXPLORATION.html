<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Comprehensive Exploration: Waarom "Type" Dominant Lijkt als Ontologische Categorie</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>Comprehensive Exploration: Waarom "Type" Dominant Lijkt als Ontologische Categorie</h1>

<p><strong>Onderzoeksvraag:</strong> Waarom komt "type" bijna altijd als resultaat bij een begrip als ontologische categorie?</p>

<p><strong>Datum:</strong> 2025-11-03</p>
<p><strong>Scope:</strong> Multi-agent analyse met Explore, Database Analysis en Prompt Engineering agents</p>
<p><strong>Status:</strong> ‚úÖ COMPLEET - Root causes ge√Ødentificeerd</p>

<p>---</p>

<h2>Executive Summary</h2>

<h3>üîç Hoofdbevinding: **GEEN "TYPE" DOMINANTIE IN DATABASE**</h3>

<p>De veronderstelling dat "type" dominant is, <strong>wordt NIET ondersteund door de data</strong>:</p>

<p>| Categorie | Count | Percentage |</p>
<p>|-----------|-------|------------|</p>
<p>| <strong>Proces</strong> | <strong>43</strong> | <strong>46.74%</strong> ‚Üê LARGEST |</p>
<p>| <strong>Type</strong> | <strong>40</strong> | <strong>43.48%</strong> ‚Üê Close second |</p>
<p>| <strong>Resultaat</strong> | 7 | 7.61% |</p>
<p>| <strong>Exemplaar</strong> | 2 | 2.17% |</p>

<p><strong>Type en Proces zijn vrijwel gelijk verdeeld, met PROCES als winnaar!</strong></p>

<h3>‚ö†Ô∏è Echter: Er IS bias in het classificatiesysteem</h3>

<p>Hoewel de database geen type-dominantie toont, zijn er <strong>structurele biases</strong> die type kunnen bevorderen:</p>

<ol>
<li>**Pattern Coverage Bias**: TYPE heeft 6 suffixes, EXEMPLAAR heeft 0</li>
<li>**Validation Pattern Bias**: TYPE patronen zijn breder dan RESULTAAT/EXEMPLAAR</li>
<li>**UI Ordering Bias**: TYPE wordt eerst getoond in ESS-02 prompt</li>
<li>**Suffix Weight Bias**: Suffix matching krijgt hoogste score (0.4), favoriseert type/proces</li>
</ol>

<p>---</p>

<h2>1. Classificatiesysteem Architectuur</h2>

<h3>1.1 TWEE SEPARATE SYSTEMEN</h3>

<h4>System A: TYPE/PROCES/RESULTAAT/EXEMPLAAR (Main)</h4>
<p><strong>Location:</strong> <code>src/domain/ontological_categories.py</code></p>
<pre><code>class OntologischeCategorie(Enum):
    TYPE = "type"           # Soort/klasse
    PROCES = "proces"       # Activiteit/handeling
    RESULTAAT = "resultaat" # Uitkomst/bevinding
    EXEMPLAAR = "exemplaar" # Specifiek geval</code></pre>

<h4>System B: U/F/O Classification (Support)</h4>
<p><strong>Location:</strong> <code>src/services/classification/ontological_classifier.py</code></p>
<ul>
<li>UNIVERSEEL (U) - Universal concepts</li>
<li>FUNCTIONEEL (F) - Domain-specific</li>
<li>OPERATIONEEL (O) - Organization-specific</li>
</ul>

<p><strong>Vrijwel niet gebruikt in productie</strong> (0% in database)</p>

<h3>1.2 Classification Flow</h3>

<pre><code>User Input (Begrip + Context)
    ‚Üì
_render_category_preview() in tabbed_interface.py:283
    ‚Üì
ImprovedOntologyClassifier.classify() ‚Üê PATTERN-BASED (niet AI!)
    ‚Üì
Store in SessionState:
  - "determined_category" (auto)
  - "category_reasoning"
  - "category_scores"
    ‚Üì
Display UI: "Voorgesteld: {category}"
    ‚Üì
User Manual Override? (Dropdown: TYPE/PROCES/RESULTAAT/EXEMPLAAR)
    ‚Üì
_handle_definition_generation()
    ‚Üì
definition_service.generate_definition(categorie=...)
    ‚Üì
DefinitionOrchestratorV2.create_definition()
    ‚Üì
SAVE to database: categorie column (VARCHAR(50))
    ‚Üì
ESS-02 Validation (checks definition text clarity)</code></pre>

<p><strong>KEY INSIGHT:</strong> Classificatie gebeurt <strong>NIET via AI prompt</strong>, maar via <strong>rule-based pattern matching</strong>!</p>

<p>---</p>

<h2>2. Pattern-Based Classifier Analysis</h2>

<h3>2.1 Scoring Algorithm</h3>
<p><strong>Location:</strong> <code>src/ontologie/improved_classifier.py:128-242</code></p>

<p><strong>Scores per category (0.0 to 1.0):</strong></p>
<ul>
<li>**Exact word match:** +0.6 (highest)</li>
<li>**Suffix match:** +0.4</li>
<li>**Suffix contains:** +0.2</li>
<li>**Indicator pattern:** +0.1</li>
<li>**Context boost:** +0.2 per match</li>
<li>**Juridische context boost:** +0.15 per match</li>
</ul>

<p><strong>Win Conditions:</strong></p>
<ul>
<li>Winner score ‚â• 0.30 AND margin ‚â• 0.12 ‚Üí WINNER</li>
<li>Else ‚Üí Fallback logic (default: PROCES)</li>
</ul>

<h3>2.2 Pattern Coverage per Category</h3>

<p>| Category | Suffixes | Words | Indicators | Total Patterns |</p>
<p>|----------|----------|-------|------------|----------------|</p>
<p>| <strong>TYPE</strong> | <strong>6</strong> | 4 | 4 | <strong>14</strong> ‚úÖ |</p>
<p>| <strong>PROCES</strong> | <strong>5</strong> | 4 | 4 | <strong>13</strong> ‚úÖ |</p>
<p>| <strong>RESULTAAT</strong> | <strong>3</strong> | 6 | 4 | <strong>13</strong> ‚ö†Ô∏è |</p>
<p>| <strong>EXEMPLAAR</strong> | <strong>0</strong> ‚ùå | 3 | 4 | <strong>7</strong> ‚ùå |</p>

<p><strong>CRITICAL BIAS:</strong> EXEMPLAAR heeft GEEN suffixes, TYPE heeft 6!</p>

<h3>2.3 Pattern Details</h3>

<h4>TYPE Patterns (src/ontologie/improved_classifier.py:38-54)</h4>
<pre><code>"type": {
    "suffixes": ["systeem", "model", "type", "soort", "klasse", "categorie"],
    "indicators": [
        r"\b(soort|type|categorie|klasse|vorm) van\b",
        r"\bis een\b.*\b(systeem|model|instrument)\b",
    ],
    "words": ["toets", "formulier", "register", "document"],
}</code></pre>

<h4>PROCES Patterns (lines 55-64)</h4>
<pre><code>"proces": {
    "suffixes": ["atie", "tie", "ing", "eren", "isatie"],
    "indicators": [
        r"\b(handeling|proces|procedure|verloop)\b",
        r"\b(uitvoeren|verrichten|doen) van\b",
    ],
    "words": ["validatie", "verificatie", "beoordeling", "controle"],
}</code></pre>

<h4>RESULTAAT Patterns (lines 65-81)</h4>
<pre><code>"resultaat": {
    "suffixes": ["besluit", "uitspraak", "vonnis"],  # Only 3!
    "indicators": [
        r"\b(resultaat|uitkomst|gevolg|effect)\b",
        r"\bwordt verleend\b",
    ],
    "words": ["besluit", "rapport", "conclusie", "advies", "vergunning", "beschikking"],
}</code></pre>

<h4>EXEMPLAAR Patterns (lines 82-92)</h4>
<pre><code>"exemplaar": {
    "suffixes": [],  # ‚ùå EMPTY!
    "indicators": [
        r"\b(dit|deze|dat) (specifieke|concrete)\b",
        r"\bmet kenmerk\b",
    ],
    "words": ["verdachte", "betrokkene", "aanvrager"],  # Only 3 words!
}</code></pre>

<p><strong>BIAS IDENTIFIED:</strong></p>
<ul>
<li>TYPE heeft 6 suffixes √ó 0.4 score = maximaal 2.4 punten mogelijk</li>
<li>EXEMPLAAR heeft 0 suffixes √ó 0.4 = 0 punten mogelijk via suffixes!</li>
</ul>

<p>---</p>

<h2>3. Database Reality Check</h2>

<h3>3.1 Actual Distribution (92 definitions)</h3>

<pre><code>proces:     43 (46.74%) ‚Üê WINNER
type:       40 (43.48%) ‚Üê Close second
resultaat:   7 (7.61%)
exemplaar:   2 (2.17%)</code></pre>

<p><strong>Data Quality:</strong></p>
<ul>
<li>‚úÖ No NULL values</li>
<li>‚úÖ All conform to schema constraints</li>
<li>‚úÖ No invalid categories</li>
</ul>

<h3>3.2 Schema Definition</h3>
<p><strong>Location:</strong> <code>src/database/schema.sql:15-26</code></p>
<pre><code>categorie VARCHAR(50) NOT NULL CHECK (categorie IN (
    'type', 'proces', 'resultaat', 'exemplaar',  -- Legacy support
    'ENT', 'ACT', 'REL', 'ATT', 'AUT', 'STA', 'OTH'  -- Extended (UNUSED!)
))</code></pre>

<p><strong>Extended categories (ENT, ACT, etc.):</strong> 0% usage in database!</p>

<h3>3.3 Sample Begrippen</h3>

<h4>TYPE Examples (40 total):</h4>
<ul>
<li>**verifi√´ren** - "Het vergelijken van de ingewonnen identiteitsgegevens..."</li>
<li>**persoon** - "Een mens van vlees en bloed"</li>
<li>**identiteitsbewijs** - "Een door een bevoegde instantie uitgereikt..."</li>
</ul>

<h4>PROCES Examples (43 total):</h4>
<ul>
<li>**dagvaarding** - "Procedure waarbij een bevoegde instantie..."</li>
<li>**hoger beroep** - "Soort rechtsmiddel waarmee een beslissing..."</li>
<li>**identiteit verifi√´ren** - "Gegevens worden gecontroleerd..."</li>
</ul>

<h4>RESULTAAT Examples (7 total):</h4>
<ul>
<li>**digitaal identiteitsbewijs** - "Resultaat van een proces dat..."</li>
<li>**identiteitskenmerk** - "biometrische of biografische eigenschap..."</li>
<li>**vermogen** - "Resultaat van het vaststellen van de totale waarde..."</li>
</ul>

<h4>EXEMPLAAR Examples (2 total):</h4>
<ul>
<li>**digitaal identiteitsmiddel** - "Specifiek exemplaar..."</li>
<li>**systeemdefinitie** - "Specifiek document waarin..."</li>
</ul>

<h3>3.4 Duplicate Begrippen with Different Categories</h3>

<p><strong>Same begrip, different interpretations:</strong></p>
<ul>
<li>`biografisch identiteitskenmerk`: TYPE + RESULTAAT</li>
<li>`biometrie`: PROCES + RESULTAAT</li>
<li>`verbod`: PROCES + RESULTAAT</li>
<li>`identiteitsmiddel`: TYPE + RESULTAAT</li>
</ul>

<p><strong>Business Rule Question:</strong> Is this intentional or data quality issue?</p>

<p>---</p>

<h2>4. Validation Pattern Analysis (ESS-02)</h2>

<h3>4.1 Validation Patterns</h3>
<p><strong>Location:</strong> <code>src/toetsregels/regels/ESS-02.json</code></p>

<p>| Category | Patterns | Pattern Breadth |</p>
<p>|----------|----------|-----------------|</p>
<p>| TYPE | <code>\b(categorie\|soort\|klasse)\b</code> | ‚ö†Ô∏è <strong>VERY BROAD</strong> |</p>
<p>| PROCES | <code>\b(proces\|activiteit\|handeling\|gebeurtenis)\b</code> | ‚ö†Ô∏è <strong>VERY BROAD</strong> |</p>
<p>| RESULTAAT | <code>\b(is het resultaat van\|het resultaat van)\b</code> | ‚úÖ SPECIFIC |</p>
<p>| EXEMPLAAR | <code>\b(exemplaar\|specifiek exemplaar\|particulier)\b</code> | ‚úÖ SPECIFIC |</p>

<p><strong>BIAS:</strong> TYPE en PROCES patronen matchen veel breder dan RESULTAAT/EXEMPLAAR!</p>

<p><strong>Example:</strong></p>
<ul>
<li>"dit is een **soort** activiteit" ‚Üí Matches BOTH type AND proces!</li>
<li>"het **resultaat** van" ‚Üí Only matches resultaat ‚úì</li>
</ul>

<h3>4.2 Validation Logic</h3>
<p><strong>Location:</strong> <code>src/toetsregels/regels/ESS-02.py:134-161</code></p>

<p><strong>Steps:</strong></p>
<ol>
<li>Check metadata override (always succeeds if provided)</li>
<li>Check for bad examples ‚Üí FAIL</li>
<li>Detect patterns per category ‚Üí Count matches</li>
<li>**If 1 category:** PASS ‚úÖ</li>
<li>**If 2+ categories:** FAIL ‚ùå (ambiguous)</li>
<li>**If 0 categories:** FAIL ‚ùå (no clarity)</li>
<li>Check good examples ‚Üí PASS if match</li>
<li>Fallback ‚Üí FAIL</li>
</ol>

<p><strong>IMPORTANT:</strong> ESS-02 is <strong>MEDIUM severity</strong>, NOT blocking!</p>
<ul>
<li>Definition can be saved even if ESS-02 fails</li>
<li>Only CRITICAL violations block saving</li>
</ul>

<p>---</p>

<h2>5. Prompt Engineering Analysis</h2>

<h3>5.1 ESS-02 Generation Hints</h3>
<p><strong>Location:</strong> <code>src/services/prompts/modules/semantic_categorisation_module.py:136-150</code></p>

<pre><code>### üìê Let op betekenislaag (ESS-02 - Ontologische categorie):
Je **moet** √©√©n van de vier categorie√´n expliciet maken:
‚Ä¢ type (soort), ‚Ä¢ exemplaar (specifiek geval), ‚Ä¢ proces (activiteit), ‚Ä¢ resultaat (uitkomst)

BELANGRIJK: Bepaal de juiste categorie op basis van het BEGRIP zelf:
- Eindigt op -ING of -TIE en beschrijft een handeling? ‚Üí PROCES
- Is het een gevolg/uitkomst van iets? ‚Üí RESULTAAT
- Is het een classificatie/soort? ‚Üí TYPE
- Is het een specifiek geval? ‚Üí EXEMPLAAR</code></pre>

<p><strong>BIAS DETECTED:</strong></p>
<ol>
<li>**Ordering Bias:** TYPE listed first (primacy effect)</li>
<li>**Redundant Instruction:** Asks AI to "determine" category, but it's already pre-determined!</li>
<li>**Heuristic Mismatch:** Prompt heuristics don't match classifier patterns exactly</li>
</ol>

<h3>5.2 Category-Specific Guidance</h3>
<p><strong>Location:</strong> Same file, lines 179-257</p>

<p><strong>Pattern:</strong></p>
<ul>
<li>TYPE: 18 lines of guidance (most detailed!)</li>
<li>PROCES: 18 lines</li>
<li>RESULTAAT: 20 lines</li>
<li>EXEMPLAAR: 18 lines</li>
</ul>

<p>All categories get equal attention in detailed guidance ‚Üí No bias here ‚úì</p>

<p>---</p>

<h2>6. Root Cause Analysis</h2>

<h3>üéØ Primary Causes of Perceived "Type" Bias</h3>

<h4>‚úÖ CONFIRMED BIASES:</h4>

<ol>
<li>**Pattern Coverage Imbalance** (HIGH IMPACT)</li>
</ol>
<ul>
<li>  - TYPE: 6 suffixes, EXEMPLAAR: 0 suffixes</li>
<li>  - Suffix matching weighted highest (0.4 points)</li>
<li>  - **Impact:** TYPE has 6√ó more chances to score via suffixes than EXEMPLAAR</li>
</ul>

<ol>
<li>**Validation Pattern Breadth** (MEDIUM IMPACT)</li>
</ol>
<ul>
<li>  - TYPE pattern `\b(categorie|soort|klasse)\b` very broad</li>
<li>  - Can match in many contexts, even ambiguous ones</li>
<li>  - **Impact:** TYPE passes ESS-02 more easily than stricter categories</li>
</ul>

<ol>
<li>**UI Ordering Bias** (LOW IMPACT)</li>
</ol>
<ul>
<li>  - ESS-02 prompt lists "type" first</li>
<li>  - Primacy effect may influence human readers</li>
<li>  - **Impact:** Subtle psychological bias</li>
</ul>

<ol>
<li>**Fallback Hard-coding** (LOW IMPACT)</li>
</ol>
<ul>
<li>  - Line 279 in improved_classifier.py: hard-codes ["toets", "formulier", "document"] ‚Üí TYPE</li>
<li>  - No equivalent for RESULTAAT/EXEMPLAAR</li>
<li>  - **Impact:** Edge cases favor TYPE</li>
</ul>

<h4>‚ùå MYTH BUSTED:</h4>

<ol>
<li>**"Type is Most Common in Database"** ‚Üí FALSE</li>
</ol>
<ul>
<li>  - Database shows: Proces (46.74%) > Type (43.48%)</li>
<li>  - Type is NOT dominant, almost tied with Proces</li>
</ul>

<ol>
<li>**"AI Prompts Favor Type"** ‚Üí FALSE</li>
</ol>
<ul>
<li>  - Classification is pattern-based, NOT AI-driven</li>
<li>  - AI only writes definition AFTER category is determined</li>
<li>  - Prompt ordering has minimal impact</li>
</ul>

<h3>üéØ Secondary Contributing Factors</h3>

<ol>
<li>**Suffix Weight Dominance**</li>
</ol>
<ul>
<li>  - Suffix matches (+0.4) > Indicators (+0.1)</li>
<li>  - Categories with more suffixes naturally score higher</li>
<li>  - TYPE (6) and PROCES (5) benefit most</li>
</ul>

<ol>
<li>**EXEMPLAAR Underspecified**</li>
</ol>
<ul>
<li>  - Only 3 exact words: "verdachte", "betrokkene", "aanvrager"</li>
<li>  - Requires very specific phrasing to match</li>
<li>  - Most begrippen won't match these patterns</li>
</ul>

<ol>
<li>**RESULTAAT Medium Specificity**</li>
</ol>
<ul>
<li>  - 3 suffixes vs 6 for TYPE</li>
<li>  - Patterns require "resultaat van" phrasing</li>
<li>  - Mid-tier likelihood</li>
</ul>

<p>---</p>

<h2>7. Why Database Shows Proces > Type</h2>

<h3>ü§î If TYPE is favored, why is PROCES more common?</h3>

<p><strong>Answer:</strong> Because <strong>PROCES also has favorable patterns!</strong></p>

<ol>
<li>**PROCES has 5 suffixes** (vs TYPE's 6):</li>
</ol>
<ul>
<li>  - "-atie", "-tie", "-ing", "-eren", "-isatie"</li>
<li>  - Many Dutch verbs/nouns end with these!</li>
<li>  - Examples: validatie, verificatie, beoordeling, controle</li>
</ul>

<ol>
<li>**Legal domain bias toward processes:**</li>
</ol>
<ul>
<li>  - Juridische begrippen often describe procedures</li>
<li>  - "dagvaarding", "hoger beroep", "identiteit verifi√´ren"</li>
<li>  - Domain naturally contains many process concepts</li>
</ul>

<ol>
<li>**PROCES has default fallback:**</li>
</ol>
<ul>
<li>  - Config/ontology/category_patterns.yaml line 164: `default_category: "proces"`</li>
<li>  - When no clear winner, PROCES is chosen</li>
</ul>

<p><strong>Conclusion:</strong> PROCES and TYPE both have strong patterns ‚Üí Almost equal distribution in DB!</p>

<p>---</p>

<h2>8. Recommendations</h2>

<h3>üîß SHORT TERM (Low-hanging fruit)</h3>

<h4>1. Balance Pattern Coverage (HIGH PRIORITY)</h4>
<pre><code>"exemplaar": {
    "suffixes": ["geval", "instantie", "voorbeeld"],  # Add 3 suffixes
    "words": ["verdachte", "betrokkene", "aanvrager", "partij", "casus"],
}

"resultaat": {
    "suffixes": ["besluit", "uitspraak", "vonnis", "beschikking", "advies", "rapport"],
    # Expand from 3 to 6
}</code></pre>

<p><strong>Impact:</strong> Equalizes suffix opportunities across categories</p>

<h4>2. Reorder ESS-02 Prompt Categories</h4>
<pre><code>‚Ä¢ proces (activiteit), ‚Ä¢ type (soort), ‚Ä¢ resultaat (uitkomst), ‚Ä¢ exemplaar (specifiek geval)</code></pre>
<p>Or randomize order each time.</p>

<p><strong>Impact:</strong> Removes primacy bias</p>

<h4>3. Add Fallback Hard-codes for All Categories</h4>
<pre><code>if begrip_lower in ["besluit", "vergunning", "beschikking", "rapport", "advies"]:
    return RESULTAAT
if begrip_lower in ["verdachte", "betrokkene", "aanvrager", "partij", "casus"]:
    return EXEMPLAAR</code></pre>

<p><strong>Impact:</strong> Edge cases distributed more fairly</p>

<h3>üîß MEDIUM TERM (Requires testing)</h3>

<h4>4. Adjust Suffix Weight vs Indicator Weight</h4>
<pre><code># Current
suffix_match: +0.4
indicator_match: +0.1

# Alternative (more balanced)
suffix_match: +0.3
indicator_match: +0.2
context_boost: +0.3  # Increase context importance</code></pre>

<p><strong>Impact:</strong> Reduces suffix dominance, increases context analysis</p>

<h4>5. Add Classifier Decision Logging</h4>
<pre><code>logger.info(
    f"Classification for '{begrip}': "
    f"TYPE={scores['type']:.2f}, PROCES={scores['proces']:.2f}, "
    f"RESULTAAT={scores['resultaat']:.2f}, EXEMPLAAR={scores['exemplaar']:.2f} "
    f"‚Üí Winner: {categorie.value} (margin: {margin:.2f})"
)</code></pre>

<p><strong>Impact:</strong> Transparency for debugging and tuning</p>

<h4>6. Narrow TYPE Validation Pattern</h4>
<pre><code>"herkenbaar_patronen_type": [
    "\\b(is een|betreft een) (categorie|soort|klasse)\\b",  // Require "is een"!
    // Remove standalone: "\\b(categorie|soort|klasse)\\b"
]</code></pre>

<p><strong>Impact:</strong> Reduces false positives for TYPE in ESS-02 validation</p>

<h3>üîß LONG TERM (Strategic)</h3>

<h4>7. Implement Machine Learning Classifier</h4>
<ul>
<li>Train on 92 existing definitions</li>
<li>Use features: suffix, keywords, context, sentence structure</li>
<li>Compare ML predictions vs rule-based</li>
<li>Hybrid approach: ML + rules</li>
</ul>

<p><strong>Impact:</strong> Data-driven classification, adaptive learning</p>

<h4>8. Introduce Confidence Thresholds</h4>
<ul>
<li>Below 0.5 confidence ‚Üí Ask user for manual classification</li>
<li>Display confidence score in UI</li>
<li>Track low-confidence cases for pattern improvement</li>
</ul>

<p><strong>Impact:</strong> User-in-the-loop for ambiguous cases</p>

<h4>9. Enforce Single Category per Begrip</h4>
<ul>
<li>Add UNIQUE constraint: `UNIQUE(begrip, versie)`</li>
<li>Business rule: One canonical interpretation per term</li>
<li>Or: Allow multiple, but flag as "polysemous" with explicit versioning</li>
</ul>

<p><strong>Impact:</strong> Resolves duplicate begrip issue</p>

<p>---</p>

<h2>9. Files Requiring Changes</h2>

<h3>Core Classification Files:</h3>
<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/ontologie/improved_classifier.py`</li>
<p>  <strong>Changes:</strong> Add EXEMPLAAR/RESULTAAT suffixes, adjust weights, add logging</p>
</ul>

<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/config/ontology/category_patterns.yaml`</li>
<p>  <strong>Changes:</strong> Update pattern definitions, weights</p>
</ul>

<h3>Validation Files:</h3>
<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/toetsregels/regels/ESS-02.json`</li>
<p>  <strong>Changes:</strong> Narrow TYPE patterns, reorder category list</p>
</ul>

<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/toetsregels/regels/ESS-02.py`</li>
<p>  <strong>Changes:</strong> Add confidence threshold logic</p>
</ul>

<h3>Prompt Files:</h3>
<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/services/prompts/modules/semantic_categorisation_module.py`</li>
<p>  <strong>Changes:</strong> Reorder categories, remove redundant "Bepaal" instruction, clarify it's pre-determined</p>
</ul>

<h3>UI Files:</h3>
<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/ui/tabbed_interface.py`</li>
<p>  <strong>Changes:</strong> Display confidence score, add logging</p>
</ul>

<h3>Database:</h3>
<ul>
<li>`/Users/chrislehnen/Projecten/Definitie-app/src/database/schema.sql`</li>
<p>  <strong>Changes:</strong> Consider UNIQUE constraint, remove unused extended categories</p>
</ul>

<p>---</p>

<h2>10. Testing Strategy</h2>

<h3>Unit Tests (Immediate)</h3>
<ol>
<li>Test each category with 10 representative begrippen</li>
<li>Verify suffix matching works correctly</li>
<li>Test fallback logic for edge cases</li>
<li>Validate ESS-02 pattern detection</li>
</ol>

<h3>Integration Tests (After changes)</h3>
<ol>
<li>Run classifier on all 92 existing definitions</li>
<li>Compare old vs new classifications</li>
<li>Measure distribution changes</li>
<li>User acceptance: Do results "feel" better?</li>
</ol>

<h3>A/B Testing (Long-term)</h3>
<ol>
<li>Deploy with logging enabled</li>
<li>Track category distribution over 100 new definitions</li>
<li>Measure ESS-02 pass rate per category</li>
<li>Collect user feedback on classification quality</li>
</ol>

<p>---</p>

<h2>11. Conclusion</h2>

<h3>‚ùå MYTH: "Type is dominant in the database"</h3>
<p><strong>Reality:</strong> Proces (46.74%) > Type (43.48%) - Almost equal!</p>

<h3>‚úÖ FACT: "There IS structural bias toward TYPE/PROCES"</h3>
<p><strong>Causes:</strong></p>
<ol>
<li>More suffix patterns (6 for TYPE, 5 for PROCES, 0 for EXEMPLAAR)</li>
<li>Broader validation patterns for TYPE</li>
<li>Suffix matching weighted highest in scoring</li>
</ol>

<h3>üéØ KEY INSIGHT:</h3>
<p>The classification system <strong>structurally favors categories with more suffixes</strong> (TYPE and PROCES), but <strong>domain characteristics</strong> (legal terminology with many processes) result in <strong>PROCES being most common</strong>, not TYPE.</p>

<h3>üöÄ NEXT STEPS:</h3>
<ol>
<li>**Implement Short-term fixes** (1-2 dagen):</li>
</ol>
<ul>
<li>  - Add EXEMPLAAR/RESULTAAT suffixes</li>
<li>  - Reorder ESS-02 prompt</li>
<li>  - Add logging</li>
</ul>

<ol>
<li>**Test and validate** (1 week):</li>
</ol>
<ul>
<li>  - Run on existing 92 definitions</li>
<li>  - Measure distribution changes</li>
<li>  - Collect feedback</li>
</ul>

<ol>
<li>**Long-term strategic improvements** (backlog):</li>
</ol>
<ul>
<li>  - ML classifier</li>
<li>  - Confidence thresholds</li>
<li>  - Schema cleanup</li>
</ul>

<p>---</p>

<h2>Appendix A: Complete Pattern Coverage Matrix</h2>

<p>| Category | Suffixes (6) | Words (4) | Indicators (4) | Context Boost | Max Score |</p>
<p>|----------|--------------|-----------|----------------|---------------|-----------|</p>
<p>| TYPE | ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ | 3.5+ |</p>
<p>| PROCES | ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ | 3.3+ |</p>
<p>| RESULTAAT | ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ | 2.9+ |</p>
<p>| EXEMPLAAR | ‚ùå | ‚úÖ‚úÖ‚úÖ | ‚úÖ‚úÖ‚úÖ‚úÖ | ‚úÖ | 2.3+ |</p>

<p><strong>Observation:</strong> EXEMPLAAR has 34% lower max score potential than TYPE due to 0 suffixes!</p>

<p>---</p>

<h2>Appendix B: Database Query Used</h2>

<pre><code>sqlite3 data/definities.db &lt;&lt;EOF
.mode column
.headers on

-- Total count
SELECT 'Total definitions:' as metric, COUNT(*) as value
FROM definities;

-- Distribution by category
SELECT categorie, COUNT(*) as count,
       ROUND(COUNT(*) * 100.0 / (SELECT COUNT(*) FROM definities), 2) as percentage
FROM definities
GROUP BY categorie
ORDER BY count DESC;

-- NULL check
SELECT 'NULL categorie:' as metric, COUNT(*) as value
FROM definities
WHERE categorie IS NULL OR categorie = '';

-- Sample begrippen per category
SELECT categorie, begrip, SUBSTR(definitie, 1, 80) || '...' as definitie_preview
FROM definities
GROUP BY categorie
ORDER BY categorie;
EOF</code></pre>

<p>---</p>

<p><strong>Document Status:</strong> ‚úÖ COMPLEET</p>
<p><strong>Created:</strong> 2025-11-03</p>
<p><strong>Authors:</strong> Multi-agent analysis (Explore + Database + Prompt Engineering agents)</p>
<p><strong>Review Status:</strong> Pending stakeholder review</p>
<p><strong>Related Issues:</strong> N/A (exploratory analysis)</p>

  </div>
</body>
</html>