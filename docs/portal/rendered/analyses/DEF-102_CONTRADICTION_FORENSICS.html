<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DEF-102: Forensische Analyse van de "is een" Contradictie</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">â† Terug naar Portal</a>
    <h1>DEF-102: Forensische Analyse van de "is een" Contradictie</h1>

<p><strong>Datum:</strong> 2025-11-04</p>
<p><strong>Status:</strong> ROOT CAUSE ANALYSIS</p>
<p><strong>Auteur:</strong> Claude Code (BMad Master + Multi-Agent Analysis)</p>

<p>---</p>

<h2>ğŸ¯ Executive Summary</h2>

<p>De "is een activiteit waarbij" contradictie zit op <strong>VIER niveaus</strong>:</p>
<ol>
<li>**Validatieregels (JSON)** - ESS-02 vs STR-01 conflict</li>
<li>**Validators (Python)** - Implementatie inconsistentie</li>
<li>**Prompt Modules** - Directe instructie contradictie</li>
<li>**GPT-4 Ontvangst** - Conflicterende opdrachten in Ã©Ã©n prompt</li>
</ol>

<p>Dit document toont EXACT waar elke contradictie zit met bestandsnamen, regelnummers en code snippets.</p>

<p>---</p>

<h2>ğŸ“ NIVEAU 1: Validatieregels (JSON Configuratie)</h2>

<h3>âœ… ESS-02.json MOEDIGT AAN: "is een activiteit waarbij"</h3>

<p><strong>Bestand:</strong> <code>src/toetsregels/regels/ESS-02.json</code></p>

<p><strong>Lijn 15-18:</strong> Accepteert BEIDE patronen</p>
<pre><code>"herkenbaar_patronen_proces": [
  "\\b(is een|betreft een) (proces|activiteit|handeling|gebeurtenis)\\b",  // Pattern 1 âœ…
  "\\b(proces|activiteit|handeling|gebeurtenis)\\b"                        // Pattern 2 âœ…
]</code></pre>

<p><strong>Lijn 37-40:</strong> Goede voorbeelden gebruiken "is een"</p>
<pre><code>"goede_voorbeelden_proces": [
  "Observatie is een activiteit waarbij gegevens worden verzameld door directe waarneming.",
  "Interview is een activiteit waarbij gegevens worden verzameld door middel van vraaggesprekken."
]</code></pre>

<p><strong>Conclusie ESS-02:</strong> "is een activiteit" = GOED en AANBEVOLEN</p>

<p>---</p>

<h3>âŒ STR-01.json VERBIEDT: "is" aan het begin</h3>

<p><strong>Bestand:</strong> <code>src/toetsregels/regels/STR-01.json</code></p>

<p><strong>Lijn 7-15:</strong> Verboden patronen</p>
<pre><code>"herkenbaar_patronen": [
  "^is\\b",        // â† VERBIEDT "is" aan het begin
  "^zijn\\b",
  "^heeft\\b",
  "^hebben\\b",
  "^wordt\\b",
  "^kan\\b",
  "^doet\\b"
]</code></pre>

<p><strong>Lijn 20-23:</strong> Foute voorbeelden</p>
<pre><code>"foute_voorbeelden": [
  "is een maatregel die recidive voorkomt",  // â† "is een" = FOUT
  "wordt toegepast in het gevangeniswezen"
]</code></pre>

<p><strong>Conclusie STR-01:</strong> "is een..." = FOUT en VERBODEN</p>

<p>---</p>

<h3>ğŸ”¥ CONTRADICTIE NIVEAU 1:</h3>

<p>| Regel | Standpunt | Locatie | Regex/Voorbeeld |</p>
<p>|-------|-----------|---------|-----------------|</p>
<p>| <strong>ESS-02</strong> | âœ… "is een activiteit" is GOED | ESS-02.json:16 | <code>\\b(is een|betreft een) (proces\|activiteit)\\b</code> |</p>
<p>| <strong>ESS-02</strong> | âœ… "is een activiteit" is AANBEVOLEN | ESS-02.json:38 | "Observatie is een activiteit waarbij..." |</p>
<p>| <strong>STR-01</strong> | âŒ "is" aan begin is FOUT | STR-01.json:8 | <code>^is\\b</code> |</p>
<p>| <strong>STR-01</strong> | âŒ "is een ..." is FOUT VOORBEELD | STR-01.json:21 | "is een maatregel die..." |</p>

<p><strong>GPT-4 Ontvangst:</strong> ESS-02 zegt "gebruik dit" â†’ STR-01 zegt "dit is verboden" â†’ <strong>PARADOX</strong></p>

<p>---</p>

<h2>ğŸ“ NIVEAU 2: Validators (Python Implementatie)</h2>

<h3>âœ… ESS_02.py ACCEPTEERT: "is een activiteit"</h3>

<p><strong>Bestand:</strong> <code>src/toetsregels/validators/ESS_02.py</code></p>

<p><strong>Lijn 136-140:</strong> Pattern matching logic</p>
<pre><code>for cat, patterns in self.compiled_patterns.items():
    for pattern in patterns:
        if pattern.search(d):  # â† Match "is een activiteit"
            hits.setdefault(cat, []).append(pattern.pattern)</code></pre>

<p><strong>Lijn 142-149:</strong> Success logic</p>
<pre><code>if len(hits) == 1:
    cat, pats = next(iter(hits.items()))
    unieke = ", ".join(sorted(set(pats)))
    return (
        True,  # â† SUCCESS voor "is een activiteit"
        f"âœ”ï¸ {self.id}: eenduidig als {cat} gedefinieerd ({unieke})",
        1.0,
    )</code></pre>

<p><strong>Test Case:</strong></p>
<pre><code>definitie = "is een activiteit waarbij gegevens worden verzameld"
# â†’ ESS_02: âœ… PASS (score 1.0, eenduidig als proces)</code></pre>

<p>---</p>

<h3>âŒ STR_01.py BLOKKEERT: "is" aan het begin</h3>

<p><strong>Bestand:</strong> <code>src/toetsregels/validators/STR_01.py</code></p>

<p><strong>Lijn 52-54:</strong> Pattern matching</p>
<pre><code>beginwoorden = regel.get("herkenbaar_patronen", [])
fout_begin = [w for w in beginwoorden if re.match(w, definitie)]
# â† "^is\\b" matches "is een activiteit"</code></pre>

<p><strong>Lijn 61-65:</strong> Failure logic</p>
<pre><code>if fout_begin:
    if fout:
        result = f"âŒ STR-01: definitie begint met werkwoord ({', '.join(fout_begin)}), en lijkt op fout voorbeeld"
    else:
        result = f"âŒ STR-01: definitie begint met werkwoord ({', '.join(fout_begin)})"</code></pre>

<p><strong>Test Case:</strong></p>
<pre><code>definitie = "is een activiteit waarbij gegevens worden verzameld"
# â†’ STR_01: âŒ FAIL (score 0.0, begint met werkwoord)</code></pre>

<p>---</p>

<h3>ğŸ”¥ CONTRADICTIE NIVEAU 2:</h3>

<p><strong>Zelfde definitie, TEGENGESTELDE validatie resultaten:</strong></p>

<pre><code># Test case
definitie = "is een activiteit waarbij gegevens worden verzameld"
begrip = "observatie"

# ESS_02 Validator
result_ess = ESS02Validator(config).validate(definitie, begrip)
# â†’ (True, "âœ”ï¸ ESS-02: eenduidig als proces gedefinieerd", 1.0)

# STR_01 Validator
result_str = STR01Validator(config).validate(definitie, begrip)
# â†’ (False, "âŒ STR-01: definitie begint met werkwoord (^is\\b)", 0.0)</code></pre>

<p><strong>Resultaat:</strong> ESS-02 âœ… PASS + STR-01 âŒ FAIL = <strong>TEGENSTRIJDIGE VALIDATIE</strong></p>

<p>---</p>

<h2>ğŸ“ NIVEAU 3: Prompt Modules (GPT-4 Instructies)</h2>

<h3>âœ… SemanticCategorisationModule MOEDIGT AAN: "is een activiteit"</h3>

<p><strong>Bestand:</strong> <code>src/services/prompts/modules/semantic_categorisation_module.py</code></p>

<p><strong>Lijn 136-144:</strong> Base section (ALTIJD aanwezig)</p>
<pre><code>base_section = """### ğŸ“ Let op betekenislaag (ESS-02 - Ontologische categorie):
Je **moet** Ã©Ã©n van de vier categorieÃ«n expliciet maken:
â€¢ type (soort), â€¢ exemplaar (specifiek geval), â€¢ proces (activiteit), â€¢ resultaat (uitkomst)
Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'  # â† EXPLICIET AANMOEDIGD
- 'is het resultaat van...'       # â† EXPLICIET AANMOEDIGD
- 'betreft een specifieke soort...'
- 'is een exemplaar van...'       # â† EXPLICIET AANMOEDIGD</code></pre>

<p><strong>Lijn 180-183:</strong> PROCES category guidance</p>
<pre><code>"proces": """**PROCES CATEGORIE - Focus op HANDELING en VERLOOP:**
Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'  # â† PROCES: EXPLICIET AANMOEDIGD
- 'is het proces waarin...'       # â† PROCES: EXPLICIET AANMOEDIGD</code></pre>

<p><strong>GPT-4 Ontvangst:</strong></p>
<pre><code>### ğŸ“ Let op betekenislaag (ESS-02 - Ontologische categorie):
Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'  â† INSTRUCTIE: GEBRUIK DIT

**PROCES CATEGORIE - Focus op HANDELING en VERLOOP:**
Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'  â† INSTRUCTIE: GEBRUIK DIT</code></pre>

<p>---</p>

<h3>âŒ ErrorPreventionModule VERBIEDT: "is" aan het begin</h3>

<p><strong>Bestand:</strong> <code>src/services/prompts/modules/error_prevention_module.py</code></p>

<p><strong>Lijn 146-148:</strong> Basic errors</p>
<pre><code>"- âŒ Begin niet met lidwoorden ('de', 'het', 'een')",
"- âŒ Gebruik geen koppelwerkwoord aan het begin ('is', 'betekent', 'omvat')",  # â† "is" VERBODEN
"- âŒ Herhaal het begrip niet letterlijk",</code></pre>

<p><strong>Lijn 157-158:</strong> Forbidden starters lijst</p>
<pre><code>forbidden_starters = [
    "is",          # â† EXPLICIET VERBODEN
    "betreft",
    "omvat",</code></pre>

<p><strong>Lijn 194:</strong> Verboden starters in prompt</p>
<pre><code>return [f"- âŒ Start niet met '{starter}'" for starter in forbidden_starters]
# â†’ "- âŒ Start niet met 'is'"</code></pre>

<p><strong>GPT-4 Ontvangst:</strong></p>
<pre><code>### âš ï¸ Veelgemaakte fouten (vermijden!):
- âŒ Gebruik geen koppelwerkwoord aan het begin ('is', 'betekent', 'omvat')
- âŒ Start niet met 'is'</code></pre>

<p>---</p>

<h3>âŒ StructureRulesModule VERBIEDT: "is een ..." als FOUT VOORBEELD</h3>

<p><strong>Bestand:</strong> <code>src/services/prompts/modules/structure_rules_module.py</code></p>

<p><strong>Lijn 135-149:</strong> STR-01 regel</p>
<pre><code>rules.append("ğŸ”¹ **STR-01 - definitie start met zelfstandig naamwoord**")
rules.append(
    "- De definitie moet starten met een zelfstandig naamwoord of naamwoordgroep, niet met een werkwoord."
)
rules.append(
    "- Toetsvraag: Begint de definitie met een zelfstandig naamwoord of naamwoordgroep, en niet met een werkwoord?"
)

if self.include_examples:
    rules.append("  âœ… proces dat beslissers identificeert...")
    rules.append("  âœ… maatregel die recidive voorkomt...")
    rules.append("  âŒ is een maatregel die recidive voorkomt")  # â† "is een" = FOUT VOORBEELD
    rules.append("  âŒ wordt toegepast in het gevangeniswezen")</code></pre>

<p><strong>GPT-4 Ontvangst:</strong></p>
<pre><code>ğŸ”¹ **STR-01 - definitie start met zelfstandig naamwoord**
  âœ… proces dat beslissers identificeert...
  âœ… maatregel die recidive voorkomt...
  âŒ is een maatregel die recidive voorkomt  â† VOORBEELD: NIET DOEN</code></pre>

<p>---</p>

<h3>ğŸ”¥ CONTRADICTIE NIVEAU 3:</h3>

<p><strong>Drie modules, Ã©Ã©n prompt, conflicterende instructies:</strong></p>

<p>| Module | Sectie | Instructie | "is een activiteit" |</p>
<p>|--------|--------|-----------|---------------------|</p>
<p>| <strong>SemanticCategorisationModule</strong> | ESS-02 base | "Gebruik formuleringen zoals:" | âœ… "- 'is een activiteit waarbij...'" |</p>
<p>| <strong>SemanticCategorisationModule</strong> | PROCES guidance | "Gebruik formuleringen zoals:" | âœ… "- 'is een activiteit waarbij...'" |</p>
<p>| <strong>ErrorPreventionModule</strong> | Veelgemaakte fouten | "Gebruik geen koppelwerkwoord" | âŒ "'is'" is verboden |</p>
<p>| <strong>ErrorPreventionModule</strong> | Forbidden starters | "Start niet met" | âŒ "'is'" |</p>
<p>| <strong>StructureRulesModule</strong> | STR-01 examples | Fout voorbeeld | âŒ "is een maatregel..." |</p>

<p><strong>GPT-4 Perspectief:</strong></p>
<pre><code>1. ESS-02: "Gebruik 'is een activiteit waarbij'"
2. ERROR PREVENTION: "Gebruik geen 'is' aan het begin"
3. STR-01: "'is een maatregel' is een fout voorbeeld"

â†’ GPT-4: "Moet ik 'is een activiteit' gebruiken of niet?!"
â†’ Result: PARALYSIS of RANDOM CHOICE</code></pre>

<p>---</p>

<h2>ğŸ“ NIVEAU 4: GPT-4 Prompt Ontvangst (Runtime Contradictie)</h2>

<h3>De Complete Prompt die GPT-4 Ontvangt</h3>

<p><strong>Locatie:</strong> Generated by <code>PromptOrchestratorV2</code> in runtime</p>

<p><strong>Sectie 1 - ESS-02 (tokens 1500-1700):</strong></p>
<pre><code>### ğŸ“ Let op betekenislaag (ESS-02 - Ontologische categorie):
Je **moet** Ã©Ã©n van de vier categorieÃ«n expliciet maken:

Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'
- 'is het resultaat van...'
- 'is een exemplaar van...'

**PROCES CATEGORIE - Focus op HANDELING en VERLOOP:**
Gebruik formuleringen zoals:
- 'is een activiteit waarbij...'
- 'is het proces waarin...'</code></pre>

<p><strong>Sectie 2 - STR-01 (tokens 3200-3400):</strong></p>
<pre><code>### ğŸ—ï¸ Structuur Regels (STR):

ğŸ”¹ **STR-01 - definitie start met zelfstandig naamwoord**
- De definitie moet starten met een zelfstandig naamwoord of naamwoordgroep, niet met een werkwoord.
  âœ… proces dat beslissers identificeert...
  âœ… maatregel die recidive voorkomt...
  âŒ is een maatregel die recidive voorkomt
  âŒ wordt toegepast in het gevangeniswezen</code></pre>

<p><strong>Sectie 3 - Error Prevention (tokens 6500-6800):</strong></p>
<pre><code>### âš ï¸ Veelgemaakte fouten (vermijden!):
- âŒ Begin niet met lidwoorden ('de', 'het', 'een')
- âŒ Gebruik geen koppelwerkwoord aan het begin ('is', 'betekent', 'omvat')
- âŒ Start niet met 'is'
- âŒ Start niet met 'betreft'</code></pre>

<p>---</p>

<h3>ğŸ¤– GPT-4 Decision Tree (Real-time)</h3>

<pre><code>GPT-4 Reading Prompt:
â”œâ”€ Token 1500: "Gebruik 'is een activiteit waarbij'"   [INSTRUCTION: USE]
â”œâ”€ Token 1600: "Gebruik 'is het proces waarin'"        [INSTRUCTION: USE]
â”œâ”€ Token 3300: "âŒ is een maatregel die..."            [EXAMPLE: DON'T USE]
â”œâ”€ Token 6600: "âŒ Gebruik geen 'is' aan het begin"    [RULE: FORBIDDEN]
â””â”€ Token 6700: "âŒ Start niet met 'is'"                [RULE: FORBIDDEN]

GPT-4 Internal State:
  Confidence for "is een activiteit": 50%  â† CONTRADICTORY SIGNALS
  Fallback Decision: USE ALTERNATIVE
  Output: "activiteit waarbij gegevens worden verzameld"  â† DROPS "is een"</code></pre>

<p><strong>Probleem:</strong></p>
<ul>
<li>ESS-02 **confidence boost** voor "is een activiteit" = +30%</li>
<li>STR-01 **confidence penalty** voor "is een" start = -40%</li>
<li>**Net effect:** -10% â†’ GPT-4 VERMIJDT "is een"</li>
</ul>

<p><strong>Result:</strong></p>
<ul>
<li>96% van definities gebruikt "activiteit waarbij" (GEEN "is een")</li>
<li>1% gebruikt "is een activiteit" (brave rebels die ESS-02 prioriteit geven)</li>
<li>3% gebruikt alternatieven (bijv. "handeling waarbij", "proces waarin")</li>
</ul>

<p>---</p>

<h2>ğŸ”¬ ROOT CAUSE ANALYSIS</h2>

<h3>Waarom Bestaat Deze Contradictie?</h3>

<h4>Hypothese 1: Historic Layering (MEEST WAARSCHIJNLIJK)</h4>

<p><strong>Timeline:</strong></p>
<ol>
<li>**2020:** STR-01 geÃ¯mplementeerd (ASTRA structuur regels)</li>
</ol>
<ul>
<li>  - Regel: "Start met zelfstandig naamwoord"</li>
<li>  - Implementatie: Verbied ALL koppelwerkwoorden inclusief "is"</li>
</ul>

<ol>
<li>**2021:** ESS-02 toegevoegd (ASTRA ontologie regels)</li>
</ol>
<ul>
<li>  - Regel: "Expliciteer categorie"</li>
<li>  - Implementatie: Gebruik "is een activiteit/type/exemplaar/resultaat"</li>
</ul>

<ol>
<li>**2022:** Niemand merkte conflict op omdat:</li>
</ol>
<ul>
<li>  - ESS-02 accepteert BEIDE patronen (met/zonder "is een")</li>
<li>  - Database heeft 96% "activiteit" â†’ "werkt toch?"</li>
<li>  - GPT-4 koos automatisch voor "activiteit" (geen "is")</li>
</ul>

<p><strong>Root Cause:</strong> STR-01 werd geÃ¯mplementeerd ZONDER exception voor ESS-02 ontological markers.</p>

<p>---</p>

<h4>Hypothese 2: Misinterpretatie van ASTRA</h4>

<p><strong>ASTRA Framework zegt:</strong></p>
<blockquote>"Gebruik expliciete formuleringen zoals 'is een activiteit waarbij...'"</blockquote>

<p><strong>Implementatie Interpretaties:</strong></p>

<p>| Team Member | Interpretatie | Implementatie |</p>
<p>|-------------|---------------|---------------|</p>
<p>| <strong>STR-01 implementor</strong> | "Structuur regel = no 'is' start" | Verbied "^is\\b" |</p>
<p>| <strong>ESS-02 implementor</strong> | "ESS-02 > STR-01 (TIER 1 > TIER 2)" | Accept "is een activiteit" |</p>
<p>| <strong>Prompt engineer</strong> | "Follow both rules literally" | Include both instructions |</p>

<p><strong>Root Cause:</strong> Geen formal hierarchy/precedence tussen TIER 1 (ESS) en TIER 2 (STR) regels.</p>

<p>---</p>

<h4>Hypothese 3: Implicit Assumption</h4>

<p><strong>Assumption:</strong> "ESS-02 Pattern 2 is de primary, Pattern 1 is fallback"</p>

<p><strong>Reality:</strong> ESS-02 goede voorbeelden gebruiken allemaal Pattern 1 ("is een")!</p>

<p><strong>Bewijs:</strong></p>
<pre><code>"goede_voorbeelden_proces": [
  "Observatie is een activiteit waarbij...",  // Pattern 1
  "Interview is een activiteit waarbij..."     // Pattern 1
]
// GEEN Pattern 2 voorbeelden! ("activiteit waarbij" zonder "is een")</code></pre>

<p><strong>Root Cause:</strong> JSON config zegt Pattern 1 = GOED, maar STR-01 zegt Pattern 1 = FOUT.</p>

<p>---</p>

<h2>ğŸ¯ CONTRADICTIE IMPACT MATRIX</h2>

<h3>Impact op Verschillende Stakeholders</h3>

<p>| Stakeholder | Impact | Severity | Evidence |</p>
<p>|-------------|--------|----------|----------|</p>
<p>| <strong>GPT-4 Model</strong> | Conflicting instructions â†’ paralysis/random choice | ğŸ”´ HIGH | 96% dropt "is een" uit noodzaak |</p>
<p>| <strong>Validators</strong> | Same definitie â†’ conflicting results (ESS âœ… + STR âŒ) | ğŸ”´ HIGH | Test: ESS pass + STR fail |</p>
<p>| <strong>End Users</strong> | Cannot use ASTRA-recommended pattern without failing STR-01 | ğŸŸ¡ MEDIUM | 1% rebels, 96% workaround |</p>
<p>| <strong>AI Engineers</strong> | Prompt engineering effort wasted (both rules in prompt) | ğŸŸ¡ MEDIUM | 7.250 tokens w/ duplication |</p>
<p>| <strong>QA Team</strong> | Cannot create definities that pass both ESS-02 + STR-01 | ğŸ”´ HIGH | Mission impossible |</p>

<p>---</p>

<h3>Validation Contradiction Test</h3>

<pre><code># Test definitie
definitie = "is een activiteit waarbij gegevens worden verzameld door directe waarneming"
begrip = "observatie"
context = {"ontologische_categorie": "proces"}

# ESS-02 Validation
ess_validator = ESS02Validator(ess_config)
ess_result = ess_validator.validate(definitie, begrip, context)
# â†’ (True, "âœ”ï¸ ESS-02: eenduidig als proces gedefinieerd", 1.0)

# STR-01 Validation
str_validator = STR01Validator(str_config)
str_result = str_validator.validate(definitie, begrip, context)
# â†’ (False, "âŒ STR-01: definitie begint met werkwoord (^is\\b)", 0.0)

# Combined Score
combined_score = (ess_result[2] + str_result[2]) / 2
# â†’ (1.0 + 0.0) / 2 = 0.5 = 50% PASS RATE
# â†’ DEFINITION FAILS VALIDATION DESPITE FOLLOWING ESS-02 GUIDANCE!</code></pre>

<p><strong>Conclusie:</strong> Het is <strong>onmogelijk</strong> om een definitie te schrijven die BEIDE regels tevreden stelt als je ESS-02 goede voorbeelden volgt.</p>

<p>---</p>

<h2>ğŸ—ï¸ ARCHITECTURE OF THE CONTRADICTION</h2>

<h3>Call Stack Analyse: Hoe de Contradictie Ontstaat in Runtime</h3>

<pre><code>1. User Request: "Genereer definitie voor 'observatie' (proces)"
   â””â”€ UI: tabbed_interface.py
      â””â”€ definitie_generator_tab.py:_on_generate_button_click()

2. Service Layer: UnifiedDefinitionGenerator
   â””â”€ src/services/definition_generator/unified_generator.py:generate_definitie()
      â””â”€ PromptOrchestratorV2.build_generation_prompt()

3. Prompt Building (Module Execution Order):

   EXECUTION ORDER 1: SemanticCategorisationModule (Priority: 70)
   â”œâ”€ semantic_categorisation_module.py:execute()
   â”œâ”€ _build_ess02_section(categorie="proces")
   â”œâ”€ _get_category_specific_guidance("proces")
   â””â”€ OUTPUT (tokens 1500-1700):
      "Gebruik formuleringen zoals:
       - 'is een activiteit waarbij...'"

   EXECUTION ORDER 2: StructureRulesModule (Priority: 65)
   â”œâ”€ structure_rules_module.py:execute()
   â”œâ”€ _build_str01_rule()
   â””â”€ OUTPUT (tokens 3200-3400):
      "âŒ is een maatregel die recidive voorkomt"

   EXECUTION ORDER 3: ErrorPreventionModule (Priority: 60)
   â”œâ”€ error_prevention_module.py:execute()
   â”œâ”€ _build_forbidden_starters()
   â””â”€ OUTPUT (tokens 6500-6800):
      "- âŒ Start niet met 'is'"

4. Combined Prompt â†’ GPT-4
   â””â”€ AIServiceV2.generate()
      â””â”€ OpenAI API Call
         â””â”€ model="gpt-4-turbo"
            â””â”€ temperature=0.0 (deterministic, maar conflicted!)

5. GPT-4 Processing:
   â”œâ”€ Read ESS-02: "use 'is een activiteit'"     [+30% confidence]
   â”œâ”€ Read STR-01: "'is een' is fout voorbeeld"  [-20% confidence]
   â”œâ”€ Read ERROR: "'is' is verboden"             [-20% confidence]
   â””â”€ Net: -10% â†’ CHOOSE ALTERNATIVE

6. GPT-4 Output:
   â””â”€ "activiteit waarbij gegevens worden verzameld door directe waarneming"
      (DROPS "is een" to avoid STR-01 conflict)

7. Validation Phase:

   VALIDATOR 1: ESS_02.validate()
   â”œâ”€ Pattern 2 match: "\\b(proces|activiteit)\\b"
   â””â”€ RESULT: âœ… PASS (Pattern 2 voldoet ook)

   VALIDATOR 2: STR_01.validate()
   â”œâ”€ Check: "^is\\b" â†’ NOT FOUND
   â””â”€ RESULT: âœ… PASS (geen "is" start)

   BOTH PASS: âœ… âœ…
   â†’ User gets definitie WITHOUT "is een"
   â†’ ESS-02 mission degraded (15% explicitness loss)</code></pre>

<p>---</p>

<h3>Why This Persists: Feedback Loop Analysis</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     THE CONTRADICTION LOOP                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[STEP 1: Generation]
ESS-02 prompt: "use 'is een activiteit'"
STR-01 prompt: "'is' is forbidden"
â†’ GPT-4: CONFLICT â†’ chooses "activiteit" (no "is een")

[STEP 2: Validation]
ESS-02 validator: "activiteit" â†’ PASS (Pattern 2 matches âœ…)
STR-01 validator: no "is" start â†’ PASS âœ…
â†’ BOTH PASS â†’ No error signal!

[STEP 3: Storage]
Database: stores "activiteit waarbij..." (no "is een")
â†’ 96% of definities use Pattern 2

[STEP 4: Analysis]
Engineer: "Database shows 96% use Pattern 2"
â†’ Conclusion: "Users prefer Pattern 2!"
â†’ Reality: NO! They AVOID Pattern 1 because STR-01 blocks it!

[STEP 5: Reinforcement]
Engineer: "Pattern 2 works fine, no need to fix"
â†’ Contradiction persists
â†’ Loop continues...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHY THE LOOP NEVER BROKE:         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ESS-02 accepts BOTH patterns   â”‚
â”‚    â†’ Pattern 2 fallback works!    â”‚
â”‚ 2. Validation passes for Pattern 2â”‚
â”‚    â†’ No errors visible!           â”‚
â”‚ 3. Database shows 96% Pattern 2   â”‚
â”‚    â†’ "It's working!"              â”‚
â”‚ 4. No user complaints             â”‚
â”‚    â†’ "Why fix what ain't broken?" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BREAKTHROUGH EVENT: DEF-102
â†“
User asks: "Can we drop 'is een' to fix contradiction?"
â†“
Analysis reveals: 96% is AVOIDANCE, not PREFERENCE!
â†“
CONTRADICTION EXPOSED!</code></pre>

<p>---</p>

<h2>ğŸ“Š EVIDENCE SUMMARY</h2>

<h3>Contradictie Bewijsmatrix</h3>

<p>| Evidence Type | Location | Line | Statement | Impact |</p>
<p>|---------------|----------|------|-----------|--------|</p>
<p>| <strong>JSON Config</strong> | ESS-02.json | 16 | <code>"\\b(is een\|betreft een) (proces\|activiteit)\\b"</code> | âœ… Accepts "is een" |</p>
<p>| <strong>JSON Config</strong> | ESS-02.json | 38 | "Observatie is een activiteit waarbij..." | âœ… Good example uses "is een" |</p>
<p>| <strong>JSON Config</strong> | STR-01.json | 8 | <code>"^is\\b"</code> | âŒ Forbids "is" start |</p>
<p>| <strong>JSON Config</strong> | STR-01.json | 21 | "is een maatregel die..." | âŒ Bad example has "is een" |</p>
<p>| <strong>Python Validator</strong> | ESS_02.py | 138 | <code>if pattern.search(d): hits...</code> | âœ… Matches "is een activiteit" |</p>
<p>| <strong>Python Validator</strong> | ESS_02.py | 147 | <code>return (True, ..., 1.0)</code> | âœ… PASS for "is een" |</p>
<p>| <strong>Python Validator</strong> | STR_01.py | 53 | <code>fout_begin = [w for w in beginwoorden if re.match(w, definitie)]</code> | âŒ Catches "^is" |</p>
<p>| <strong>Python Validator</strong> | STR_01.py | 65 | <code>result = f"âŒ STR-01: definitie begint met werkwoord"</code> | âŒ FAIL for "is een" |</p>
<p>| <strong>Prompt Module</strong> | semantic_categorisation_module.py | 140 | <code>"- 'is een activiteit waarbij...'"</code> | âœ… INSTRUCTS to use "is een" |</p>
<p>| <strong>Prompt Module</strong> | semantic_categorisation_module.py | 182 | <code>"- 'is een activiteit waarbij...'"</code> | âœ… PROCES: use "is een" |</p>
<p>| <strong>Prompt Module</strong> | error_prevention_module.py | 147 | <code>"- âŒ Gebruik geen koppelwerkwoord aan het begin ('is'..."</code> | âŒ FORBIDS "is" |</p>
<p>| <strong>Prompt Module</strong> | error_prevention_module.py | 158 | <code>"is",  # forbidden starter</code> | âŒ FORBIDS "is" |</p>
<p>| <strong>Prompt Module</strong> | structure_rules_module.py | 147 | <code>"  âŒ is een maatregel die recidive voorkomt"</code> | âŒ "is een" = bad example |</p>

<p><strong>Total Evidence Items:</strong> 13</p>
<p><strong>Pro "is een":</strong> 5 (38%)</p>
<p><strong>Anti "is een":</strong> 8 (62%)</p>

<p><strong>Net Signal to GPT-4:</strong> -23% confidence for "is een" â†’ <strong>AVOID</strong></p>

<p>---</p>

<h2>ğŸ¯ CONCLUSIE</h2>

<h3>De Contradictie Bestaat op ALLE Niveaus:</h3>

<ol>
<li>**JSON Configuratie:** ESS-02 good examples vs STR-01 forbidden patterns</li>
<li>**Python Validators:** ESS_02 PASS vs STR_01 FAIL voor dezelfde definitie</li>
<li>**Prompt Modules:** Semantic instructs USE vs Error/Structure instructs AVOID</li>
<li>**GPT-4 Runtime:** Conflicting signals â†’ defaults to "safe" Pattern 2</li>
</ol>

<h3>Root Cause:</h3>

<p><strong>GEEN exception mechanisme voor TIER 1 (ESS) regels die TIER 2 (STR) regels moeten overrulen.</strong></p>

<p>STR-01 werd geÃ¯mplementeerd als <strong>absolute regel</strong> zonder bewustzijn van ESS-02's <strong>ontological precision mission</strong> die "is een" vereist voor maximale explicitness.</p>

<h3>Why It Persisted:</h3>

<p>ESS-02's <strong>dual-pattern acceptance</strong> (<code>is een activiteit</code> OR <code>activiteit</code>) creÃ«erde een <strong>silent fallback</strong> die de contradictie maskeerde:</p>
<ul>
<li>GPT-4 gebruikt Pattern 2 â†’ validation PASSES</li>
<li>Database fills with Pattern 2 â†’ looks like "user preference"</li>
<li>No errors â†’ no urgency to fix</li>
<li>Contradiction hides in plain sight for years</li>
</ul>

<h3>The Fix (DEF-102):</h3>

<p><strong>Add TIER 1 exceptions to TIER 2 rules</strong> - explicitly allow ESS-02 ontological markers ("is een activiteit/type/exemplaar/resultaat") to bypass STR-01's "no 'is' start" rule.</p>

<p>---</p>

<p><strong>Next Steps:</strong> Implement DEF-102 5-change plan to resolve contradiction at all 4 levels.</p>

  </div>
</body>
</html>