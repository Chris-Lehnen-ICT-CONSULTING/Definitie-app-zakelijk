<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Startup Performance - Linear Issues Overzicht</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>Startup Performance - Linear Issues Overzicht</h1>

<p><strong>Aangemaakt:</strong> 2025-10-30</p>
<p><strong>Basis:</strong> Multi-agent analyse van startup log (537ms ‚Üí target <200ms)</p>
<p><strong>Analyse documenten:</strong></p>
<ul>
<li>`docs/analyses/STARTUP_PERFORMANCE_ANALYSIS.md`</li>
<li>`docs/analyses/STARTUP_PERFORMANCE_DIAGRAM.md`</li>
</ul>

<p>---</p>

<h2>üìä Overzicht Aangemaakte Issues</h2>

<p><strong>Totaal:</strong> 7 Linear issues</p>
<p><strong>Verdeling:</strong></p>
<ul>
<li>ü•á **Phase 1 (Quick Wins):** 4 issues - HIGH priority, 2.5 uur, -380ms</li>
<li>ü•à **Phase 2 (DRY Cleanup):** 3 issues - MEDIUM priority, 7 uur, -300ms</li>
</ul>

<p><strong>Geschatte totale impact:</strong> 537ms ‚Üí ~160ms (70% verbetering)</p>

<p>---</p>

<h2>ü•á Phase 1: Quick Wins (DO FIRST)</h2>

<h3>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê HIGHEST ROI - Start hier!</h3>

<h4>[DEF-60: Implement true lazy loading for 5 optional services](https://linear.app/definitie-app/issue/DEF-60)</h4>
<ul>
<li>**Priority:** HIGH (2)</li>
<li>**Effort:** 1 uur</li>
<li>**Impact:** -180ms init time, -15MB memory</li>
<li>**Status:** Todo</li>
</ul>

<p><strong>Services om lazy te maken:</strong></p>
<ol>
<li>ModernWebLookupService (alleen bij web lookup enabled)</li>
<li>GPT4SynonymSuggester (alleen bij synonym flow)</li>
<li>ExportService (alleen bij export click)</li>
<li>DataAggregationService (zelden gebruikt)</li>
<li>PerformanceTracker (dev mode only)</li>
</ol>

<p><strong>Implementatie:</strong> <code>@property</code> pattern met lazy initialization</p>

<p>---</p>

<h4>[DEF-61: Merge PromptOrchestrator + Adapter + Builder layers](https://linear.app/definitie-app/issue/DEF-61)</h4>
<ul>
<li>**Priority:** HIGH (2)</li>
<li>**Effort:** 1 uur</li>
<li>**Impact:** -150ms init, -800 lines code</li>
<li>**Status:** Todo</li>
</ul>

<p><strong>Probleem:</strong> 4-layer abstraction voor prompt building</p>
<ul>
<li>PromptOrchestrator (435ms = 85% van bottleneck!)</li>
<li>ModularPromptAdapter</li>
<li>UnifiedPromptBuilder</li>
<li>DocumentProcessor</li>
</ul>

<p><strong>Oplossing:</strong> Merge naar single <code>PromptBuilder</code> class</p>

<p>---</p>

<h4>[DEF-62: Replace 3 Context managers with simple dataclass](https://linear.app/definitie-app/issue/DEF-62)</h4>
<ul>
<li>**Priority:** MEDIUM (3)</li>
<li>**Effort:** 30 minuten</li>
<li>**Impact:** -50ms init, -200 lines code</li>
<li>**Status:** Todo</li>
</ul>

<p><strong>Te mergen:</strong></p>
<ul>
<li>HybridContextManager</li>
<li>ContextManager</li>
<li>ContextStateCleaner</li>
</ul>

<p><strong>Oplossing:</strong> Simple <code>@dataclass DefinitionContext</code></p>

<p>---</p>

<h4>[DEF-66: Fix TabbedInterface cache miss (509ms vs 20ms expected)](https://linear.app/definitie-app/issue/DEF-66)</h4>
<ul>
<li>**Priority:** HIGH (2)</li>
<li>**Effort:** 1 uur (na DEF-60, DEF-61, DEF-62)</li>
<li>**Impact:** Cache miss acceptabel maken (<180ms)</li>
<li>**Status:** Todo</li>
<li>**Blocked by:** DEF-60, DEF-61, DEF-62</li>
</ul>

<p><strong>Probleem:</strong> Log warning over 509ms vs 20ms expected</p>
<p><strong>Root cause:</strong> Cache werkt, maar init is te zwaar (27 services eager)</p>
<p><strong>Oplossing:</strong> Fix cache key stability + reduce init weight via dependencies</p>

<p>---</p>

<h3>üìä Phase 1 Totaal</h3>
<ul>
<li>**Effort:** 2.5 uur (1 middag)</li>
<li>**Impact:** 537ms ‚Üí ~160ms ‚úÖ **MEETS <200ms TARGET**</li>
<li>**Complexity:** 27 ‚Üí 22 services</li>
<li>**Risk:** Low (mechanische refactors)</li>
</ul>

<p><strong>Volgorde:</strong></p>
<ol>
<li>DEF-60 (lazy loading) - 1h</li>
<li>DEF-61 (merge prompt) - 1h</li>
<li>DEF-62 (merge context) - 30min</li>
<li>DEF-66 (fix cache) - 1h (na 1-3)</li>
</ol>

<p>---</p>

<h2>ü•à Phase 2: DRY Cleanup (AFTER Phase 1)</h2>

<h3>‚≠ê‚≠ê‚≠ê‚≠ê CODE QUALITY - Doe alleen als Phase 1 succesvol</h3>

<h4>[DEF-63: Consolidate 3 Definition services (DRY violation)](https://linear.app/definitie-app/issue/DEF-63)</h4>
<ul>
<li>**Priority:** MEDIUM (3)</li>
<li>**Effort:** 3 uur</li>
<li>**Impact:** -80ms init, -600 lines (DRY fix)</li>
<li>**Status:** Todo</li>
</ul>

<p><strong>DRY Violation:</strong> CRUD logic in 3 services:</p>
<ul>
<li>DefinitionOrchestratorV2</li>
<li>DefinitionRepository</li>
<li>DefinitionEditService</li>
</ul>

<p><strong>Oplossing:</strong> Merge naar single <code>DefinitionService</code></p>

<p>---</p>

<h4>[DEF-64: Flatten Manager pattern (5 managers ‚Üí config + dataclasses)](https://linear.app/definitie-app/issue/DEF-64)</h4>
<ul>
<li>**Priority:** MEDIUM (3)</li>
<li>**Effort:** 2 uur</li>
<li>**Impact:** -120ms init, -400 lines</li>
<li>**Status:** Todo</li>
</ul>

<p><strong>Te vereenvoudigen:</strong></p>
<ul>
<li>ConfigManager ‚Üí AppConfig singleton</li>
<li>CachedToetsregelManager ‚Üí RuleCache class method</li>
<li>HybridContextManager ‚Üí dataclass (zie DEF-62)</li>
<li>ContextManager ‚Üí dataclass (zie DEF-62)</li>
<li>SynonymRegistry ‚Üí Dict[str, List[str]]</li>
</ul>

<p>---</p>

<h4>[DEF-65: ServiceContainer slimming (27 ‚Üí 10 core + 5 lazy)](https://linear.app/definitie-app/issue/DEF-65)</h4>
<ul>
<li>**Priority:** LOW (4)</li>
<li>**Effort:** 2 uur</li>
<li>**Impact:** -100ms init, clearer architecture</li>
<li>**Status:** Todo</li>
<li>**Depends on:** DEF-60, DEF-61, DEF-62 (optional: DEF-63, DEF-64)</li>
</ul>

<p><strong>Doel:</strong> 10 core services (altijd geladen) + 5 lazy properties</p>

<p>---</p>

<h3>üìä Phase 2 Totaal</h3>
<ul>
<li>**Effort:** 7 uur (spread over 2-3 weken)</li>
<li>**Impact:** -300ms extra, -1200 lines code</li>
<li>**Complexity:** 8.5/10 ‚Üí 4/10 (solo dev maintainable)</li>
<li>**Risk:** Medium (requires workflow testing)</li>
</ul>

<p><strong>Volgorde:</strong></p>
<ol>
<li>DEF-63 (merge definitions) - 3h, week 1</li>
<li>DEF-64 (flatten managers) - 2h, week 2</li>
<li>DEF-65 (container slim) - 2h, week 3 (co√∂rdinatie task)</li>
</ol>

<p>---</p>

<h2>üéØ Aanbevolen Implementatie Strategie</h2>

<h3>Week 1: Phase 1 (Performance Fix) ‚úÖ CRITICAL</h3>
<p><strong>Doel:</strong> Haal <200ms target</p>

<p><strong>Maandag middag (2.5 uur):</strong></p>
<ul>
<li>[ ] DEF-60: Lazy loading (1h)</li>
<li>[ ] DEF-61: Merge prompt layers (1h)</li>
<li>[ ] DEF-62: Merge context (30min)</li>
</ul>

<p><strong>Maandag eind:</strong> Test, meet performance (moet ~160ms zijn)</p>

<p><strong>Dinsdag ochtend (1 uur):</strong></p>
<ul>
<li>[ ] DEF-66: Fix cache stability (1h)</li>
</ul>

<p><strong>Dinsdag middag:</strong> Final testing, merge</p>

<p><strong>Success criteria:</strong></p>
<ul>
<li>‚úÖ Startup < 200ms</li>
<li>‚úÖ Alle UI tabs werken</li>
<li>‚úÖ Tests groen</li>
</ul>

<p>---</p>

<h3>Week 2-4: Phase 2 (Code Quality) ‚ö° OPTIONAL</h3>
<p><strong>Doel:</strong> DRY compliance, maintainability</p>

<p><strong>Alleen doen als:</strong></p>
<ul>
<li>‚úÖ Phase 1 succesvol (< 200ms behaald)</li>
<li>‚úÖ Geen blocker bugs</li>
<li>‚úÖ Tijd over voor refactoring</li>
</ul>

<p><strong>Week 2:</strong></p>
<ul>
<li>[ ] DEF-63: Merge definitions (3h, over 2 dagen)</li>
</ul>

<p><strong>Week 3:</strong></p>
<ul>
<li>[ ] DEF-64: Flatten managers (2h, 1 middag)</li>
</ul>

<p><strong>Week 4:</strong></p>
<ul>
<li>[ ] DEF-65: Container cleanup (2h, co√∂rdinatie)</li>
</ul>

<p>---</p>

<h2>üìà Verwachte Resultaten</h2>

<h3>Na Phase 1 (Week 1)</h3>
<pre><code>BEFORE:
- Startup: 537ms
- Services: 27 eager loaded
- TabbedInterface: 509ms (25x too slow)
- Complexity: 8.5/10

AFTER PHASE 1:
- Startup: ~160ms ‚úÖ (70% sneller)
- Services: 10 core + 5 lazy
- TabbedInterface: &lt;180ms ‚úÖ (9x verbetering)
- Complexity: 7/10</code></pre>

<h3>Na Phase 2 (Week 2-4) - OPTIONAL</h3>
<pre><code>AFTER PHASE 1+2:
- Startup: ~100ms ‚úÖ‚úÖ (81% sneller)
- Services: 10 core + 5 lazy (geconsolideerd)
- Lines removed: -2000
- Complexity: 4/10 ‚úÖ (solo dev friendly)
- DRY violations: FIXED</code></pre>

<p>---</p>

<h2>üö® Dependencies & Blockers</h2>

<h3>Critical Path (Phase 1)</h3>
<pre><code>DEF-60 (lazy) ‚îÄ‚îÄ‚îê
                 ‚îú‚îÄ‚Üí DEF-66 (cache fix)
DEF-61 (prompt)‚îÄ‚î§
                 ‚îÇ
DEF-62 (context)‚îò</code></pre>

<p><strong>DEF-66 is blocked</strong> totdat DEF-60, DEF-61, DEF-62 compleet zijn!</p>

<h3>Phase 2 Dependencies</h3>
<pre><code>DEF-60 ‚îÄ‚îÄ‚îê
DEF-61 ‚îÄ‚îÄ‚î§
DEF-62 ‚îÄ‚îÄ‚îº‚îÄ‚Üí DEF-65 (container cleanup)
DEF-63 ‚îÄ‚îÄ‚î§
DEF-64 ‚îÄ‚îÄ‚îò</code></pre>

<p><strong>DEF-65 co√∂rdineert</strong> alle andere improvements.</p>

<p>---</p>

<h2>üìö Referentie Documenten</h2>

<h3>Analyse Documenten</h3>
<ul>
<li>**`docs/analyses/STARTUP_PERFORMANCE_ANALYSIS.md`**</li>
<p>  Technische analyse met timing breakdown en root cause</p>
</ul>

<ul>
<li>**`docs/analyses/STARTUP_PERFORMANCE_DIAGRAM.md`**</li>
<p>  Visual flowcharts en performance comparison</p>
</ul>

<h3>Multi-Agent Rapporten</h3>
<ul>
<li>**Debug Specialist:** Performance profiling (435ms PromptOrchestrator)</li>
<li>**Code Reviewer:** Architecture quality score (6.5/10)</li>
<li>**Code Simplifier:** Complexity assessment (8.5/10 ‚Üí 4/10 target)</li>
</ul>

<h3>Context</h3>
<ul>
<li>**UNIFIED_INSTRUCTIONS.md:** Approval ladder, workflow selection</li>
<li>**CLAUDE.md:** Performance goals (<200ms UI), US-202 fixes</li>
<li>**US-202:** ServiceContainer singleton fix (Oct 7, 2025)</li>
</ul>

<p>---</p>

<h2>‚úÖ Success Metrics</h2>

<h3>Phase 1 (Performance) - MUST ACHIEVE</h3>
<ul>
<li>[ ] Startup time < 200ms (current: 537ms)</li>
<li>[ ] TabbedInterface < 180ms on cache miss (current: 509ms)</li>
<li>[ ] Cache hit rate > 90%</li>
<li>[ ] All 4 UI tabs functional</li>
<li>[ ] Tests passing (no regressions)</li>
<li>[ ] Memory usage < 60MB at startup (current: ~70MB)</li>
</ul>

<h3>Phase 2 (Quality) - NICE TO HAVE</h3>
<ul>
<li>[ ] Code complexity ‚â§ 4/10</li>
<li>[ ] No DRY violations in definition/context services</li>
<li>[ ] < 10 core services in container</li>
<li>[ ] Lines of code reduced by ~2000</li>
<li>[ ] Solo dev: can reason about architecture in < 5 min</li>
</ul>

<p>---</p>

<h2>üéØ Next Actions</h2>

<p><strong>Voor implementatie:</strong></p>
<ol>
<li>Review deze issue lijst</li>
<li>Confirm prioritering (Phase 1 first? Skip Phase 2?)</li>
<li>Start met DEF-60 (hoogste ROI, 1 uur)</li>
<li>Measure baseline performance (current 537ms)</li>
<li>Implement DEF-60, DEF-61, DEF-62 (2.5h blok)</li>
<li>Measure improvement (target: ~160ms)</li>
<li>DEF-66 als final polish</li>
</ol>

<p><strong>Hulp nodig?</strong></p>
<ul>
<li>Code reviews per issue beschikbaar</li>
<li>Detailed implementation patches op verzoek</li>
<li>Testing strategy per issue</li>
<li>Performance regression tests</li>
</ul>

<p>---</p>

<p><strong>Status:</strong> 7 issues klaar voor implementatie</p>
<p><strong>Estimated total effort:</strong> 9.5 uur (2.5h Phase 1 + 7h Phase 2)</p>
<p><strong>Expected improvement:</strong> 70-81% sneller startup</p>
<p><strong>Risk level:</strong> Low (Phase 1), Medium (Phase 2)</p>

  </div>
</body>
</html>