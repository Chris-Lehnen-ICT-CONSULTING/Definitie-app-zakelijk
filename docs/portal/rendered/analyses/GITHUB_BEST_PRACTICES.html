<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GitHub Best Practices & Workflow Optimization</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>GitHub Best Practices & Workflow Optimization</h1>

<p><strong>Date:</strong> 2025-10-19  </p>
<p><strong>Context:</strong> Post Phase 1 CI Fixes - Recommendations for improved GitHub workflows  </p>
<p><strong>Related:</strong> CI_FAILURES_ANALYSIS.md</p>

<p>---</p>

<h2>üéØ Executive Summary</h2>

<p>After successfully fixing CI failures in Phase 1, this document provides recommendations for leveraging GitHub more effectively to prevent future issues and improve development workflow.</p>

<p><strong>Current State:</strong></p>
<ul>
<li>‚úÖ 4/8 workflows passing (Security, CI, Quality Gates, No root-level DB files)</li>
<li>‚úÖ Good PR template with comprehensive checklists</li>
<li>‚úÖ Multiple specialized workflows for different checks</li>
<li>‚ö†Ô∏è Some workflows failing (pre-existing, not blocking)</li>
</ul>

<p><strong>Improvement Areas:</strong></p>
<ol>
<li>Branch protection rules</li>
<li>Required status checks</li>
<li>GitHub Actions optimization</li>
<li>PR workflow enhancements</li>
<li>Issue templates and automation</li>
<li>Dependency management</li>
</ol>

<p>---</p>

<h2>üìã Recommendations by Priority</h2>

<h3>üî¥ HIGH Priority (Immediate Action)</h3>

<h4>1. Branch Protection Rules</h4>
<p><strong>Status:</strong> Not configured or too lenient  </p>
<p><strong>Impact:</strong> Prevents broken code from reaching main  </p>
<p><strong>Effort:</strong> 30 minutes</p>

<p><strong>Action Items:</strong></p>
<ul>
<li>[ ] Enable branch protection for `main`</li>
<li>[ ] Require pull request reviews before merging (minimum 1)</li>
<li>[ ] Require status checks to pass before merging</li>
<li>[ ] Dismiss stale pull request approvals when new commits are pushed</li>
<li>[ ] Include administrators in restrictions (prevents admin bypass)</li>
</ul>

<p><strong>Configuration:</strong></p>
<pre><code># Settings ‚Üí Branches ‚Üí Add rule for 'main'
Branch name pattern: main

Required checks:
  ‚úì CI
  ‚úì Security / Secret Scan (gitleaks)
  ‚úì Security / Dependency Audit (pip-audit)
  ‚úì Quality Gates
  ‚úì No root-level DB files

Optional (not blocking):
  ‚ö™ Tests (until fixed in Phase 2)
  ‚ö™ Contract Tests (until fixed)
  ‚ö™ Coverage Badge (until fixed)

Settings:
  ‚úì Require pull request reviews (1)
  ‚úì Dismiss stale reviews
  ‚úì Require conversation resolution
  ‚úì Require signed commits (recommended)
  ‚úì Include administrators
  ‚úì Allow force pushes: NO
  ‚úì Allow deletions: NO</code></pre>

<p>---</p>

<h4>2. Required Status Checks Configuration</h4>
<p><strong>Status:</strong> Not properly configured  </p>
<p><strong>Impact:</strong> Allows merging with failing checks  </p>
<p><strong>Effort:</strong> 15 minutes</p>

<p><strong>Action:</strong></p>
<p>Configure which CI checks MUST pass before merge:</p>

<p><strong>Critical (Must Pass):</strong></p>
<ul>
<li>‚úÖ Security / Secret Scan (gitleaks)</li>
<li>‚úÖ Security / Dependency Audit (pip-audit)</li>
<li>‚úÖ CI / Run Grep Gate</li>
<li>‚úÖ CI / Run smoke test</li>
<li>‚úÖ Quality Gates</li>
<li>‚úÖ No root-level DB files</li>
</ul>

<p><strong>Informational (Can fail initially):</strong></p>
<ul>
<li>‚ö™ Tests (until Phase 2 complete)</li>
<li>‚ö™ Contract Tests (until fixed)</li>
<li>‚ö™ Coverage Badge (until improved)</li>
<li>‚ö™ EPIC-010 Legacy Pattern Gates (until fixed)</li>
</ul>

<p>---</p>

<h4>3. Dependabot Configuration</h4>
<p><strong>Status:</strong> Not configured  </p>
<p><strong>Impact:</strong> Manual dependency updates, security lag  </p>
<p><strong>Effort:</strong> 20 minutes</p>

<p><strong>Action:</strong> Create <code>.github/dependabot.yml</code></p>

<pre><code>version: 2
updates:
  # Python dependencies
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "automated"
    reviewers:
      - "ChrisLehnen"
    commit-message:
      prefix: "build(deps)"
      include: "scope"
    
  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    labels:
      - "dependencies"
      - "github-actions"
    commit-message:
      prefix: "ci(deps)"</code></pre>

<p><strong>Benefits:</strong></p>
<ul>
<li>‚úÖ Automatic security updates</li>
<li>‚úÖ Weekly dependency checks</li>
<li>‚úÖ Grouped PRs for easier review</li>
<li>‚úÖ Conventional commit messages</li>
<li>‚úÖ Auto-assignment to reviewer</li>
</ul>

<p>---</p>

<h3>üü° MEDIUM Priority (Next Sprint)</h3>

<h4>4. Issue Templates</h4>
<p><strong>Status:</strong> Not present  </p>
<p><strong>Impact:</strong> Inconsistent bug reports, missing information  </p>
<p><strong>Effort:</strong> 1 hour</p>

<p><strong>Action:</strong> Create <code>.github/ISSUE_TEMPLATE/</code></p>

<p><strong>Templates to Add:</strong></p>
<ol>
<li>`bug_report.yml` - Structured bug reports</li>
<li>`feature_request.yml` - Feature proposals</li>
<li>`test_failure.yml` - CI/Test failure reports</li>
<li>`security.yml` - Security vulnerability reports</li>
<li>`config.yml` - Template chooser configuration</li>
</ol>

<p><strong>Example: Bug Report Template</strong></p>
<pre><code>name: üêõ Bug Report
description: File a bug report
title: "[Bug]: "
labels: ["bug", "needs-triage"]
assignees:
  - ChrisLehnen
body:
  - type: markdown
    attributes:
      value: |
        Thanks for taking the time to fill out this bug report!
  
  - type: textarea
    id: what-happened
    attributes:
      label: What happened?
      description: Also tell us, what did you expect to happen?
      placeholder: Tell us what you see!
    validations:
      required: true
  
  - type: dropdown
    id: version
    attributes:
      label: Version
      description: What version are you running?
      options:
        - main (latest)
        - develop
        - specific tag
    validations:
      required: true
  
  - type: textarea
    id: logs
    attributes:
      label: Relevant log output
      description: Please copy and paste any relevant log output
      render: shell</code></pre>

<p>---</p>

<h4>5. GitHub Actions Optimization</h4>
<p><strong>Status:</strong> Multiple workflows, some redundancy  </p>
<p><strong>Impact:</strong> Longer CI times, wasted compute  </p>
<p><strong>Effort:</strong> 2-3 hours</p>

<p><strong>Recommendations:</strong></p>

<p><strong>A. Workflow Consolidation</strong></p>
<ul>
<li>Consider merging related workflows</li>
<li>Use matrix strategy for multiple Python versions</li>
<li>Share job outputs between workflows</li>
</ul>

<p><strong>B. Caching Strategy</strong></p>
<pre><code>- uses: actions/cache@v4
  with:
    path: |
      ~/.cache/pip
      ~/.cache/pre-commit
    key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements*.txt') }}
    restore-keys: |
      ${{ runner.os }}-pip-</code></pre>

<p><strong>C. Conditional Execution</strong></p>
<pre><code># Only run tests on code changes
on:
  push:
    paths:
      - 'src/**'
      - 'tests/**'
      - 'requirements*.txt'
  pull_request:
    paths:
      - 'src/**'
      - 'tests/**'</code></pre>

<p><strong>D. Fail Fast Strategy</strong></p>
<pre><code>jobs:
  quick-checks:
    runs-on: ubuntu-latest
    steps:
      - name: Security Scan
      - name: Lint
      - name: Type Check
  
  slow-tests:
    needs: quick-checks  # Only run if quick checks pass
    runs-on: ubuntu-latest</code></pre>

<p>---</p>

<h4>6. PR Automation</h4>
<p><strong>Status:</strong> Manual process  </p>
<p><strong>Impact:</strong> Inconsistent reviews, forgotten steps  </p>
<p><strong>Effort:</strong> 2 hours</p>

<p><strong>Actions to Add:</strong></p>

<p><strong>A. Auto-labeling</strong></p>
<pre><code># .github/labeler.yml
'type: documentation':
  - docs/**/*
  - '**/*.md'

'type: tests':
  - tests/**/*
  - '**/test_*.py'

'type: ci':
  - .github/**/*
  - scripts/**/*

'area: security':
  - '**/security/**'
  - .gitleaks.toml
  - requirements*.txt</code></pre>

<p><strong>B. Size Labeling</strong></p>
<pre><code># Small: &lt; 100 lines changed
# Medium: 100-500 lines
# Large: 500-1000 lines
# X-Large: &gt; 1000 lines</code></pre>

<p><strong>C. Stale PR Management</strong></p>
<pre><code># .github/workflows/stale.yml
name: 'Close stale PRs'
on:
  schedule:
    - cron: '0 0 * * *'

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          days-before-stale: 30
          days-before-close: 7
          stale-pr-message: 'This PR is stale - any updates?'</code></pre>

<p>---</p>

<h3>üü¢ LOW Priority (Future Improvements)</h3>

<h4>7. GitHub Insights & Metrics</h4>
<p><strong>Effort:</strong> Ongoing</p>

<p><strong>Enable/Monitor:</strong></p>
<ul>
<li>Pulse (weekly activity)</li>
<li>Contributors graph</li>
<li>Traffic (clones, views)</li>
<li>Dependency graph</li>
<li>Security advisories</li>
</ul>

<p><strong>GitHub Actions Insights:</strong></p>
<ul>
<li>Workflow run times</li>
<li>Success/failure rates</li>
<li>Compute usage</li>
</ul>

<p>---</p>

<h4>8. Release Automation</h4>
<p><strong>Status:</strong> Manual releases  </p>
<p><strong>Effort:</strong> 3-4 hours</p>

<p><strong>Recommendations:</strong></p>
<ul>
<li>Semantic versioning</li>
<li>Auto-generated changelogs</li>
<li>Release notes from PR descriptions</li>
<li>Tag-based deployments</li>
</ul>

<pre><code># .github/workflows/release.yml
name: Release
on:
  push:
    tags:
      - 'v*.*.*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Create Release
        uses: actions/create-release@v1
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          draft: false
          prerelease: false</code></pre>

<p>---</p>

<h4>9. Project Boards</h4>
<p><strong>Status:</strong> Not utilized  </p>
<p><strong>Effort:</strong> Setup 2 hours, ongoing maintenance</p>

<p><strong>Recommended Boards:</strong></p>
<ol>
<li>**Sprint Board** - Current work in progress</li>
<li>**Backlog** - Prioritized future work</li>
<li>**CI/CD Issues** - Technical debt tracking</li>
<li>**Security** - Vulnerability tracking</li>
</ol>

<p><strong>Automation:</strong></p>
<ul>
<li>Auto-add issues to project</li>
<li>Auto-move based on labels</li>
<li>Auto-close when PR merged</li>
</ul>

<p>---</p>

<h2>üéØ Quick Wins (Do This First!)</h2>

<h3>Week 1: Essential Setup</h3>
<p><strong>Estimated Time:</strong> 2 hours</p>

<ol>
<li>**Branch Protection** (30 min)</li>
</ol>
<ul>
<li>  - Enable for `main` branch</li>
<li>  - Require PR reviews</li>
<li>  - Configure required status checks</li>
</ul>

<ol>
<li>**Dependabot** (20 min)</li>
</ol>
<ul>
<li>  - Create `dependabot.yml`</li>
<li>  - Configure Python + GitHub Actions</li>
<li>  - Set weekly schedule</li>
</ul>

<ol>
<li>**Issue Templates** (1 hour)</li>
</ol>
<ul>
<li>  - Bug report template</li>
<li>  - Feature request template</li>
<li>  - Security issue template</li>
</ul>

<ol>
<li>**Auto-labeling** (10 min)</li>
</ol>
<ul>
<li>  - Create `labeler.yml`</li>
<li>  - Add workflow to auto-apply labels</li>
</ul>

<p>---</p>

<h2>üìä Success Metrics</h2>

<p>Track these metrics to measure improvement:</p>

<p><strong>CI Health:</strong></p>
<ul>
<li>‚úÖ % of workflows passing (target: 80%+)</li>
<li>‚úÖ Average CI run time (target: < 5 minutes)</li>
<li>‚úÖ Failed builds per week (target: < 5)</li>
</ul>

<p><strong>PR Quality:</strong></p>
<ul>
<li>‚úÖ Average PR size (target: < 500 lines)</li>
<li>‚úÖ Time to first review (target: < 24 hours)</li>
<li>‚úÖ Time to merge (target: < 48 hours)</li>
<li>‚úÖ PR description completeness (target: 100%)</li>
</ul>

<p><strong>Security:</strong></p>
<ul>
<li>‚úÖ Time to patch vulnerabilities (target: < 7 days)</li>
<li>‚úÖ Dependencies up-to-date % (target: 90%+)</li>
<li>‚úÖ Security scans passing (target: 100%)</li>
</ul>

<p><strong>Developer Experience:</strong></p>
<ul>
<li>‚úÖ Issues with proper templates (target: 80%+)</li>
<li>‚úÖ PRs with proper labels (target: 90%+)</li>
<li>‚úÖ Stale PRs closed (target: < 5 open)</li>
</ul>

<p>---</p>

<h2>üîó Resources</h2>

<p><strong>GitHub Documentation:</strong></p>
<ul>
<li>[Branch Protection Rules](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches/about-protected-branches)</li>
<li>[Required Status Checks](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/collaborating-on-repositories-with-code-quality-features/about-status-checks)</li>
<li>[Dependabot Configuration](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file)</li>
<li>[Issue Templates](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository)</li>
<li>[Actions Caching](https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows)</li>
</ul>

<p><strong>Best Practices:</strong></p>
<ul>
<li>[Conventional Commits](https://www.conventionalcommits.org/)</li>
<li>[Semantic Versioning](https://semver.org/)</li>
<li>[Keep a Changelog](https://keepachangelog.com/)</li>
</ul>

<p>---</p>

<h2>üìù Next Actions</h2>

<p><strong>Immediate (This Week):</strong></p>
<ol>
<li>[ ] Configure branch protection for `main`</li>
<li>[ ] Set up Dependabot</li>
<li>[ ] Create bug report issue template</li>
<li>[ ] Add auto-labeling workflow</li>
</ol>

<p><strong>Short-term (Next Sprint):</strong></p>
<ol>
<li>[ ] Optimize CI workflows with caching</li>
<li>[ ] Add remaining issue templates</li>
<li>[ ] Set up PR size labeling</li>
<li>[ ] Configure stale PR automation</li>
</ol>

<p><strong>Long-term (Next Quarter):</strong></p>
<ol>
<li>[ ] Implement release automation</li>
<li>[ ] Set up GitHub project boards</li>
<li>[ ] Configure advanced metrics tracking</li>
<li>[ ] Document all GitHub workflows</li>
</ol>

<p>---</p>

<p><strong>Last Updated:</strong> 2025-10-19  </p>
<p><strong>Next Review:</strong> After Phase 2 completion</p>


  </div>
</body>
</html>