<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DEF-54: Quick Decision Matrix - Which Plan Should You Use?</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">â† Terug naar Portal</a>
    <h1>DEF-54: Quick Decision Matrix - Which Plan Should You Use?</h1>

<p><strong>Purpose</strong>: 5-minute decision guide to choose your refactoring approach</p>

<p>---</p>

<h2>30-Second Decision Tree</h2>

<pre><code>START HERE
    â”‚
    â”œâ”€ Do you have &gt;6 days available?
    â”‚   â”‚
    â”‚   â”œâ”€ YES â†’ Go to "Safety vs Speed" section
    â”‚   â””â”€ NO â†’ Must finish in 5 days?
    â”‚       â”‚
    â”‚       â”œâ”€ YES â†’ Use ACCELERATED HYBRID (4-5 days)
    â”‚       â””â”€ NO â†’ Defer refactor until you have time
    â”‚
    â””â”€ Are you new to this codebase?
        â”‚
        â”œâ”€ YES â†’ Use SIMPLIFIED PLAN (6-8 days, maximum safety)
        â””â”€ NO â†’ Use HYBRID PLAN (5-7 days, adaptive)</code></pre>

<p>---</p>

<h2>Quick Comparison Table</h2>

<p>| Factor | Original | Simplified | Hybrid | Accelerated |</p>
<p>|--------|----------|------------|--------|-------------|</p>
<p>| <strong>Timeline</strong> | 5 days | 6-8 days | 5-7 days | 4-5 days |</p>
<p>| <strong>Phases</strong> | 5 | 10 | 7-8 | 6 |</p>
<p>| <strong>Risk Level</strong> | MEDIUM | LOW-MEDIUM | MEDIUM | MEDIUM-HIGH |</p>
<p>| <strong>Rollback</strong> | Git only | Flag + Git | Flag + Git | Git only |</p>
<p>| <strong>Testing</strong> | After | Test-first | Mixed | After |</p>
<p>| <strong>Best For</strong> | Experts | Beginners | Most people | Time-critical |</p>

<p>---</p>

<h2>Detailed Profiles</h2>

<h3>Profile 1: "Safety First" â†’ SIMPLIFIED PLAN</h3>

<p><strong>Choose if you are</strong>:</p>
<ul>
<li>âœ… New to this codebase (< 3 months experience)</li>
<li>âœ… Not confident with git (prefer simple rollback)</li>
<li>âœ… Value safety over speed</li>
<li>âœ… Have 6-8 days available</li>
<li>âœ… Solo developer (no team to help debug)</li>
</ul>

<p><strong>You get</strong>:</p>
<ul>
<li>âœ… 10 small phases (~150 lines each)</li>
<li>âœ… Feature flag for instant rollback</li>
<li>âœ… Test-first approach (high confidence)</li>
<li>âœ… Detailed documentation inline</li>
</ul>

<p><strong>Timeline</strong>: 6-8 days</p>
<p><strong>Risk</strong>: LOW-MEDIUM</p>
<p><strong>Confidence</strong>: HIGH</p>

<p>---</p>

<h3>Profile 2: "Balanced Approach" â†’ HYBRID PLAN (RECOMMENDED)</h3>

<p><strong>Choose if you are</strong>:</p>
<ul>
<li>âœ… Familiar with codebase (3-6 months experience)</li>
<li>âœ… Comfortable with git</li>
<li>âœ… Want safety nets but value speed</li>
<li>âœ… Have 5-7 days available</li>
<li>âœ… Willing to adapt mid-refactor</li>
</ul>

<p><strong>You get</strong>:</p>
<ul>
<li>âœ… Start with safety (Phases 0-3c incremental)</li>
<li>âœ… Feature flag until Phase 7</li>
<li>âœ… Accelerate when confident (combine later phases)</li>
<li>âœ… Best of both worlds</li>
</ul>

<p><strong>Strategy</strong>:</p>
<pre><code>Phases 0-3c: Simplified approach (establish safety)
  â†’ Evaluate confidence after Phase 3c
    â†’ High confidence? Combine 6a-6c into single Phase 6 (save 1 day)
    â†’ Low confidence? Stay incremental

Phases 4-9: Adaptive (adjust based on experience)</code></pre>

<p><strong>Timeline</strong>: 5-7 days (flexible)</p>
<p><strong>Risk</strong>: MEDIUM (with safeguards)</p>
<p><strong>Confidence</strong>: MEDIUM-HIGH</p>

<p>---</p>

<h3>Profile 3: "Need Speed" â†’ ACCELERATED HYBRID</h3>

<p><strong>Choose if you are</strong>:</p>
<ul>
<li>âœ… Very familiar with codebase (>6 months)</li>
<li>âœ… Expert with git</li>
<li>âœ… Have excellent test coverage (>80%)</li>
<li>âœ… **Must finish in 4-5 days**</li>
<li>âœ… Willing to accept higher risk</li>
</ul>

<p><strong>You get</strong>:</p>
<ul>
<li>âœ… Combine Phases 3a-3c â†’ Phase 3 (save 1 day)</li>
<li>âœ… Combine Phases 6a-6c â†’ Phase 6 (save 1 day)</li>
<li>âœ… Skip Phase 5 (keep conversions, save 1 day)</li>
<li>âœ… Feature flag for safety net</li>
</ul>

<p><strong>Modifications</strong>:</p>
<pre><code>Original 10 phases â†’ 6 phases:
  Phase 0: Schema (0.5d)
  Phase 1: Feature Flag (0.5d)
  Phase 2: Tests (1d)
  Phase 3: All CRUD + Duplicates + Status (2d) â† Combined
  Phase 4: Voorbeelden (1d)
  [SKIP Phase 5: Conversions]
  Phase 6: All Callsites (1d) â† Combined
  Phase 7: Delete Legacy (0.5d)
  [SKIP Phases 8-9: Code Quality + Docs]</code></pre>

<p><strong>Timeline</strong>: 4-5 days</p>
<p><strong>Risk</strong>: MEDIUM-HIGH</p>
<p><strong>Confidence</strong>: MEDIUM</p>

<p>---</p>

<h3>Profile 4: "Maximum Safety" â†’ CONSERVATIVE SIMPLIFIED</h3>

<p><strong>Choose if you are</strong>:</p>
<ul>
<li>âœ… New to Python/SQLite</li>
<li>âœ… Risk-averse (can't afford downtime)</li>
<li>âœ… Learning the codebase</li>
<li>âœ… Have 8-10 days available</li>
<li>âœ… Want extensive testing</li>
</ul>

<p><strong>You get</strong>:</p>
<ul>
<li>âœ… All 10 phases (no shortcuts)</li>
<li>âœ… Feature flag kept permanently</li>
<li>âœ… Extra manual testing (30 min/phase)</li>
<li>âœ… AI code review after each phase</li>
<li>âœ… Detailed documentation</li>
</ul>

<p><strong>Modifications</strong>:</p>
<pre><code>Simplified plan + Extra steps:
  After each phase:
    1. Run unit tests (10 min)
    2. Run integration tests (10 min)
    3. Manual smoke tests (10 min)
    4. AI code review (10 min)
    5. Update documentation (10 min)
  Total: ~50 min overhead per phase</code></pre>

<p><strong>Timeline</strong>: 8-10 days</p>
<p><strong>Risk</strong>: LOW</p>
<p><strong>Confidence</strong>: VERY HIGH</p>

<p>---</p>

<h2>Feature Comparison Matrix</h2>

<p>| Feature | Original | Simplified | Hybrid | Accelerated | Conservative |</p>
<p>|---------|----------|------------|--------|-------------|--------------|</p>
<p>| <strong>Feature Flag</strong> | âŒ | âœ… | âœ… | âœ… | âœ… (permanent) |</p>
<p>| <strong>Test-First</strong> | âŒ | âœ… | âš ï¸ Mixed | âŒ | âœ… + Extra |</p>
<p>| <strong>Schema Phase</strong> | âŒ | âœ… | âœ… | âœ… | âœ… |</p>
<p>| <strong>Incremental CRUD</strong> | âŒ | âœ… | âœ… | âŒ | âœ… |</p>
<p>| <strong>Batched Callsites</strong> | âŒ | âœ… | âš ï¸ Optional | âŒ | âœ… |</p>
<p>| <strong>Code Quality Phase</strong> | âŒ | âœ… | âš ï¸ Optional | âŒ | âœ… |</p>
<p>| <strong>Documentation Phase</strong> | âœ… (after) | âœ… (inline) | âœ… (inline) | âŒ | âœ… (inline + extra) |</p>
<p>| <strong>AI Review</strong> | âŒ | âŒ | âŒ | âŒ | âœ… |</p>

<p><strong>Legend</strong>: âœ… Included | âŒ Not included | âš ï¸ Optional/Conditional</p>

<p>---</p>

<h2>Risk vs Speed Trade-off</h2>

<pre><code>HIGH RISK                                 LOW RISK
    â”‚                                         â”‚
    â”‚  Accelerated (4-5d)                    â”‚
    â”‚         â”‚                               â”‚
    â”‚         â”‚  Original (5d)                â”‚
    â”‚         â”‚      â”‚                        â”‚
    â”‚         â”‚      â”‚  Hybrid (5-7d)         â”‚
    â”‚         â”‚      â”‚       â”‚                â”‚
    â”‚         â”‚      â”‚       â”‚  Simplified (6-8d)
    â”‚         â”‚      â”‚       â”‚       â”‚        â”‚
    â”‚         â”‚      â”‚       â”‚       â”‚  Conservative (8-10d)
    â”‚         â”‚      â”‚       â”‚       â”‚        â”‚
    â–¼         â–¼      â–¼       â–¼       â–¼        â–¼
FAST â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º SLOW</code></pre>

<p><strong>Sweet Spot</strong>: Hybrid (5-7 days, MEDIUM risk)</p>

<p>---</p>

<h2>Rollback Capability Comparison</h2>

<p>| Plan | Rollback Method | Time to Rollback | Complexity |</p>
<p>|------|----------------|------------------|------------|</p>
<p>| <strong>Original</strong> | Git revert | 5-10 minutes | Medium (git expertise) |</p>
<p>| <strong>Simplified</strong> | Feature flag | 30 seconds | Low (env var) |</p>
<p>| <strong>Hybrid</strong> | Feature flag (until P7) | 30 sec â†’ 5 min | Low â†’ Medium |</p>
<p>| <strong>Accelerated</strong> | Feature flag (until P7) | 30 sec â†’ 5 min | Low â†’ Medium |</p>
<p>| <strong>Conservative</strong> | Feature flag (permanent) | 30 seconds | Low (always) |</p>

<p><strong>Recommendation</strong>: Any plan with feature flag wins here.</p>

<p>---</p>

<h2>When to Use Each Plan</h2>

<h3>Use ORIGINAL Plan When:</h3>
<ul>
<li>âŒ **NOT RECOMMENDED** - Simplified/Hybrid are strictly better</li>
<li>âš ï¸ Only if you already started with original plan and can't switch</li>
</ul>

<h3>Use SIMPLIFIED Plan When:</h3>
<ul>
<li>âœ… Learning the codebase</li>
<li>âœ… First major refactor</li>
<li>âœ… Want maximum safety</li>
<li>âœ… Have 6-8 days available</li>
<li>âœ… Solo developer (no backup)</li>
</ul>

<h3>Use HYBRID Plan When: (RECOMMENDED)</h3>
<ul>
<li>âœ… **Most common scenario**</li>
<li>âœ… Familiar with codebase</li>
<li>âœ… Want balance of safety and speed</li>
<li>âœ… Have 5-7 days available</li>
<li>âœ… Willing to adapt mid-refactor</li>
</ul>

<h3>Use ACCELERATED Plan When:</h3>
<ul>
<li>âœ… Time-critical deadline</li>
<li>âœ… Expert in codebase</li>
<li>âœ… Excellent test coverage</li>
<li>âœ… Can only spare 4-5 days</li>
<li>âš ï¸ Accept higher risk</li>
</ul>

<h3>Use CONSERVATIVE Plan When:</h3>
<ul>
<li>âœ… Learning Python/SQLite</li>
<li>âœ… Risk-averse environment</li>
<li>âœ… Can't afford downtime</li>
<li>âœ… Have 8-10 days available</li>
<li>âœ… Want extensive testing</li>
</ul>

<p>---</p>

<h2>Quick Wins Comparison</h2>

<p><strong>All plans include these quick wins</strong>:</p>
<ul>
<li>âœ… Remove 787 lines of duplication (26% reduction)</li>
<li>âœ… Eliminate wrapper complexity</li>
<li>âœ… Single source of truth for persistence</li>
</ul>

<p><strong>Only Simplified/Hybrid/Conservative include</strong>:</p>
<ul>
<li>âœ… Feature flag for instant rollback</li>
<li>âœ… Test-first approach</li>
<li>âœ… Incremental CRUD migration</li>
<li>âœ… Batched callsite updates</li>
</ul>

<p><strong>Only Conservative includes</strong>:</p>
<ul>
<li>âœ… Permanent feature flag (emergency rollback)</li>
<li>âœ… AI code review per phase</li>
<li>âœ… Extra manual testing</li>
</ul>

<p>---</p>

<h2>Decision Worksheet</h2>

<p><strong>Answer these questions to find your plan</strong>:</p>

<ol>
<li>**How many days do you have?**</li>
</ol>
<ul>
<li>  - [ ] 4-5 days â†’ Accelerated</li>
<li>  - [ ] 5 days exactly â†’ Original or Hybrid</li>
<li>  - [ ] 6-8 days â†’ Simplified or Hybrid</li>
<li>  - [ ] 8-10 days â†’ Conservative</li>
</ul>

<ol>
<li>**What's your codebase familiarity?**</li>
</ol>
<ul>
<li>  - [ ] New (<3 months) â†’ Simplified or Conservative</li>
<li>  - [ ] Familiar (3-6 months) â†’ Hybrid</li>
<li>  - [ ] Expert (>6 months) â†’ Accelerated or Hybrid</li>
</ul>

<ol>
<li>**What's your git comfort level?**</li>
</ol>
<ul>
<li>  - [ ] Beginner â†’ Simplified or Conservative (feature flag)</li>
<li>  - [ ] Intermediate â†’ Hybrid</li>
<li>  - [ ] Expert â†’ Accelerated or Original</li>
</ul>

<ol>
<li>**What's your risk tolerance?**</li>
</ol>
<ul>
<li>  - [ ] Risk-averse â†’ Conservative</li>
<li>  - [ ] Balanced â†’ Simplified or Hybrid</li>
<li>  - [ ] Risk-tolerant â†’ Accelerated</li>
</ul>

<ol>
<li>**What's your priority?**</li>
</ol>
<ul>
<li>  - [ ] Safety first â†’ Simplified or Conservative</li>
<li>  - [ ] Balance â†’ Hybrid</li>
<li>  - [ ] Speed first â†’ Accelerated</li>
</ul>

<p><strong>Tally your answers</strong>:</p>
<ul>
<li>Mostly Simplified/Conservative â†’ Use **SIMPLIFIED**</li>
<li>Mostly Hybrid â†’ Use **HYBRID** (recommended)</li>
<li>Mostly Accelerated â†’ Use **ACCELERATED**</li>
<li>Mixed â†’ Use **HYBRID** (default)</li>
</ul>

<p>---</p>

<h2>Recommended Decision Path</h2>

<p><strong>For 90% of users</strong>: Use <strong>HYBRID PLAN</strong></p>

<p><strong>Why?</strong></p>
<ul>
<li>âœ… Starts safe (Phases 0-3c incremental)</li>
<li>âœ… Accelerates when confident (combine later phases)</li>
<li>âœ… Feature flag until Phase 7 (safety net)</li>
<li>âœ… Adaptive (adjust based on experience)</li>
<li>âœ… 5-7 days (reasonable timeline)</li>
</ul>

<p><strong>How to Execute Hybrid</strong>:</p>
<pre><code>Day 1: Phase 0 (Schema) + Phase 1 (Feature Flag)
Day 2: Phase 2 (Tests First)
Day 3: Phase 3a (CRUD)
Day 4: Phase 3b (Duplicates) + Phase 3c (Status)
  â†’ CHECKPOINT: Evaluate confidence
    â†’ High? Combine 6a-6c into Phase 6
    â†’ Low? Stay incremental

Day 5: Phase 4 (Voorbeelden)
Day 6: Phase 6 (Callsites - combined or batched)
Day 7: Phase 7 (Delete Legacy) + Phase 8-9 (Docs)</code></pre>

<p>---</p>

<h2>Final Recommendations</h2>

<h3>ğŸ¥‡ First Choice: HYBRID PLAN</h3>
<ul>
<li>**Timeline**: 5-7 days</li>
<li>**Risk**: MEDIUM (with safeguards)</li>
<li>**Best For**: Most developers</li>
</ul>

<h3>ğŸ¥ˆ Second Choice: SIMPLIFIED PLAN</h3>
<ul>
<li>**Timeline**: 6-8 days</li>
<li>**Risk**: LOW-MEDIUM</li>
<li>**Best For**: Beginners, risk-averse</li>
</ul>

<h3>ğŸ¥‰ Third Choice: ACCELERATED HYBRID</h3>
<ul>
<li>**Timeline**: 4-5 days</li>
<li>**Risk**: MEDIUM-HIGH</li>
<li>**Best For**: Time-critical, experts</li>
</ul>

<h3>âš ï¸ Avoid: ORIGINAL PLAN</h3>
<ul>
<li>**Why**: Simplified/Hybrid are strictly better (feature flag alone is worth it)</li>
<li>**Exception**: Already started with original plan</li>
</ul>

<p>---</p>

<h2>Next Steps</h2>

<p><strong>After choosing your plan</strong>:</p>

<ol>
<li>âœ… Read full plan document (see "Documents" section below)</li>
<li>â¬œ Create feature branch: `feature/DEF-54-{plan-name}`</li>
<li>â¬œ Backup database: `cp data/definities.db data/definities.db.backup`</li>
<li>â¬œ Set baseline metrics: `pytest --cov`, line counts</li>
<li>â¬œ Start Phase 0 (or Phase 1 if skipping schema)</li>
</ol>

<p><strong>Documents to Read</strong>:</p>
<ul>
<li>**Hybrid/Simplified**: `docs/analyses/DEF-54-SIMPLIFIED-REFACTOR-PLAN.md`</li>
<li>**Comparison**: `docs/analyses/DEF-54-COMPARISON-SUMMARY.md`</li>
<li>**This Decision Guide**: `docs/analyses/DEF-54-DECISION-MATRIX.md`</li>
</ul>

<p>---</p>

<h2>Questions & Answers</h2>

<p><strong>Q: Can I switch plans mid-refactor?</strong></p>
<p>A: Yes! Hybrid plan is designed for this. Evaluate after Phase 3c.</p>

<p><strong>Q: What if I run out of time?</strong></p>
<p>A: Use feature flag to pause safely. App still works with legacy repository.</p>

<p><strong>Q: Should I really do test-first?</strong></p>
<p>A: For Phases 3c, 4: YES (complex logic). For Phases 6c, 7: Optional (simple changes).</p>

<p><strong>Q: Can I skip the feature flag?</strong></p>
<p>A: Not recommended. It takes 30 min to implement and saves hours if rollback needed.</p>

<p><strong>Q: Which plan has the best ROI?</strong></p>
<p>A: Hybrid - only 0-2 extra days for significant safety improvements.</p>

<p>---</p>

<h2>Checklist: Before You Start</h2>

<p><strong>Pre-Flight Checks</strong>:</p>
<ul>
<li>[ ] Read your chosen plan document</li>
<li>[ ] Understand rollback procedure</li>
<li>[ ] Have 4-8 days available (depending on plan)</li>
<li>[ ] Database backed up</li>
<li>[ ] Git working directory clean</li>
<li>[ ] All tests currently passing</li>
<li>[ ] Know how to use feature flag (if applicable)</li>
</ul>

<p><strong>Ready to Start?</strong></p>
<p>â†’ Go to Phase 0 of your chosen plan!</p>

<p>---</p>

<p><strong>END OF DECISION MATRIX</strong></p>

  </div>
</body>
</html>