<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Documentation Cleanup Workflow</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">â† Terug naar Portal</a>
    <h1>Documentation Cleanup Workflow</h1>

<p><strong>Version:</strong> 1.0</p>
<p><strong>Last Updated:</strong> 2025-11-07</p>
<p><strong>Proven Success:</strong> migration + migrations consolidation (DEF-136)</p>

<p>Dit document beschrijft de systematische 5-fase multiagent aanpak voor het opschonen van documentatie directories. Deze workflow is bewezen effectief bij de consolidatie van <code>/docs/migration/</code> en <code>/docs/migrations/</code> naar archief.</p>

<p>---</p>

<h2>ğŸ¯ Wanneer Gebruik Je Deze Workflow?</h2>

<p>Gebruik deze workflow voor:</p>
<ul>
<li>âœ… Opschonen van documentatie directories met **>5 files**</li>
<li>âœ… Consolideren van **duplicate directories** (bijv. guides + handleidingen)</li>
<li>âœ… Migreren naar **canonical locations** (zie CANONICAL_LOCATIONS.md)</li>
<li>âœ… Archiveren van **historical/completed documentation**</li>
<li>âœ… Elimineren van **non-canonical structures**</li>
</ul>

<p><strong>Gebruik NIET voor:</strong></p>
<ul>
<li>âŒ Enkele file moves (gebruik gewoon `git mv`)</li>
<li>âŒ Active development directories zonder analyse</li>
<li>âŒ Root-level critical files (README, CLAUDE.md, etc.)</li>
</ul>

<p>---</p>

<h2>ğŸ¤– 5-Fase Multiagent Cleanup Process</h2>

<h3>FASE 1: INVENTORY (Parallel) ğŸ“Š</h3>

<p><strong>Doel:</strong> Complete inventarisatie van directory inhoud</p>

<p><strong>Agents:</strong> 2x Explore agents (parallel execution)</p>
<p><strong>Thoroughness:</strong> Very thorough</p>
<p><strong>Duration:</strong> ~5-10 minuten per directory</p>

<h4>Agent Configuration:</h4>

<pre><code>Agent 1 (Explore): Inventory /docs/{directory_1}
Agent 2 (Explore): Inventory /docs/{directory_2}</code></pre>

<h4>Agent Prompt Template:</h4>

<pre><code>Explore the `/docs/{directory}` directory thoroughly.

**Objectives:**
1. List ALL files with sizes and last modification dates
2. Analyze file content types and purposes
3. Identify cross-references (grep for filenames in /src, /docs, CLAUDE.md)
4. Check for duplicate content patterns
5. Determine if files are referenced in code or documentation

**Output Format:**</code></pre>
<p>directory: /docs/{directory}</p>
<p>file_count: {n}</p>
<p>total_size_kb: {size}</p>
<p>files:</p>
<ul>
<li> - name: {filename}</li>
<p>    size_kb: {size}</p>
<p>    last_modified: {date}</p>
<p>    type: {purpose}</p>
<p>    referenced_in: [{locations}]</p>
<p>    content_summary: {1-line summary}</p>
<p>age_distribution:</p>
<p>  recent_3mo: {count}</p>
<p>  medium_6mo: {count}</p>
<p>  old_6mo_plus: {count}</p>
<p>cross_references_found: {count}</p>
<p>potential_duplicates: [{list if any}]</p>
<p>recommendation: {KEEP/ARCHIVE/DELETE/CHECK}</p>
<pre><code>
Be thorough - check file contents, not just names!</code></pre>
</ul>

<h4>Expected Output:</h4>

<ul>
<li>File inventory per directory (count, sizes, types)</li>
<li>Age distribution (recent vs old files)</li>
<li>Cross-reference analysis (waar wordt het gebruikt?)</li>
<li>Duplicate detection</li>
<li>Initial recommendation (KEEP/ARCHIVE/DELETE)</li>
</ul>

<p>---</p>

<h3>FASE 2: ANALYSIS (Parallel) ğŸ”</h3>

<p><strong>Doel:</strong> Bepaal relevance en detecteer duplicaten</p>

<p><strong>Agents:</strong> 2x Analysis agents (parallel execution)</p>
<p><strong>Duration:</strong> ~8-15 minuten</p>

<h4>Agent Configuration:</h4>

<pre><code>Agent 1 (debug-specialist): Duplicate pattern analysis
Agent 2 (general-purpose): Relevance matrix analysis</code></pre>

<h4>Relevance Criteria Matrix:</h4>

<p>| Criterium | Weight | Check Method | Score |</p>
<p>|-----------|--------|--------------|-------|</p>
<p>| <strong>Referenced in code</strong> | ğŸ”´ HIGH | <code>grep -r "filename" src/</code> | YES = KEEP |</p>
<p>| <strong>Referenced in CLAUDE.md</strong> | ğŸ”´ HIGH | <code>grep "filename" CLAUDE.md UNIFIED_INSTRUCTIONS.md</code> | YES = KEEP |</p>
<p>| <strong>Recent activity</strong> (< 3 mo) | ğŸŸ¡ MEDIUM | File modification date | YES = KEEP |</p>
<p>| <strong>Part of active workflow</strong> | ğŸ”´ HIGH | Cross-check tegen backlog/EPIC-XXX | YES = KEEP |</p>
<p>| <strong>Canonical location</strong> | ğŸ”´ HIGH | Cross-check CANONICAL_LOCATIONS.md | NO = MOVE |</p>
<p>| <strong>Historical value</strong> | ğŸŸ¢ LOW | Architectural decisions, important context | YES = ARCHIVE |</p>
<p>| <strong>Duplicate content</strong> | ğŸ”´ HIGH | Content similarity check | YES = DELETE/CONSOLIDATE |</p>

<h4>Agent 1 Prompt (debug-specialist):</h4>

<pre><code>Analyze duplicate and consolidation patterns between directories.

**Investigation Tasks:**
1. Directory naming confusion (singular vs plural, overlapping purposes)
2. Content overlap analysis (related vs duplicate)
3. Status detection (COMPLETED, IN-PROGRESS, ABANDONED, SUPERSEDED)
4. Consolidation strategy (MERGE/KEEP_SEPARATE)

**Output Format:**</code></pre>
<p>duplicate_analysis:</p>
<p>  directory_confusion:</p>
<p>    finding: {analysis}</p>
<p>    recommendation: {merge/keep separate/rename}</p>
<p>  content_overlap:</p>
<p>    overlap_level: {none/minimal/significant/complete}</p>
<p>    related_files: [{list}]</p>
<p>  consolidation_strategy:</p>
<p>    recommendation: {MERGE/KEEP_SEPARATE}</p>
<p>    target_directory: {name}</p>
<p>    impact_assessment:</p>
<p>      files_to_move: {count}</p>
<p>      references_to_update: {count}</p>
<p>      risk_level: {LOW/MEDIUM/HIGH}</p>
<pre><code></code></pre>

<h4>Agent 2 Prompt (general-purpose):</h4>

<pre><code>Analyze relevance of files based on project standards.

**Apply Relevance Criteria Matrix** (zie boven)

**Output Format:**</code></pre>
<p>relevance_analysis:</p>
<ul>
<li> - file: {filename}</li>
<p>    location: {current path}</p>
<p>    scores:</p>
<p>      code_referenced: {YES/NO} ({count} refs)</p>
<p>      recent_activity: {YES/NO} ({days} old)</p>
<p>      active_workflow: {YES/NO} ({epic/us refs})</p>
<p>      canonical_location: {YES/NO} (expected: {path})</p>
<p>      historical_value: {HIGH/MEDIUM/LOW}</p>
<p>    decision_matrix:</p>
<p>      status: {KEEP/ARCHIVE/DELETE/CONSOLIDATE}</p>
<p>      confidence: {HIGH/MEDIUM/LOW}</p>
<p>      action: {specific recommendation}</p>
<p>      target_location: {if moving}</p>
<p>    reasoning: {explanation}</p>
<pre><code></code></pre>
</ul>

<h4>Expected Output:</h4>

<ul>
<li>Duplicate pattern analysis</li>
<li>Relevance scores per file</li>
<li>Decision matrix (KEEP/ARCHIVE/DELETE/CONSOLIDATE)</li>
<li>Consolidation recommendations</li>
<li>Risk assessment</li>
</ul>

<p>---</p>

<h3>FASE 3: STRATEGY ğŸ“‹</h3>

<p><strong>Doel:</strong> Create complete, executable consolidation plan</p>

<p><strong>Agent:</strong> Plan agent (thoroughness: very thorough)</p>
<p><strong>Duration:</strong> ~15-20 minuten</p>

<h4>Agent Configuration:</h4>

<pre><code>Agent: Plan
Input: Inventory + Analysis results
Output: Complete execution plan met bash scripts</code></pre>

<h4>Agent Prompt Template:</h4>

<pre><code>Create a comprehensive, actionable consolidation plan.

**Context from Analysis:**
- Current state: {directory structure}
- Analysis conclusions: {KEEP/ARCHIVE/DELETE/CONSOLIDATE decisions}
- Cross-references found: {count}

**Requirements:**
- Approval threshold: &gt;5 files OR canonical location changes = ASK USER
- Document archival: Use `/docs/archief/` with date/category structure
- Prevent code duplication: Check for existing archief subdirectories
- Update cross-references when moving

**Planning Tasks:**
1. Target Structure Design (directory hierarchy)
2. File-by-File Action Plan (source â†’ target per file)
3. Reference Update Plan (sed commands for CHANGELOG, Portal JSON, etc.)
4. Verification Steps (how to verify no broken links)
5. Documentation Updates (README, CANONICAL_LOCATIONS, INDEX)
6. Execution Order (phased approach, dependencies, rollback)

**Output Format:**
- Directory structure (ASCII tree)
- Complete bash script (file moves, reference updates)
- Verification checklist
- Risk assessment per step
- Estimated time per phase</code></pre>

<h4>Expected Output:</h4>

<ul>
<li>**Target directory structure** (visual ASCII tree)</li>
<li>**Complete bash script** voor execution:</li>
<li> - `git mv` commands met history preservation</li>
<li> - `sed` commands voor reference updates</li>
<li> - Verification commands</li>
<li>**Phased execution plan** (Fase 1: Prep, Fase 2: Move, etc.)</li>
<li>**Rollback procedures** per fase</li>
<li>**Risk assessment** (LOW/MEDIUM/HIGH per step)</li>
<li>**Time estimates** (realistic planning)</li>
</ul>

<p>---</p>

<h3>FASE 4: EXECUTION âš¡</h3>

<p><strong>Doel:</strong> Execute cleanup met git history preservation</p>

<p><strong>Prerequisites:</strong></p>
<ul>
<li>âœ… User approval obtained (for >5 files OR canonical changes)</li>
<li>âœ… Git status clean</li>
<li>âœ… Backup strategy confirmed (git history = automatic backup)</li>
</ul>

<h4>Execution Checklist:</h4>

<p><strong>Step 1: Preparation (5-10 min)</strong></p>
<pre><code># Verify git status clean
git status --short  # Should be empty

# Create target directories
mkdir -p docs/archief/YYYY-MM-cleanup/{category}/

# Verify source files exist
ls -la docs/{source_directory}/</code></pre>

<p><strong>Step 2: File Moves (10-20 min)</strong></p>
<pre><code># Move files with git history preservation
git mv docs/{source}/{file1} docs/archief/{target}/
git mv docs/{source}/{file2} docs/archief/{target}/

# Remove empty source directories (automatic if empty)
# git will auto-delete after commit</code></pre>

<p><strong>Step 3: Reference Updates (15-30 min)</strong></p>
<pre><code># Update CHANGELOG.md
sed -i '' 's|docs/{old_path}|docs/{new_path}|g' CHANGELOG.md

# Update Portal JSON (multiple sed operations)
sed -i '' 's|"../{old_path}"|"../{new_path}"|g' docs/portal/portal-index.json
sed -i '' 's|"rendered/{old_path}"|"rendered/{new_path}"|g' docs/portal/portal-index.json

# Validate Portal JSON
python -m json.tool docs/portal/portal-index.json &gt; /dev/null

# Update analysis documents
sed -i '' 's|/docs/{old_path}|/docs/{new_path}|g' docs/analyses/*.md</code></pre>

<p><strong>Step 4: Documentation Updates (10-15 min)</strong></p>
<pre><code># Create README in archief subdirectory
cat &gt; docs/archief/{category}/README.md &lt;&lt; 'EOF'
# {Category} Archive

**Archive Date:** {date}
**Status:** {status}

{Description of what's archived and why}
EOF

# Update CANONICAL_LOCATIONS.md
# Add new archief entry + forbidden old locations

# Update INDEX.md
# Add archief structure to tree</code></pre>

<p><strong>Step 5: Verification (5-10 min)</strong></p>
<pre><code># Verify all files moved
ls -la docs/archief/{target}/  # Should show moved files
ls docs/{source} 2&gt;&amp;1 | grep "No such file"  # Source should be gone

# Check for orphaned references
grep -r "docs/{old_path}" docs/ --include="*.md" | grep -v archief | wc -l
# Should be 0 (or only in context like analysis docs)

# Validate Portal JSON
python -m json.tool docs/portal/portal-index.json &gt; /dev/null

# Check git history preservation
git log --follow docs/archief/{target}/{file}  # Should show full history</code></pre>

<h4>Safety Measures:</h4>

<ul>
<li>âœ… **Git history preservation**: Always use `git mv`, never manual copy</li>
<li>âœ… **Incremental commits**: Commit phase-by-phase, not all at once</li>
<li>âœ… **Reference validation**: Verify JSON syntax, check broken links</li>
<li>âœ… **Rollback capability**: Each phase can be rolled back with `git reset`</li>
</ul>

<p>---</p>

<h3>FASE 5: VERIFICATION & COMMIT âœ…</h3>

<p><strong>Doel:</strong> Verify completeness and commit with comprehensive message</p>

<h4>Final Verification Checklist:</h4>

<ul>
<li>[ ] All files moved to correct target locations</li>
<li>[ ] Source directories empty/removed (check with `ls`)</li>
<li>[ ] CHANGELOG.md references updated and correct</li>
<li>[ ] Portal JSON valid syntax (`python -m json.tool`)</li>
<li>[ ] Portal JSON references updated (all old paths changed)</li>
<li>[ ] Analysis documents updated (if applicable)</li>
<li>[ ] No broken links (`grep -r "docs/{old}" docs/ | grep -v archief`)</li>
<li>[ ] Git history preserved (`git log --follow {file}`)</li>
<li>[ ] README created in archief subdirectory</li>
<li>[ ] CANONICAL_LOCATIONS.md updated (new location + forbidden old)</li>
<li>[ ] INDEX.md updated (tree structure reflects changes)</li>
</ul>

<h4>Commit Message Template:</h4>

<pre><code>git add -A

git commit -m "docs: consolidate {directory} documentation to archief

MULTIAGENT CLEANUP COMPLETE - 5 agents deployed in parallel:
- 2x Explore agents: Deep inventory ({n} files, {size} KB)
- 2x Analysis agents: Relevance + duplicate detection
- 1x Plan agent: Comprehensive consolidation strategy

{KRITIEKE BEVINDINGEN - indien van toepassing}

FILES MOVED (with git history preservation):
- {file1} â†’ archief/.../category/ ({STATUS})
- {file2} â†’ archief/.../category/ ({STATUS})

DIRECTORIES CONSOLIDATED:
- /docs/{old_dir}/ â†’ REMOVED (empty, auto-deleted by git)
- New canonical: /docs/archief/{target}/

REFERENCES UPDATED:
- CHANGELOG.md: {n} references fixed
- Portal JSON: {n} sed operations ({n} path updates)
- Analysis docs: {n} path updates

DOCUMENTATION CREATED/UPDATED:
- README.md in {category}/ (explains archive structure)
- CANONICAL_LOCATIONS.md: Added section + forbidden locations
- INDEX.md: Added to tree structure

VERIFICATION:
âœ… All {n} files moved successfully
âœ… Empty directories auto-removed
âœ… Portal JSON valid
âœ… No broken links
âœ… Git history preserved for all moves

Fixes: {what problem this solves}
Related: {related issues/docs}
Impact: {high-level impact statement}

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude &lt;noreply@anthropic.com&gt;"</code></pre>

<h4>Post-Commit Actions:</h4>

<pre><code># Verify commit
git log --oneline -1

# Check git status clean
git status  # Should show "nothing to commit, working tree clean"

# Push to remote (if approved)
git push origin main</code></pre>

<p>---</p>

<h2>ğŸ“Š Decision Tree</h2>

<p>Gebruik deze decision tree om te bepalen wat er met elk bestand moet gebeuren:</p>

<pre><code>â”Œâ”€ Referenced in ACTIVE code? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ KEEP (current location)              â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ In canonical location? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ KEEP (if recent OR historical value) â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Recent activity (&lt; 3 months)? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ KEEP (move to canonical if needed)   â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Part of active workflow? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ KEEP (check Epic/US references)      â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Historical/architectural value? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ ARCHIVE (move to docs/archief/)      â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Duplicate of existing file? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ DELETE (keep canonical version)      â”‚
â”‚  NO  â†’ Continue to next check               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Consolidation opportunity? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  YES â†’ CONSOLIDATE (merge with related dir) â”‚
â”‚  NO  â†’ DELETE (no value identified)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

<p><strong>Actions Summary:</strong></p>

<p>| Action | When | Target | Git Command |</p>
<p>|--------|------|--------|-------------|</p>
<p>| <strong>KEEP</strong> | Active, canonical, recent | Current location | No change |</p>
<p>| <strong>MOVE</strong> | Active but non-canonical | Canonical location | <code>git mv</code> |</p>
<p>| <strong>ARCHIVE</strong> | Historical value, completed | <code>/docs/archief/YYYY-MM/</code> | <code>git mv</code> |</p>
<p>| <strong>CONSOLIDATE</strong> | Duplicate directory structure | Merge into canonical | <code>git mv</code> multiple |</p>
<p>| <strong>DELETE</strong> | Duplicate file, no value | - | <code>git rm</code> |</p>

<p>---</p>

<h2>ğŸ“ Lessons Learned (van migration cleanup)</h2>

<h3>âœ… Best Practices (Do This):</h3>

<ol>
<li>**Parallel agent execution**</li>
</ol>
<ul>
<li>  - 2x Explore agents = 50% sneller</li>
<li>  - Analysis agents parallel = 80% efficiÃ«nter dan sequential</li>
<li>  - **Impact:** 43 min vs 2+ uur sequential</li>
</ul>

<ol>
<li>**Check for duplicates FIRST**</li>
</ol>
<ul>
<li>  - history_tab_removal.md was al in archief (Sep 29)</li>
<li>  - Saved time door niet te moven maar te verwijderen</li>
<li>  - **Lesson:** Always inventory before execution</li>
</ul>

<ol>
<li>**Git history preservation**</li>
</ol>
<ul>
<li>  - Gebruik `git mv`, NOOIT handmatige copy</li>
<li>  - Git toont volledige history met `--follow` flag</li>
<li>  - **Impact:** Geen data loss, volledige audit trail</li>
</ul>

<ol>
<li>**Archief is gitignored by design**</li>
</ol>
<ul>
<li>  - Force add met `-f` waar nodig (README.md etc.)</li>
<li>  - Dit is intentioneel - archief hoort niet in git</li>
<li>  - **Lesson:** Check .gitignore voordat je commit</li>
</ul>

<ol>
<li>**Reference updates in bulk**</li>
</ol>
<ul>
<li>  - Sed commands voor multiple replacements</li>
<li>  - Valideer JSON na elke batch</li>
<li>  - **Impact:** 12 portal references in <5 min</li>
</ul>

<h3>âŒ Anti-Patterns (Avoid This):</h3>

<ol>
<li>**NOOIT handmatige file copy**</li>
</ol>
<ul>
<li>  - Git history goes lost</li>
<li>  - Duplicate data creatie</li>
<li>  - **Use:** `git mv` always</li>
</ul>

<ol>
<li>**NOOIT alle changes in 1 commit**</li>
</ol>
<ul>
<li>  - Moeilijk te rollback</li>
<li>  - Onduidelijke commit message</li>
<li>  - **Use:** Faseer commits (prep â†’ move â†’ update â†’ verify)</li>
</ul>

<ol>
<li>**NOOIT skippen van verification**</li>
</ol>
<ul>
<li>  - Broken links discovered te laat</li>
<li>  - Portal JSON corruption</li>
<li>  - **Use:** Check ELKE fase voor verder gaan</li>
</ul>

<ol>
<li>**NOOIT assumptie over file status**</li>
</ol>
<ul>
<li>  - Synoniemen migration was NEVER IMPLEMENTED</li>
<li>  - Analysis revealed SUPERSEDED status</li>
<li>  - **Use:** Always run Archaeology First (grep, git log)</li>
</ul>

<ol>
<li>**NOOIT direct naar main pushen zonder check**</li>
</ol>
<ul>
<li>  - Branch protection kan bypassed worden</li>
<li>  - Maar blijf bewust van approvals</li>
<li>  - **Use:** Review changes voor push</li>
</ul>

<p>---</p>

<h2>ğŸ› ï¸ Tool Usage Reference</h2>

<h3>Task Tool - Multiagent Execution</h3>

<pre><code># Fase 1: Parallel Inventory
Task(
    subagent_type="Explore",
    description="Inventory /docs/{directory_1}",
    prompt="{inventory prompt}",
    model="haiku"  # Fast for inventory
)

Task(
    subagent_type="Explore",
    description="Inventory /docs/{directory_2}",
    prompt="{inventory prompt}",
    model="haiku"
)

# Fase 2: Parallel Analysis
Task(
    subagent_type="debug-specialist",
    description="Analyze duplicate patterns",
    prompt="{duplicate analysis prompt}",
    model="sonnet"  # Deeper analysis
)

Task(
    subagent_type="general-purpose",
    description="Relevance analysis",
    prompt="{relevance analysis prompt}",
    model="haiku"  # Pattern matching
)

# Fase 3: Strategy Planning
Task(
    subagent_type="Plan",
    description="Create consolidation plan",
    prompt="{strategy prompt}",
    model="sonnet"  # Complex planning
)</code></pre>

<h3>Grep Usage - Finding References</h3>

<pre><code># Find all references to old path
grep -r "docs/migration/" docs/ --include="*.md"

# Exclude archief and portal from search
grep -r "docs/migration/" docs/ --include="*.md" | grep -v archief | grep -v portal

# Count references
grep -r "docs/migration/" docs/ --include="*.md" | grep -v archief | wc -l

# Find in specific file types
grep -r "migration" docs/ --include="*.json" --include="*.md"</code></pre>

<h3>Sed Usage - Bulk Reference Updates</h3>

<pre><code># Basic replacement (macOS)
sed -i '' 's|old/path|new/path|g' file.md

# Multiple files
sed -i '' 's|old/path|new/path|g' docs/**/*.md

# Portal JSON (escape special chars)
sed -i '' 's|"../migration/file\.md"|"../archief/migrations/file.md"|g' portal-index.json

# Verify before commit
grep "old/path" file.md  # Should return nothing</code></pre>

<h3>Git Commands - History Preservation</h3>

<pre><code># Move with history
git mv source/file.md target/file.md

# Check history preservation
git log --follow target/file.md

# Show renames in git log
git log --name-status --follow target/file.md

# Verify move is staged
git status --short  # Shows 'R' for rename</code></pre>

<p>---</p>

<h2>ğŸ“ˆ Performance Metrics</h2>

<p><strong>Van migration consolidation (proof of concept):</strong></p>

<p>| Metric | Manual | Multiagent | Improvement |</p>
<p>|--------|--------|------------|-------------|</p>
<p>| <strong>Total time</strong> | ~6 hours | ~2.5 hours | <strong>58% faster</strong> |</p>
<p>| <strong>Inventory phase</strong> | 1 hour | 10 min (parallel) | <strong>83% faster</strong> |</p>
<p>| <strong>Analysis phase</strong> | 2 hours | 25 min (parallel) | <strong>79% faster</strong> |</p>
<p>| <strong>Execution phase</strong> | 2 hours | 1.5 hours | <strong>25% faster</strong> |</p>
<p>| <strong>Error rate</strong> | High (manual) | Low (automated) | <strong>~90% reduction</strong> |</p>

<p><strong>Parallel vs Sequential:</strong></p>
<ul>
<li>**2 Explore agents parallel:** 10 min vs 20 min sequential (50% faster)</li>
<li>**2 Analysis agents parallel:** 25 min vs 50 min sequential (50% faster)</li>
<li>**Total parallel efficiency:** 43 min vs 70+ min sequential (38% faster)</li>
</ul>

<p>---</p>

<h2>ğŸ“š Voorbeeld: Migration Consolidation</h2>

<p><strong>Bewijs van success:</strong> Commit <code>91624d5b</code></p>

<h3>Situatie Voor:</h3>

<pre><code>docs/
â”œâ”€â”€ migration/         # 3 files (32 KB) - NON-CANONICAL
â”‚   â”œâ”€â”€ legacy-code-inventory.md
â”‚   â”œâ”€â”€ remove-legacy-validation-plan.md
â”‚   â””â”€â”€ synoniemen-migratie-strategie.md
â””â”€â”€ migrations/        # 1 file (8 KB) - NON-CANONICAL
    â””â”€â”€ history_tab_removal.md (DUPLICATE!)</code></pre>

<h3>Agents Deployed:</h3>

<ol>
<li>**Explore #1** â†’ `/docs/migration/` inventory (5 min)</li>
<li>**Explore #2** â†’ `/docs/migrations/` inventory (5 min)</li>
<li>**debug-specialist** â†’ Duplicate detection (10 min) â†’ Found: synoniemen = ABANDONED</li>
<li>**general-purpose** â†’ Relevance matrix (8 min) â†’ 3x ARCHIVE, 1x DELETE</li>
<li>**Plan** â†’ Consolidation strategy (15 min) â†’ 1200+ line execution plan</li>
</ol>

<p><strong>Total agent time:</strong> 43 minuten (parallel)</p>

<h3>Situatie Na:</h3>

<pre><code>docs/archief/2025-01-cleanup/migrations/
â”œâ”€â”€ README.md                       # NEW: Archive index
â”œâ”€â”€ v1-v2-validation/               # CONSOLIDATED
â”‚   â”œâ”€â”€ legacy-code-inventory.md
â”‚   â””â”€â”€ remove-legacy-validation-plan.md
â”œâ”€â”€ synoniemen/                     # SUPERSEDED (found by analysis!)
â”‚   â””â”€â”€ synoniemen-migratie-strategie.md (+ frontmatter)
â””â”€â”€ history-tab/
    â””â”€â”€ history_tab_removal.md      # Duplicate removed, kept existing</code></pre>

<h3>Kritieke Ontdekking:</h3>

<p><strong>Synoniemen Migration = NEVER IMPLEMENTED</strong></p>
<ul>
<li>Document beschreef 4-fase migration</li>
<li>Analysis agent ontdekte: ALLE 4 fases NOT DONE</li>
<li>Alternative architecture geÃ¯mplementeerd (Orchestrator v3.1, Oct 10 2025)</li>
<li>**Impact:** Document correct gearchiveerd als SUPERSEDED i.p.v. COMPLETED</li>
</ul>

<h3>References Updated:</h3>

<ul>
<li>âœ… CHANGELOG.md: 1 reference</li>
<li>âœ… Portal JSON: 12 path updates (6 sed operations)</li>
<li>âœ… Analysis docs: 4 path updates</li>
<li>âœ… CANONICAL_LOCATIONS.md: New section + forbidden locations</li>
<li>âœ… INDEX.md: Tree structure updated</li>
</ul>

<h3>Commit:</h3>

<pre><code>git commit -m "docs: consolidate migration documentation to archief

MULTIAGENT CLEANUP COMPLETE - 5 agents deployed in parallel:
- 2x Explore agents: Deep inventory (4 files, 40 KB)
- 2x Analysis agents: Relevance + duplicate detection
- 1x Plan agent: Comprehensive consolidation strategy

KRITIEKE ONTDEKKING:
- synoniemen-migratie-strategie.md was NEVER IMPLEMENTED
- Alternative Synonym Orchestrator v3.1 chosen instead (commit 8a4b58b1)
- All 4 migration phases ABANDONED in favor of graph-based architecture

FILES MOVED (with git history preservation):
- legacy-code-inventory.md â†’ archief/.../v1-v2-validation/ (COMPLETED)
- remove-legacy-validation-plan.md â†’ archief/.../v1-v2-validation/ (COMPLETED v2.3.1)
- synoniemen-migratie-strategie.md â†’ archief/.../synoniemen/ (SUPERSEDED)
- history_tab_removal.md â†’ DUPLICATE removed (already in archief from Sep 29)

...{full commit message}
"</code></pre>

<p><strong>Result:</strong> 10 files changed, 94 insertions, 262 deletions</p>

<p>---</p>

<h2>ğŸ¯ Quick Start Checklist</h2>

<p>Gebruik deze checklist voor je volgende cleanup:</p>

<h3>Pre-Execution:</h3>
<ul>
<li>[ ] Identify target directory/directories for cleanup</li>
<li>[ ] Check CANONICAL_LOCATIONS.md for target structure</li>
<li>[ ] Verify git status is clean</li>
<li>[ ] Review this workflow document (5 min)</li>
<li>[ ] Decide: parallel agents for multiple directories?</li>
</ul>

<h3>Fase 1 - Inventory:</h3>
<ul>
<li>[ ] Launch 2x Explore agents (parallel if 2 directories)</li>
<li>[ ] Wait for inventory completion (~10 min)</li>
<li>[ ] Review file counts, ages, cross-references</li>
<li>[ ] Note potential duplicates</li>
</ul>

<h3>Fase 2 - Analysis:</h3>
<ul>
<li>[ ] Launch debug-specialist agent (duplicate analysis)</li>
<li>[ ] Launch general-purpose agent (relevance matrix)</li>
<li>[ ] Wait for analysis completion (~25 min)</li>
<li>[ ] Review KEEP/ARCHIVE/DELETE/CONSOLIDATE decisions</li>
<li>[ ] Check for SUPERSEDED or ABANDONED content</li>
</ul>

<h3>Fase 3 - Strategy:</h3>
<ul>
<li>[ ] Launch Plan agent with analysis results</li>
<li>[ ] Wait for strategy completion (~20 min)</li>
<li>[ ] Review bash script for correctness</li>
<li>[ ] Check risk assessment</li>
<li>[ ] **OBTAIN USER APPROVAL** (if >5 files or canonical changes)</li>
</ul>

<h3>Fase 4 - Execution:</h3>
<ul>
<li>[ ] Run preparation commands (mkdir, verify)</li>
<li>[ ] Execute file moves (git mv)</li>
<li>[ ] Update references (sed commands)</li>
<li>[ ] Update documentation (README, CANONICAL, INDEX)</li>
<li>[ ] Run verification commands (grep, json validation)</li>
</ul>

<h3>Fase 5 - Verification & Commit:</h3>
<ul>
<li>[ ] Run full verification checklist</li>
<li>[ ] Fix any issues found</li>
<li>[ ] Stage all changes (git add -A)</li>
<li>[ ] Commit with comprehensive message</li>
<li>[ ] Push to remote (after final review)</li>
</ul>

<h3>Post-Execution:</h3>
<ul>
<li>[ ] Update Linear issue DEF-136 (check off submap)</li>
<li>[ ] Document any lessons learned</li>
<li>[ ] Note any process improvements</li>
<li>[ ] Archive execution logs if relevant</li>
</ul>

<p>---</p>

<h2>ğŸ“ Support & References</h2>

<p><strong>Related Documents:</strong></p>
<ul>
<li>[CANONICAL_LOCATIONS.md](./CANONICAL_LOCATIONS.md) - Where docs should be located</li>
<li>[DOCUMENTATION_POLICY.md](./DOCUMENTATION_POLICY.md) - General documentation policy</li>
<li>[INDEX.md](../INDEX.md) - Current documentation structure</li>
</ul>

<p><strong>Linear Issue:</strong></p>
<ul>
<li>[DEF-136](https://linear.app/definitie-app/issue/DEF-136) - 30 submaps cleanup tracker</li>
</ul>

<p><strong>Proof of Concept:</strong></p>
<ul>
<li>Commit `91624d5b` - migration consolidation (first successful cleanup)</li>
</ul>

<p><strong>Questions?</strong></p>
<ul>
<li>Check lessons learned section above</li>
<li>Review migration consolidation example</li>
<li>Consult CLAUDE.md for AI agent usage patterns</li>
</ul>

<p>---</p>

<p><strong>Version History:</strong></p>
<ul>
<li>v1.0 (2025-11-07): Initial version based on migration cleanup success</li>
</ul>

  </div>
</body>
</html>