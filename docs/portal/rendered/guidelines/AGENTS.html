<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agents Richtlijnen</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <p>---</p>
<p>aangemaakt: '08-09-2025'</p>
<p>applies_to: definitie-app@current</p>
<p>bijgewerkt: '12-09-2025'</p>
<p>canonical: true</p>
<p>last_verified: 12-09-2025</p>
<p>owner: architecture</p>
<p>prioriteit: medium</p>
<p>status: active</p>
<p>---</p>



<h1>Agents Richtlijnen</h1>

<p>Dit document beschrijft hoe we gespecialiseerde agents inzetten binnen de Definitie‚Äëapp. Het doel is consistente kwaliteit, voorspelbaar gedrag en makkelijk samenwerken tussen mensen en agents.</p>

<h2>üéØ HARMONISATIE: Alle Agents Volgen Unified Rules</h2>

<h3>Verplichte Stappen voor ELKE Agent</h3>
<ol>
<li>**Include Preamble**: Start elke agent met `~/.ai-agents/AGENT_PREAMBLE.md`</li>
<li>**Load Unified Rules**: Laad `~/.ai-agents/UNIFIED_INSTRUCTIONS.md` bij init</li>
<li>**Run Preflight**: Check met `~/.ai-agents/preflight-checks.sh` voor acties</li>
<li>**Follow Approval Ladder**: Gebruik approval rules uit unified instructions</li>
<li>**Enforce Naming**: Gebruik Nederlandse context namen (organisatorische_context)</li>
</ol>

<h3>Enforcement Tools</h3>
<ul>
<li>**Template**: `~/.ai-agents/AGENT_TEMPLATE.md` voor nieuwe agents</li>
<li>**Validator**: `~/.ai-agents/enforce-harmonization.sh` checkt compliance</li>
<li>**Preamble**: `~/.ai-agents/AGENT_PREAMBLE.md` moet in elke agent</li>
</ul>

<h2>Werken met meerdere agents</h2>
<ul>
<li>Zie de dedicated gids: [Codex Multi‚ÄëAgent Gebruik](../handleidingen/ontwikkelaars/codex-multi-agent-gebruik.md) ‚Äî parallelle agents (worktrees/patches), selectiecriteria, quick‚Äëchecks en scoreboard.</li>
</ul>

<h2>Claude Code Agents Locatie</h2>
<ul>
<li>Beschikbare agent‚Äëprompts: `~/.claude/agents/`</li>
<li> - `code-reviewer.md`</li>
<li> - `code-simplifier.md`</li>
<li> - `debug-specialist.md`</li>
<li> - `full-stack-developer.md`</li>
<li>Aanroepen via de Task tool in Claude Code; gebruik exacte agent‚Äënamen.</li>
</ul>

<h2>Standaard Werkwijze</h2>
<ul>
<li>Context eerst: lees relevante code, config en docs voordat je acties onderneemt.</li>
<li>Plan klein: beschrijf in 3‚Äì6 korte stappen wat je gaat doen.</li>
<li>Valideer: voer gerichte checks/tests uit op wat je veranderde.</li>
<li>Logisch koppelen: verwijs naar bestaande documentatie en respecteer canonical locations.</li>
<li>Minimaal ingrijpen: verander alleen wat nodig is, geen brede refactors zonder opdracht.</li>
</ul>

<h2>Agent Keuze (zonder router)</h2>

<ul>
<li>Kies altijd de lichtste passende agent voor de taak.</li>
<li>Mapping (richtlijn):</li>
<li> - `code-reviewer`: reviews van code/diffs, quick assessments, feedback.</li>
<li> - `debug-specialist`: reproduceren/diagnosticeren van bugs en fouten.</li>
<li> - `code-simplifier`: kleine refactors/opschoning zonder gedragswijziging.</li>
<li> - `full-stack-developer`: implementatie van gewenste wijzigingen/kleine features.</li>
<li>- Gebruik test-/lint‚Äëchecks proportioneel aan de wijziging; geen centrale router of automatische workflow vereist.</li>
</ul>

<h2>Algemene Richtlijnen</h2>

<h3>üîç Preflight Checks (Voor ELKE wijziging)</h3>
<pre><code># 1. Unieke match check
rg "exact_string_to_change" --files-with-matches | wc -l  # Moet 1 zijn

# 2. Scope check
echo "Wijziging in: path/to/file.py"
echo "Impact op: [list affected components]"

# 3. Forbidden patterns
rg "import streamlit" src/services/ &amp;&amp; echo "‚ùå BLOCKED"
rg "asyncio.run\(" src/services/ &amp;&amp; echo "‚ùå BLOCKED"
rg "from ui\." src/services/ &amp;&amp; echo "‚ùå BLOCKED"

# 4. Approval check
[[ lines &gt; 100 || files &gt; 5 ]] &amp;&amp; echo "‚ö†Ô∏è APPROVAL REQUIRED"

# 5. Run automated preflight
~/.ai-agents/preflight-checks.sh .</code></pre>

<h3>üìù Naming & Import Canon</h3>

<h4>‚úÖ VERPLICHTE Namen (Canonical)</h4>
<p>| Concept | MOET zijn | NOOIT |</p>
<p>|---------|-----------|-------|</p>
<p>| Context velden | <code>organisatorische_context</code> | <code>organizational_context</code> |</p>
<p>| Context velden | <code>juridische_context</code> | <code>legal_context</code> |</p>
<p>| Orchestrator | <code>ValidationOrchestratorV2</code> | <code>ValidationOrchestrator</code> |</p>
<p>| Generator | <code>UnifiedDefinitionGenerator</code> | <code>DefinitionGenerator</code> |</p>
<p>| Service | <code>ModularValidationService</code> | <code>ValidationService</code> |</p>

<h4>üö´ VERBODEN Import Patterns</h4>
<p>| In Directory | Verboden | Alternatief |</p>
<p>|--------------|----------|-------------|</p>
<p>| <code>src/services/</code> | <code>import streamlit</code> | Use <code>async_bridge</code> |</p>
<p>| <code>src/services/</code> | <code>from ui.*</code> | Use service layer |</p>
<p>| <code>src/services/</code> | <code>asyncio.run()</code> | Use <code>await</code> |</p>
<p>| <code>src/ui/</code> | <code>from repositories.*</code> | Use service facade |</p>
<p>| <code>src/ui/</code> | <code>ServiceContainer()</code> | Use <code>get_service_container()</code> |</p>

<p>Voor volledig overzicht: zie <code>~/.ai-agents/quality-gates.yaml</code></p>

<ul>
<li>Veiligheid: geen secrets loggen; respecteer `vereistes*.txt` en netwerkbeperkingen.</li>
<li>Stijl: volg bestaande structuur, import‚Äëvolgorde, en tooling (ruff/black waar geconfigureerd).</li>
<li>Documentatie: update relevante docs bij functionele wijzigingen; plaats documenten op de juiste plek (zie `docs/CANONICAL_LOCATIONS.md`).</li>
<li>Tests: maak/actualiseer tests bij nieuw gedrag; run gerichte suites waar mogelijk.</li>
</ul>

<h2>No‚ÄëAssumptions / Strict Mode & Approval Ladder</h2>

<h3>üéØ Approval Ladder (Wanneer toestemming vragen)</h3>

<h4>‚úÖ AUTO-APPROVE (Geen bevestiging nodig)</h4>
<p>| Operatie | Voorwaarde | Voorbeelden |</p>
<p>|----------|------------|-------------|</p>
<p>| Lezen/Zoeken | Altijd | <code>grep</code>, <code>rg</code>, <code>find</code>, <code>cat</code> |</p>
<p>| Tests draaien | < 10 files | <code>pytest tests/unit/</code> |</p>
<p>| Linting/Formatting | Bestaande files | <code>ruff check</code>, <code>black</code> |</p>
<p>| Documentatie | < 100 regels EN geen structuur | Typos, comments |</p>
<p>| Git status/diff | Altijd | <code>git status</code>, <code>git diff</code> |</p>

<h4>üî¥ APPROVAL VEREIST (Moet vragen)</h4>
<p>| Operatie | Trigger | Rationale |</p>
<p>|----------|---------|-----------|</p>
<p>| Code patches | > 100 regels OF > 5 files | Grote impact |</p>
<p>| Verwijderen | > 5 files OF kritieke paden | Data verlies risico |</p>
<p>| Netwerk calls | Externe APIs | Security/kosten |</p>
<p>| Schema wijzigingen | Database structuur | Breaking changes |</p>
<p>| Dependencies | pip install/remove | Supply chain |</p>
<p>| Git push/deploy | Productie impact | Permanente wijziging |</p>

<h3>Strict Mode Proces</h3>
<ul>
<li>Doel: aannames elimineren door beslissingen expliciet te maken en goedkeuring te vragen op tussenstappen.</li>
<li>Strict proces:</li>
<li> - Start elk werk met `update_plan` + lijst "open vragen/unknowns"; pauzeer tot goedkeuring.</li>
<li> - Plaats approval gates volgens ladder hierboven.</li>
<li> - Houd een Decision Log bij: beslissingen (geen aannames), motivatie en akkoordmoment.</li>
<li>Vereiste input (voorkomt aannames):</li>
<li> - Doel & scope, Definition of Done, acceptatiecriteria.</li>
<li> - API/contracten en wijzigingsruimte (wat wel/niet aanpassen).</li>
<li> - Randvoorwaarden: security, performance, UX/i18n/a11y, foutafhandeling.</li>
<li> - Voorbeelden/tegenvoorbeelden + testdata (happy/edge/error cases).</li>
<li> - Bron van waarheid en conflictbeleid bij inconsistenties.</li>
<li>Verificatie en bewijs:</li>
<li> - Lever testopdracht/scenario‚Äôs; draai tests en toon resultaten (logs/diff/screenshot waar passend).</li>
<li> - Per planstap een kort verificatieblok: wat geverifieerd, hoe, en met welk bewijs.</li>
<li>Alternatieven en keuzes:</li>
<li> - Geef per ontwerpbesluit 2‚Äì3 alternatieven met trade‚Äëoffs; vraag om keuze v√≥√≥r implementatie.</li>
<li>Scope‚Äëbescherming:</li>
<li> - Stel wijzigingsgrenzen: enkel paden X/Y, maximaal N regels diff, geen hernoem/format buiten scope.</li>
<li> - Benoem welke feature flags/env‚Äëvars gebruikt mogen worden.</li>
<li>Templates (handig):</li>
<li> - Opdrachtbrief: doel, scope, DoD, constraints, risico‚Äôs, testcases, SSoT.</li>
<li> - Review‚Äëgate: beslissingen ter goedkeuring, impact, rollback, testplan.</li>
<li>Direct toepasbaar (in deze repo):</li>
<li> - Zet ‚Äúno‚Äëassumptions‚Äù actief: agent stopt bij unknowns en vraagt eerst om akkoord.</li>
<li> - Start met een unknowns‚Äëlijst en laat die expliciet goedkeuren v√≥√≥r implementatie.</li>
</ul>

<h3>Slash Commands (toggles)</h3>
<ul>
<li>Gebruik onderstaande slash‚Äëcommando‚Äôs in je chat met de agent:</li>
<li> - `\/strict on` ‚Äî activeer strict mode (geen aannames; agent pauzeert voor akkoord bij patches, tests, netwerk, DB‚Äëreset).</li>
<li> - `\/strict off` ‚Äî deactiveer strict mode.</li>
<li> - `\/approve` ‚Äî geef akkoord voor de volgende geblokkeerde stap (patch/test/netwerk/DB). Optioneel: `\/approve all` voor alle huidige blokkers.</li>
<li> - `\/deny` ‚Äî weiger de volgende geblokkeerde stap; agent biedt alternatief of vraagt om herplanning.</li>
<li> - `\/plan on` ‚Äî dwing update_plan per stap (blijft al actief in strict mode).</li>
<li> - `\/plan off` ‚Äî planmodus loslaten (niet aanbevolen).</li>
<li> - Optioneel scopes: `\/strict on patch,test` (alleen patches en tests onder gate). Scopes: `patch`, `test`, `network`, `db`, `all` (default `all`).</li>
</ul>

<p>Opmerking: Dit is een gedragsconventie van de agent (soft‚Äëgate). Voor harde system‚Äëgates gebruik je de sandbox/approval policy van de CLI (bijv. on‚Äërequest).</p>

<h3>Backlog ID Uniciteit (Quality Gate)</h3>
<ul>
<li>User stories (frontmatter `id: US-XXX`) zijn GLOBAAL uniek over de backlog (niet alleen per EPIC).</li>
<li>Bugs (`id: BUG-XXX`/`CFR-BUG-XXX`) zijn GLOBAAL uniek.</li>
<li>Voordat je een US/BUG aanmaakt of wijzigt: check duplicaten en kies het eerstvolgende vrije nummer.</li>
<li>CI/portal mogen falen bij ID‚Äëduplicaten; corrigeer altijd door te renummeren en referenties bij te werken.</li>
</ul>

<h2>Specifieke Agents (beschikbaar)</h2>

<h3>code-reviewer</h3>
<ul>
<li>Doel: Code‚Äëreviews van commits/diffs, genereren van concrete feedback en verbeterpunten.</li>
<li>Locatie: `~/.claude/agents/code-reviewer.md`</li>
<li>Typische inzet: PR‚Äëbeoordeling, quick sanity checks, style & security hints.</li>
</ul>

<h3>full-stack-developer</h3>
<ul>
<li>Doel: Implementeren van gewenste wijzigingen/kleine features volgens bestaande projectstandaarden.</li>
<li>Locatie: `~/.claude/agents/full-stack-developer.md`</li>
<li>Typische inzet: Code‚Äëaanpassingen met tests waar passend; houdt coverage ‚â• bestaande baseline.</li>
</ul>

<h3>debug-specialist</h3>
<ul>
<li>Doel: Reproduceren en diagnosticeren van bugs, minimale fixes voorbereiden.</li>
<li>Locatie: `~/.claude/agents/debug-specialist.md`</li>
<li>Typische inzet: Repro‚Äëstappen vastleggen, root cause aanwijzen, fix‚Äëplan voorstellen.</li>
</ul>

<h3>code-simplifier</h3>
<ul>
<li>Doel: Kleine refactors en opschoning zonder gedragswijziging (DRY, leesbaarheid, complexiteit omlaag).</li>
<li>Locatie: `~/.claude/agents/code-simplifier.md`</li>
<li>Typische inzet: Extract method, naamgeving verbeteren, dode code verwijderen met tests groen.</li>
</ul>

<h2>Verouderde Agents (niet ge√Ønstalleerd)</h2>

<h3>workflow-router</h3>
<ul>
<li>**Doel**: Classificeert opdrachten en kiest de juiste workflow, orkestreert handoffs tussen agents volgens `workflows.yaml`.</li>
<li>**Locatie**: `~/\.claude/agents/workflow-router.md`</li>
<li>**Input**: Intent/beschrijving, betrokken bestanden/diff, labels/urgentie</li>
<li>**Output**: Routeringsbesluit, handoff‚Äëpayload (work_unit_id, workflow, phase, gate_conditions, artifacts)</li>
<li>**Commando‚Äôs**:</li>
<li> - `ROUTE <beschrijving>`: automatische workflowselectie</li>
<li> - `START-AS <workflow> <beschrijving>`: forceer specifieke workflow</li>
<li> - `SUGGEST <beschrijving>`: suggesties met motivatie</li>
<li>**Workflows**: Zie overzicht hieronder; bronconfig: `~/\.claude/agents/workflows/workflows.yaml`</li>
</ul>

<h3>developer-implementer</h3>
<ul>
<li>**Doel**: Architectuur (SA/TA) vertalen naar productie‚Äëklare code, inclusief basis‚Äëtests en integratie</li>
<li>**Model**: opus</li>
<li>**Color**: blue</li>
<li>**Input**: Goedgekeurde SA/TA‚Äëdocumentatie, user stories met acceptatiecriteria</li>
<li>**Output**: Werkende modules/classes/functies met type hints en docstrings, basis unit‚Äë en integratietests</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Code Generatie: SA/TA naar modules volgens PEP8, SOLID principes</li>
<li>Test Foundation: Min. 1 unit + 1 integration test per feature, AAA patroon</li>
<li>Validatie: Linting (black/ruff), pytest runs, type checking</li>
<li>Documentatie: Comprehensive docstrings (Google/NumPy format)</li>
<li>Versie Control: Atomic commits met conventional format (feat:, fix:, etc.)</li>
</ol>
<ul>
<li>**Werkstroom**: Analyze ‚Üí Plan ‚Üí Implement ‚Üí Test ‚Üí Validate ‚Üí Document ‚Üí Commit ‚Üí Verify</li>
<li>**Quality Standards**:</li>
<li> - Elke publieke functie heeft docstring</li>
<li> - Min. 80% test coverage per module</li>
<li> - Geen lint warnings</li>
<li> - Type hints verplicht</li>
<li> - Geen hardcoded values</li>
<li> - DRY principe</li>
<li>**MCP Tools**: Filesystem, Pytest, Git, Docs/Markdown, HTTP (when available)</li>
</ul>

<h3>business-analyst-justice</h3>
<ul>
<li>**Doel**: Business/ketenwensen vertalen naar uitvoerbare artefacten binnen Nederlandse justitiedomein</li>
<li>**Model**: opus</li>
<li>**Color**: orange</li>
<li>**Input**: Klantvraag/ketenbehoefte, betrokken organisaties (OM/DJI/Justid/Rechtspraak)</li>
<li>**Output**: User stories met SMART acceptatiecriteria in `docs/backlog/stories/MASTER-EPICS-USER-STORIES.md`</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Intake & Analyse: US-XXX format, scope, domeinregels, constraints</li>
<li>Domeinintegratie: ASTRA/NORA/GEMMA koppeling, terminologie consistentie</li>
<li>Bridge Function: Co√∂rdinatie tussen alle agents</li>
<li>Acceptatie Test Prep: Gegeven-Wanneer-Dan format (BDD)</li>
<li>Validatie & Compliance: Reports in `docs/reports/<ID>.md`</li>
</ol>
<ul>
<li>**Enhanced Capabilities**:</li>
<li> - ASTRA Template Library</li>
<li> - Chain Impact Analyzer</li>
<li> - Vereisten Database Integration</li>
<li> - Traceability Matrix Generator</li>
<li>**Domain Expertise**: OM processen, DJI operaties, Justid standards, Rechtspraak procedures</li>
<li>**Template**: Gebruikersverhaal (As/I want/So that), Acceptatiecriteria (BDD), Domeinregels, Implementatie Notities</li>
</ul>

<h3>justice-architecture-designer</h3>
<ul>
<li>**Doel**: EA/SA/TA‚Äëdocumentatie opstellen voor justitieketen systemen conform overheidsstandaarden</li>
<li>**Model**: opus</li>
<li>**Color**: red</li>
<li>**Input**: User story/vereistes, betrokken organisaties, compliance‚Äëeisen</li>
<li>**Output**: Formele architectuurartefacten in `docs/architectuur/`</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Enterprise Architecture (EA): Ketencontext, capabilities, stakeholders, ASTRA/NORA/GEMMA alignment</li>
<li>Solution Architecture (SA): Component diagrammen, use cases, API contracts, datastromen</li>
<li>Technical Architecture (TA): Framework keuzes, infrastructuur, NFRs, performance budgets</li>
</ol>
<ul>
<li>**Werkstroom**: Vereisten Analysis ‚Üí Layered Design (EA‚ÜíSA‚ÜíTA) ‚Üí Standards Compliance ‚Üí Documentation</li>
<li>**Standards**: NORA principes, GEMMA referentie, ASTRA guidelines, AVG/GDPR, BIO</li>
<li>**Documentation Format**:</li>
<li> - Verplichte frontmatter (canonical, status, owner, last_verified, applies_to)</li>
<li> - Executive Summary, Context & Scope, Architecture Decisions, Components/Design</li>
<li> - Standards & Compliance, Risks & Mitigations, References</li>
<li>**Decision Framework**: Beveiliging/privacy eerst, auditability, proven tech, 10+ jaar maintainability</li>
</ul>

<h3>refactor-specialist</h3>
<ul>
<li>**Doel**: Code‚Äëopschoning en optimalisatie zonder gedragswijziging</li>
<li>**Model**: opus</li>
<li>**Color**: pink</li>
<li>**Input**: Doelmodule(s), code smells, performance metrics</li>
<li>**Output**: Kleine atomische refactors met rationale in `docs/refactor-log.md`</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Code Smell Detection: Functies >30 regels, duplicatie, hoge complexiteit, anti-patterns</li>
<li>Micro-Refactoring: Extract Method, Introduce Interface, Replace Conditional, Rename, Move</li>
<li>Module Organization: Domain-driven design, clean boundaries, logical grouping</li>
<li>Testen Protocol: Test-first refactoring, snapshot testing waar nodig</li>
<li>Documentation: Refactor-log met before/after, CHANGELOG updates</li>
</ol>
<ul>
<li>**Operating Principles**:</li>
<li> - Incremental progress</li>
<li> - Behavior preservation</li>
<li> - Test-first approach</li>
<li> - Clear communication</li>
<li> - Prestaties aware</li>
<li> - Behoud domeinbegrippen</li>
<li>**Quality Gates**: Tests groen, coverage gelijk/hoger, geen lint errors, docs updated</li>
</ul>

<h3>code-reviewer-comprehensive</h3>
<ul>
<li>**Doel**: Grondige, systematische code review van wijzigingen</li>
<li>**Model**: opus</li>
<li>**Color**: purple</li>
<li>**Input**: Code diffs, user story context, test resultaten</li>
<li>**Output**: Gestructureerde review met categorized findings</li>
<li>**Review Checklist**:</li>
</ul>
<ol>
<li>Correctness & Logic: Vereisten implementatie, edge cases, error handling</li>
<li>Testen: Coverage adequaat, meaningful assertions, edge cases tested</li>
<li>Beveiliging & Privacy: Geen secrets/PII, input validation, OWASP checks</li>
<li>Prestaties: Efficiency, memory leaks, query optimization, complexity</li>
<li>Style & Readability: Naming conventions, DRY, modularization, type hints</li>
<li>Documentation: README updates, API docs, CHANGELOG, inline comments</li>
<li>Domain Compliance: Check tegen BA domeinregels</li>
</ol>
<ul>
<li>**Output Structure**:</li>
<li> - Summary: Overview en assessment</li>
<li> - Critical Issues (üî¥): Blocking - must fix</li>
<li> - Recommendations (üü°): Non-blocking improvements</li>
<li> - Positive Observations (üü¢): Good practices</li>
<li> - Code Suggestions: Concrete patches</li>
<li>**Final Verdict**: ‚úÖ APPROVED | ‚ö†Ô∏è APPROVED WITH CONDITIONS | ‚ùå CHANGES REQUESTED</li>
<li>**Communication**: Constructive, educational, concrete examples, pragmatic</li>
</ul>

<h3>quality-assurance-tester</h3>
<ul>
<li>**Doel**: Proactief testbeheer en quality assurance</li>
<li>**Model**: opus</li>
<li>**Color**: green</li>
<li>**Input**: Nieuwe/gewijzigde code, BA acceptatiecriteria, coverage reports</li>
<li>**Output**: Comprehensive test suites, coverage reports, failure analyses</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Test Creation: Unit/integration/property-based tests, AAA pattern, BA criteria validatie</li>
<li>Test Execution: Pytest runs, failure categorization (KRITIEK/FLAKY/MINOR)</li>
<li>Coverage Metrics: Min. 80% algemeen, 95%+ critical paths, reports in `docs/test-coverage.md`</li>
<li>Continuous Maintenance: Sync tests met code changes, update/remove obsolete tests</li>
</ol>
<ul>
<li>**Test Standards**:</li>
<li> - Naming: `test_[what]_[condition]_[expected_result]`</li>
<li> - Independence: Isolated tests</li>
<li> - Clear assertions: One logical assertion per test</li>
<li> - Fixtures voor common setup</li>
<li> - Parametrization voor scenarios</li>
<li> - Mock external afhankelijkheden</li>
<li>**Quality Gates**: No merge zonder tests, coverage mag niet dalen, all tests green</li>
<li>**MCP Integration**: Filesystem (tests/), Pytest, Git (test: prefix), Logging</li>
</ul>

<h3>tdd-orchestrator</h3>
<ul>
<li>**Doel**: Strikte TDD‚Äëworkflow orkestratie van TODO tot DONE</li>
<li>**Model**: opus</li>
<li>**Color**: yellow</li>
<li>**Input**: BA‚Äëgoedgekeurde user story/bug met ID</li>
<li>**Output**: Complete TDD trail met alle artifacts</li>
<li>**Werkstroom States**:</li>
</ul>
<ol>
<li>TODO ‚Üí ANALYSIS (BA): Story in MASTER-EPICS-USER-STORIES.md</li>
<li>DESIGN (Architect): EA/SA/TA docs, API contracts</li>
<li>TEST-RED (Tester): Failing tests, commit `test(<ID>): ...`</li>
<li>DEV-GREEN (Developer): Minimal implementation, commit `feat(<ID>): ...`</li>
<li>REVIEW (Reviewer): Review report in docs/reviews/</li>
<li>REFACTOR (Refactor): Micro-refactors, commit `refactor(<ID>): ...`</li>
<li>TEST-CONFIRM: All tests green</li>
<li>DONE/BLOCKED: Final status update</li>
</ol>
<ul>
<li>**Critical Rule**: NO DEV without preceding RED tests</li>
<li>**Required Artifacts per ID**:</li>
<li> - Architecture docs (EA/SA/TA)</li>
<li> - Unit & integration tests</li>
<li> - Review reports</li>
<li> - Refactor log entries</li>
<li> - CHANGELOG entry</li>
<li> - Status in MASTER-EPICS-USER-STORIES.md</li>
<li>**Quality Gates**: Strict phase progression, coverage standards, complete docs</li>
<li>**Status Format**: `ID: <ID> | State: <STATE> | Eigenaar: <AGENT> | Next: <ACTION> | Blockers: <ANY>`</li>
</ul>

<h3>devops-pipeline-orchestrator</h3>
<ul>
<li>**Doel**: CI/CD orkestreren vanaf branch/commit/PR tot release/deployment</li>
<li>**Locatie**: `~/\.claude/agents/devops-pipeline-orchestrator.md`</li>
<li>**Kern**: Branch management, semantische commits, PR lifecycle, CI‚Äëvalidatie, release tagging, staged‚Üíprod deployment met rollback</li>
<li>**Triggers**: DONE in TDD, handmatig verzoek, GitHub events (PR approval/merge)</li>
<li>**Output**: Release tags, changelog/notes, deploymentstatus, post‚Äëdeploy checks</li>
<li>**Commando‚Äôs**: `git`, `gh`, `pytest`, `ruff`, `black`, `make deploy-*`</li>
</ul>

<h3>prompt-engineer</h3>
<ul>
<li>**Doel**: Ondersteunende agent voor prompt‚Äëoptimalisatie, outputstructuur en token‚Äëeffici√´ntie</li>
<li>**Locatie**: `~/\.claude/agents/prompt-engineer.md`</li>
<li>**Gebruik**: Als support in fases die baat hebben bij betere prompts (Analysis, Test‚ÄëRed, Dev‚ÄëGreen, Review)</li>
<li>**Output**: Verbeterde prompts/templates, duidelijkere outputformaten, lagere kans op hallucinaties</li>
</ul>

<h3>doc-standards-guardian</h3>
<ul>
<li>**Doel**: Bewaken en afdwingen van documentatiestandaarden</li>
<li>**Model**: opus</li>
<li>**Color**: cyan</li>
<li>**Input**: Recente wijzigingen, agent outputs, project standards</li>
<li>**Output**: Updated/generated docs, compliance reports, auto-fixes</li>
<li>**Core Verantwoordelijkheden**:</li>
</ul>
<ol>
<li>Document Presence: Ensure mandatory files exist (README, CLAUDE.md, INDEX.md, etc.)</li>
<li>Standards Enforcement: Frontmatter vereistes, single source of truth, ID references</li>
<li>Cross-Agent Sync: Update docs based on other agent outputs</li>
<li>Automated Updates: CHANGELOG generation, API contracts, test coverage</li>
<li>Navigation: Maintain docs/INDEX.md as central hub</li>
<li>Validation: Audit compliance, check links, detect duplicates</li>
</ol>
<ul>
<li>**Mandatory Files**:</li>
<li> - README.md (root)</li>
<li> - CLAUDE.md (root - voor Claude Code)</li>
<li> - docs/INDEX.md</li>
<li> - docs/CANONICAL_LOCATIONS.md</li>
<li> - docs/DOCUMENTATION_POLICY.md</li>
<li> - docs/backlog/stories/MASTER-EPICS-USER-STORIES.md</li>
<li>**Kritieke Regels**:</li>
<li> - ALTIJD: `/docs/archief/` voor archivering</li>
<li> - NOOIT: Nieuwe archive directories</li>
<li> - VERPLICHT: Check eerst of document bestaat</li>
<li> - UPDATE: Bestaande docs, geen duplicaten</li>
<li>**Quality Gates**: No multiple canonical:true, complete frontmatter, no broken links</li>
</ul>

<h2>Gebruikspatronen (zonder workflow‚Äërouter)</h2>
<ul>
<li>Geen centrale router/workflows in gebruik; kies handmatig de agent:</li>
<li> - Review/diff/PR ‚Üí `code-reviewer`</li>
<li> - Bug reproduceren/diagnosticeren ‚Üí `debug-specialist`</li>
<li> - Kleine refactor/opschoning ‚Üí `code-simplifier`</li>
<li> - Implementatie/kleine feature ‚Üí `full-stack-developer`</li>
</ul>

<h2>Aanroepen en Namen</h2>
<ul>
<li>Agent‚Äënamen: gebruik exact: `code-reviewer`, `code-simplifier`, `debug-specialist`, `full-stack-developer`.</li>
<li>Overdracht: leg kort de context, doel, scope, en "done"‚Äëcriteria vast voordat je de agent start.</li>
<li>Artefacten: link naar relevante bestanden (code, config, docs) en verwachte outputlocaties.</li>
</ul>

<h2>Kwaliteitschecklist (voor elke agent)</h2>
<ul>
<li>Context verzameld en gelinkt?</li>
<li>Scope en aannames expliciet?</li>
<li>Output voldoet aan gevraagde vorm/locatie?</li>
<li>Tests/validatie uitgevoerd waar passend?</li>
<li>Documentatie bijgewerkt en indexen ge√ºpdatet?</li>
</ul>

<h2>Single Source of Truth (SSoT) Matrix</h2>

<p>| Onderwerp | ENIGE Canonieke Bron | Doel |</p>
<p>|-----------|---------------------|------|</p>
<p>| <strong>Backlog Structuur</strong> | <code>docs/guidelines/CANONICAL_LOCATIONS.md</code> | EPIC‚ÜíUS‚ÜíBUG hi√´rarchie |</p>
<p>| <strong>Agent Gedrag</strong> | <code>docs/guidelines/AGENTS.md</code> (dit document) | Approval gates, workflows |</p>
<p>| <strong>Database Schema</strong> | <code>src/database/schema.sql</code> | Tabellen, migraties |</p>
<p>| <strong>Database Beleid</strong> | <code>docs/guidelines/DATABASE_GUIDELINES.md</code> | Connection, pooling, backup |</p>
<p>| <strong>Validatieregels</strong> | <code>config/toetsregels/regels/*.json</code> | Regel definities & prioriteit |</p>
<p>| <strong>Test Strategie</strong> | <code>docs/guidelines/TDD_TO_DEPLOYMENT_WORKFLOW.md</code> | Coverage targets, TDD flow |</p>
<p>| <strong>Documentatie Beleid</strong> | <code>docs/guidelines/DOCUMENTATION_POLICY.md</code> | Formatting, structuur |</p>
<p>| <strong>Import/Naming Rules</strong> | <code>~/.ai-agents/quality-gates.yaml</code> | Forbidden patterns |</p>
<p>| <strong>Approval Requirements</strong> | <code>~/.ai-agents/UNIFIED_INSTRUCTIONS.md</code> | Approval ladder detail |</p>
<p>| <strong>API Configuratie</strong> | <code>config/rate_limit_config.py</code> | Timeouts, rate limits |</p>
<p>| <strong>Architectuur</strong> | <code>docs/architectuur/SOLUTION_ARCHITECTURE.md</code> | Service design, patterns |</p>
<p>| <strong>CI/CD Gates</strong> | <code>.github/workflows/epic-010-gates.yml</code> | Automated checks |</p>

<p>‚ö†Ô∏è <strong>NOOIT dupliceren, ALTIJD verwijzen naar canonieke bron</strong></p>

<h2>Verwijzingen</h2>
<ul>
<li>Canonical Locations: `docs/CANONICAL_LOCATIONS.md`</li>
<li>Documentatie Index: `docs/INDEX.md`</li>
<li>Architectuur: `docs/architectuur/`</li>
<li>Testen: `docs/testing/`</li>
<li>Projectkaders: `README.md`, `CLAUDE.md`</li>
<li>Harmonisatie Instructies: `~/.ai-agents/UNIFIED_INSTRUCTIONS.md`</li>
<li>Quality Gates: `~/.ai-agents/quality-gates.yaml`</li>
<li>Preflight Script: `~/.ai-agents/preflight-checks.sh`</li>
<li>Claude Code Agents (beschikbaar): `~/.claude/agents/` ‚Üí `code-reviewer.md`, `code-simplifier.md`, `debug-specialist.md`, `full-stack-developer.md`</li>
<li>Multi‚ÄëAgent gids: `docs/handleidingen/ontwikkelaars/codex-multi-agent-gebruik.md`</li>
<li>Multi‚ÄëAgent Cheatsheet & Prompt Presets: `docs/snippets/CODEX_PROMPT_PRESETS.md`</li>
</ul>

<p>---</p>

<p>Laatste update: 18-09-2025 (Harmonisatie update)</p>
<p>Voor vragen over agents, zie de individuele agent definities in <code>/Users/chrislehnen/.claude/agents/</code>.</p>

  </div>
</body>
</html>