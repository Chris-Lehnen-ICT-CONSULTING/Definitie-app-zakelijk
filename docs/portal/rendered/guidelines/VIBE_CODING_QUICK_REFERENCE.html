<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vibe Coding Quick Reference Card</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">← Terug naar Portal</a>
    <p>---</p>
<p>aangemaakt: 2025-10-17</p>
<p>applies_to: definitie-app@current</p>
<p>bijgewerkt: 2025-10-17</p>
<p>canonical: true</p>
<p>type: quick-reference</p>
<p>parent: VIBE_CODING_WORKFLOW.md</p>
<p>---</p>

<h1>Vibe Coding Quick Reference Card</h1>

<p><strong>One-page reference for immediate workflow decisions.</strong></p>

<p>---</p>

<h2>Decision Flowchart</h2>

<pre><code>START: What am I doing?
│
├─ "I don't know what to build yet"
│   └─&gt; ANALYSIS Workflow (5-step)
│       Duration: 15-30 min
│       Output: User Story + Design
│
├─ "Production is broken RIGHT NOW"
│   └─&gt; HOTFIX Workflow (3-step)
│       Duration: 10-30 min
│       Output: Quick fix + test
│
├─ "I have a clear feature to build"
│   └─&gt; FULL_TDD Workflow (8-step)
│       Duration: 30-90 min
│       Output: Complete feature + tests
│
├─ "Code quality is bad but it works"
│   └─&gt; REFACTOR Workflow (4-step)
│       Duration: 15-30 min
│       Output: Cleaner code, same behavior
│
├─ "I need to review existing code"
│   └─&gt; REVIEW Workflow (2-step)
│       Duration: 15-30 min
│       Output: Review report
│
└─ "Just fixing documentation"
    └─&gt; DOCUMENT Workflow (3-step)
        Duration: 5-20 min
        Output: Updated docs</code></pre>

<p>---</p>

<h2>Workflow Cheat Sheet</h2>

<h3>ANALYSIS (5-Step Discovery)</h3>
<pre><code>[1] CLARIFY    → Ask questions (AskUserQuestion)
[2] RESEARCH   → Explore codebase (Grep, Read)
[3] DESIGN     → Draft solution
[4] VALIDATE   → Confirm with user
[5] DOCUMENT   → Create US-XXX.md</code></pre>
<p><strong>Exit:</strong> User Story ready for implementation</p>

<h3>FULL_TDD (8-Step RED-GREEN-REFACTOR)</h3>
<pre><code>[1] UNDERSTAND → Read US-XXX.md
[2] TEST-RED   → Write failing tests
[3] COMMIT     → test(US-XXX): ...
[4] IMPLEMENT  → Write minimal code
[5] TEST-GREEN → All tests pass
[6] COMMIT     → feat(US-XXX): ...
[7] REFACTOR   → Improve quality
[8] VERIFY     → Coverage + lint</code></pre>
<p><strong>Exit:</strong> Feature complete, tests green</p>

<h3>HOTFIX (3-Step Emergency)</h3>
<pre><code>[1] REPRODUCE  → Identify bug
[2] PATCH      → Minimal fix + test
[3] DEPLOY     → Push to production</code></pre>
<p><strong>Exit:</strong> Bug fixed, deployed</p>

<h3>REFACTOR (4-Step Quality)</h3>
<pre><code>[1] BASELINE   → Check current coverage
[2] REFACTOR   → Small improvements
[3] VERIFY     → Tests still green
[4] DOCUMENT   → Update refactor log</code></pre>
<p><strong>Exit:</strong> Code cleaner, behavior unchanged</p>

<h3>REVIEW (2-Step Audit)</h3>
<pre><code>[1] AUDIT      → 7-point checklist
[2] REPORT     → Document findings</code></pre>
<p><strong>Exit:</strong> Review report created</p>

<h3>DOCUMENT (3-Step Cleanup)</h3>
<pre><code>[1] AUDIT      → Find issues
[2] FIX        → Update docs
[3] VERIFY     → Check links/structure</code></pre>
<p><strong>Exit:</strong> Docs updated</p>

<p>---</p>

<h2>Session Management</h2>

<h3>Every Session Start</h3>
<pre><code># ALWAYS run these three
git status
git log --oneline -5
cat CLAUDE.md  # Read project instructions

# If continuing work
cat docs/backlog/EPIC-XXX/US-XXX/HANDOFF-NOTES.md</code></pre>

<h3>Every Session End (Work Incomplete)</h3>
<pre><code># Create handoff note
cat &gt; docs/backlog/EPIC-XXX/US-XXX/HANDOFF-NOTES.md &lt;&lt; EOF
## Handoff [$(date +%Y-%m-%d)]
Work Unit: US-XXX
Progress: X%
What I did: ...
What's next: ...
Blockers: ...
EOF

# Commit WIP
git add .
git commit -m "WIP(US-XXX): &lt;description&gt;"</code></pre>

<h3>Every Session End (Work Complete)</h3>
<pre><code># Update status
# Edit US-XXX.md: status: "Ready for Review"

# Final commit
git commit -m "feat(US-XXX): &lt;description&gt;"
git push</code></pre>

<p>---</p>

<h2>Essential Commands</h2>

<h3>Testing</h3>
<pre><code># Run specific test
pytest tests/path/to/test_file.py

# Run with coverage
pytest --cov=src --cov-report=html

# Run category
pytest -m unit
pytest -m integration
pytest -m smoke

# Fast tests only
pytest -m "not slow"</code></pre>

<h3>Code Quality</h3>
<pre><code># All quality checks
pre-commit run --all-files

# Individual checks
ruff check src
black src</code></pre>

<h3>Development</h3>
<pre><code># Start app (recommended)
bash scripts/run_app.sh

# Alternative
make dev

# Direct run
OPENAI_API_KEY="$OPENAI_API_KEY_PROD" streamlit run src/main.py</code></pre>

<h3>Git</h3>
<pre><code># Semantic commit
git commit -m "type(scope): description"

# Types: feat, fix, test, refactor, docs, chore, perf

# Examples
git commit -m "test(US-042): add failing tests"
git commit -m "feat(US-042): implement feature"
git commit -m "fix(US-042): resolve edge case"
git commit -m "refactor(US-042): extract helper"</code></pre>

<p>---</p>

<h2>Critical Rules</h2>

<h3>From CLAUDE.md</h3>

<p><strong>FORBIDDEN:</strong></p>
<ul>
<li>`import streamlit` in `services/` (UI in business logic)</li>
<li>Creating files in project root (use proper directories)</li>
<li>Backwards compatibility code (refactor, don't bridge)</li>
<li>God object / catch-all helpers (e.g., dry_helpers.py)</li>
<li>Direct `st.session_state` access (use SessionStateManager)</li>
</ul>

<p><strong>REQUIRED:</strong></p>
<ul>
<li>Tests BEFORE implementation (RED → GREEN)</li>
<li>Semantic commits (type(scope): description)</li>
<li>Files < 500 LOC (split if larger)</li>
<li>Coverage ≥ 60% (target 80%+)</li>
<li>Update refactor log when refactoring</li>
</ul>

<h3>From UNIFIED_INSTRUCTIONS.md</h3>

<p><strong>APPROVAL REQUIRED:</strong></p>
<ul>
<li>> 100 lines changed</li>
<li>> 5 files modified</li>
<li>Network calls (external APIs)</li>
<li>Database schema changes</li>
<li>Git push/merge/rebase</li>
</ul>

<p><strong>AUTO-APPROVED:</strong></p>
<ul>
<li>Read/search operations</li>
<li>Test execution (< 10 files)</li>
<li>Lint/format existing files</li>
<li>Documentation (< 100 lines)</li>
</ul>

<p>---</p>

<h2>File Locations</h2>

<pre><code>User Stories:       docs/backlog/EPIC-XXX/US-XXX/US-XXX.md
EPICs:              docs/backlog/EPIC-XXX/EPIC-XXX.md
Architecture:       docs/architectuur/
Reviews:            docs/reviews/&lt;ID&gt;-review.md
Refactor Log:       docs/refactor-log.md
Handoff Notes:      docs/backlog/EPIC-XXX/US-XXX/HANDOFF-NOTES.md

Tests:              tests/ (mirrors src/ structure)
Source Code:        src/
Config:             config/
Scripts:            scripts/
Data:               data/ (only database here)</code></pre>

<p>---</p>

<h2>Troubleshooting</h2>

<h3>"I'm stuck, what workflow?"</h3>
<p>→ Start with <strong>ANALYSIS</strong> workflow to clarify</p>

<h3>"Tests won't pass"</h3>
<p>→ Check you're in correct phase (RED before GREEN)</p>

<h3>"File too large (>500 LOC)"</h3>
<p>→ Use <strong>REFACTOR</strong> workflow to split</p>

<h3>"Production bug"</h3>
<p>→ Use <strong>HOTFIX</strong> workflow (fast track)</p>

<h3>"Lost context between sessions"</h3>
<p>→ Read HANDOFF-NOTES.md or git log</p>

<h3>"Not sure what to commit"</h3>
<p>→ Use semantic commit format cheat sheet above</p>

<p>---</p>

<h2>Common Patterns</h2>

<h3>Pattern: Add New Validation Rule</h3>
<pre><code>Workflow: FULL_TDD
Files:
  - config/toetsregels/regels/&lt;RULE&gt;.json
  - src/toetsregels/regels/&lt;RULE&gt;.py
  - tests/toetsregels/test_&lt;RULE&gt;.py
Steps: 1→8 (all TDD steps)</code></pre>

<h3>Pattern: Fix Service Bug</h3>
<pre><code>Workflow: HOTFIX (if urgent) or FULL_TDD (if not)
Steps:
  1. Reproduce with test
  2. Fix minimal code
  3. Verify no regression</code></pre>

<h3>Pattern: Split Large File</h3>
<pre><code>Workflow: REFACTOR
Steps:
  1. Baseline coverage
  2. Extract logical groups
  3. Keep tests green
  4. Update refactor log</code></pre>

<h3>Pattern: New UI Feature</h3>
<pre><code>Workflow: ANALYSIS → FULL_TDD
Session 1 (ANALYSIS):
  - Clarify requirements
  - Design approach
  - Create US-XXX.md
Session 2 (FULL_TDD):
  - Write tests
  - Implement
  - Verify</code></pre>

<p>---</p>

<h2>When to Switch Workflows</h2>

<h3>Switch from ANALYSIS to FULL_TDD</h3>
<p><strong>Trigger:</strong> User Story complete, design validated</p>
<p><strong>Handoff:</strong> US-XXX.md file</p>

<h3>Switch from FULL_TDD to REVIEW</h3>
<p><strong>Trigger:</strong> Feature complete, all tests green</p>
<p><strong>Handoff:</strong> Git commits</p>

<h3>Switch from REVIEW to REFACTOR</h3>
<p><strong>Trigger:</strong> Review complete, recommendations identified</p>
<p><strong>Handoff:</strong> Review report</p>

<h3>Switch from any to HOTFIX</h3>
<p><strong>Trigger:</strong> Production incident</p>
<p><strong>Action:</strong> Git stash current work, switch branches</p>

<p>---</p>

<h2>Quality Checklist</h2>

<h3>Before Committing</h3>
<ul>
<li>[ ] All tests green (`pytest`)</li>
<li>[ ] No linting errors (`ruff check src`)</li>
<li>[ ] Files formatted (`black src`)</li>
<li>[ ] Coverage maintained (≥ 60%)</li>
<li>[ ] Semantic commit message</li>
<li>[ ] No files in root directory</li>
</ul>

<h3>Before Pushing</h3>
<ul>
<li>[ ] All commits made</li>
<li>[ ] CHANGELOG updated (if needed)</li>
<li>[ ] US-XXX status updated</li>
<li>[ ] Handoff notes created (if incomplete)</li>
</ul>

<h3>Before Session End</h3>
<ul>
<li>[ ] Work committed or stashed</li>
<li>[ ] Git status clean</li>
<li>[ ] Next steps documented</li>
</ul>

<p>---</p>

<h2>Emergency Procedures</h2>

<h3>Production Incident</h3>
<pre><code>1. STOP current work
2. git stash save "WIP: &lt;description&gt;"
3. git checkout main
4. git checkout -b hotfix/&lt;issue&gt;
5. Execute HOTFIX workflow
6. Deploy fix
7. Return to feature work: git stash pop</code></pre>

<h3>Lost Context</h3>
<pre><code>1. git log --oneline -10 (review recent work)
2. git diff main (see what changed)
3. Read HANDOFF-NOTES.md (if exists)
4. Read US-XXX.md (understand goal)
5. Continue from current state</code></pre>

<h3>Breaking Change</h3>
<pre><code>1. git status (identify changes)
2. git diff (review changes)
3. pytest (identify failures)
4. git revert &lt;commit&gt; (if needed)
5. git reset --hard HEAD (nuclear option)</code></pre>

<p>---</p>

<h2>Key Metrics</h2>

<p>| Metric | Target | Command |</p>
<p>|--------|--------|---------|</p>
<p>| Test Coverage | ≥ 60% (target 80%) | <code>pytest --cov=src</code> |</p>
<p>| File Size | < 500 LOC | <code>wc -l <file></code> |</p>
<p>| Lint Errors | 0 | <code>ruff check src</code> |</p>
<p>| Session Duration | < 90 min | Timer |</p>
<p>| Tests Passing | 100% | <code>pytest</code> |</p>

<p>---</p>

<h2>Reference Links</h2>

<ul>
<li>**Full Workflow Guide:** VIBE_CODING_WORKFLOW.md</li>
<li>**Project Instructions:** CLAUDE.md</li>
<li>**Unified Rules:** ~/.ai-agents/UNIFIED_INSTRUCTIONS.md</li>
<li>**TDD Workflow:** TDD_TO_DEPLOYMENT_WORKFLOW.md</li>
<li>**Canonical Locations:** CANONICAL_LOCATIONS.md</li>
</ul>

<p>---</p>

<p><strong>Print this page and keep it visible during development sessions.</strong></p>

<p><strong>Last Updated:</strong> 2025-10-17</p>

  </div>
</body>
</html>