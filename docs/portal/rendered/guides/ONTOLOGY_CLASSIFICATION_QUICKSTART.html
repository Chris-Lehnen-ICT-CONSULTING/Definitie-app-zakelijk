<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ontology Classification - Quick Start Guide</title>
  <link rel="stylesheet" href="../portal.css" />
  <style>
    .doc { max-width: 900px; margin: 16px auto 48px auto; padding: 0 16px; }
    .doc h1,.doc h2,.doc h3,.doc h4{ color:#223 }
    .doc p{ line-height:1.6; color:#222 }
    .doc a{ color:#1d4ed8; text-decoration: underline; }
    .doc pre{ background:#0b1020; color:#e6edf3; padding:12px; overflow:auto; border-radius:8px }
    .doc code{ background:#f0f2f5; padding:2px 6px; border-radius:4px }
    .back{ display:inline-block; margin:12px 0; padding:6px 10px; border:1px solid #ccd; border-radius:6px; text-decoration:none; color:#223; background:#f8f9fb }
  </style>
</head>
<body>
  <div class="doc">
    <a class="back" href="../../index.html">‚Üê Terug naar Portal</a>
    <h1>Ontology Classification - Quick Start Guide</h1>

<p><strong>Voor:</strong> Developers die het nieuwe classificatie systeem willen gebruiken</p>
<p><strong>Tijd:</strong> 5 minuten</p>

<h2>TL;DR</h2>

<pre><code># 1. Get service from container
from utils.container_manager import get_cached_container

container = get_cached_container()
classifier = container.ontology_classifier()

# 2. Classificeer begrip
result = classifier.classify(
    begrip="verificatie",
    definitie="Het controleren van de juistheid"
)

# 3. Check resultaat
print(f"{result.level} (confidence: {result.confidence:.0%})")
# Output: PROCES (confidence: 92%)</code></pre>

<h2>Ontologische Categorie√´n</h2>

<p>| Categorie | Emoji | Beschrijving | Voorbeeld |</p>
<p>|-----------|-------|--------------|-----------|</p>
<p>| <strong>TYPE</strong> | üì¶ | Algemene categorie√´n en soorten | "appel", "voertuig" |</p>
<p>| <strong>EXEMPLAAR</strong> | üéØ | Specifieke instanties | "dit document", "Artikel 6 GDPR" |</p>
<p>| <strong>PROCES</strong> | ‚öôÔ∏è | Handelingen en activiteiten | "verificatie", "aanvragen" |</p>
<p>| <strong>RESULTAAT</strong> | ‚úÖ | Uitkomsten van processen | "verleende vergunning" |</p>
<p>| <strong>ONBESLIST</strong> | ‚ùì | Onduidelijk zonder meer context | (vermijd dit) |</p>

<h2>Basis Gebruik</h2>

<h3>Simpele Classificatie</h3>

<pre><code>classifier = container.ontology_classifier()

result = classifier.classify(
    begrip="appel",
    definitie="Een soort fruit"
)

print(f"Level: {result.level}")
print(f"Confidence: {result.confidence:.0%}")
print(f"Rationale: {result.rationale}")</code></pre>

<h3>Met Context</h3>

<p>Voor betere accuracy, voeg context toe:</p>

<pre><code>result = classifier.classify(
    begrip="verificatie",
    definitie="Het controleren van de juistheid van gegevens",
    context="Juridische procedures voor identiteitscontrole",
    voorbeelden=[
        "Het verifi√´ren van identiteit bij aanmelding",
        "De verificatie van documenten door de ambtenaar"
    ]
)</code></pre>

<h3>Batch Classificatie</h3>

<p>Voor meerdere begrippen tegelijk:</p>

<pre><code>items = [
    {"begrip": "appel", "definitie": "Een soort fruit"},
    {"begrip": "plukken", "definitie": "Het verwijderen van fruit"},
    {"begrip": "geplukte appel", "definitie": "Resultaat van plukken"}
]

results = classifier.classify_batch(items)

for item, result in zip(items, results):
    print(f"{item['begrip']} ‚Üí {result.level}")</code></pre>

<h2>UI Weergave</h2>

<h3>Full Display</h3>

<pre><code>from ui.components.ontology_classification_display import display_ontology_classification

# In Streamlit context
display_ontology_classification(result, mode="full")</code></pre>

<h3>Compact Display</h3>

<p>Voor inline weergave:</p>

<pre><code>display_ontology_classification(result, mode="compact")
# Output: ‚öôÔ∏è PROCES (92%)</code></pre>

<h3>Met Prompt Transparency</h3>

<pre><code>import yaml

with open("config/prompts/ontology_classification.yaml") as f:
    prompt_config = yaml.safe_load(f)

display_ontology_classification(
    result,
    mode="with_prompt",
    prompt_content=prompt_config['system']
)</code></pre>

<h2>Validatie Warnings Interpreteren</h2>

<h3>Geen Warnings = Goede Classificatie</h3>

<pre><code>result = classifier.classify("appel", "Een soort fruit")

if not result.validation_warnings:
    print("‚úì Classificatie lijkt plausibel")</code></pre>

<h3>Met Warnings = Controleer</h3>

<pre><code>result = classifier.classify(
    "document",  # Statisch object
    "De handeling van opstellen"  # PROCES definitie
)

if result.validation_warnings:
    print("‚ö†Ô∏è Waarschuwingen:")
    for warning in result.validation_warnings:
        print(f"  - {warning}")

# Output:
# ‚ö†Ô∏è Waarschuwingen:
#   - PROCES classificatie onwaarschijnlijk voor statisch object: document
#   - Anti-indicator gevonden voor PROCES: 'document' in begrip</code></pre>

<h2>Common Patterns</h2>

<h3>In UI Tab</h3>

<pre><code>class MyTab:
    def render(self):
        begrip = st.text_input("Begrip")
        definitie = st.text_area("Definitie")

        if st.button("Classificeer"):
            classifier = self.container.ontology_classifier()

            result = classifier.classify(begrip, definitie)

            # Display result
            display_ontology_classification(result, mode="full")

            # Store in session state
            st.session_state.ontology_result = result</code></pre>

<h3>Caching Results</h3>

<pre><code># Cache per begrip + definitie hash
cache_key = f"ontology_{begrip}_{hash(definitie)}"

if cache_key not in st.session_state:
    st.session_state[cache_key] = classifier.classify(begrip, definitie)

result = st.session_state[cache_key]</code></pre>

<h3>Backward Compatibility</h3>

<p>Voor legacy code die score dict verwacht:</p>

<pre><code>result = classifier.classify(begrip, definitie)

# Convert to legacy format
legacy_scores = {
    "type": 1.0 if result.level == "TYPE" else 0.0,
    "exemplaar": 1.0 if result.level == "EXEMPLAAR" else 0.0,
    "proces": 1.0 if result.level == "PROCES" else 0.0,
    "resultaat": 1.0 if result.level == "RESULTAAT" else 0.0
}

# Convert to enum
from domain.ontological_categories import OntologischeCategorie
categorie = OntologischeCategorie[result.level]</code></pre>

<h2>Troubleshooting</h2>

<h3>Lage Confidence (<60%)</h3>

<p><strong>Oplossingen:</strong></p>
<ul>
<li>Voeg context toe</li>
<li>Verbeter definitie kwaliteit</li>
<li>Voeg voorbeeldzinnen toe</li>
</ul>

<pre><code># Slecht (lage confidence)
result = classifier.classify("systeem", "Een geheel")

# Beter (hogere confidence)
result = classifier.classify(
    "systeem",
    "Een gestructureerd geheel van samenhangende onderdelen",
    context="IT infrastructuur",
    voorbeelden=["Het computersysteem", "Een managementsysteem"]
)</code></pre>

<h3>Veel ONBESLIST</h3>

<p>Als >20% classificaties ONBESLIST zijn:</p>

<ol>
<li>Check definitie kwaliteit (te vaag?)</li>
<li>Voeg meer context toe</li>
<li>Controleer of begrip √ºberhaupt classificeerbaar is</li>
</ol>

<h3>API Errors</h3>

<p>Bij API errors krijg je ONBESLIST fallback:</p>

<pre><code>result = classifier.classify(begrip, definitie)

if result.level == "ONBESLIST" and result.confidence == 0.0:
    if result.validation_warnings:
        error_msg = result.validation_warnings[0]
        if "ERROR:" in error_msg:
            st.error(f"API fout: {error_msg}")</code></pre>

<h2>Performance Tips</h2>

<h3>1. Cache Results</h3>

<pre><code># Eenmaal classificeren, hergebruiken
if 'classifications' not in st.session_state:
    st.session_state.classifications = {}

key = f"{begrip}_{hash(definitie)}"
if key not in st.session_state.classifications:
    st.session_state.classifications[key] = classifier.classify(begrip, definitie)

result = st.session_state.classifications[key]</code></pre>

<h3>2. Batch Processing</h3>

<pre><code># Effici√´nter dan loopen
items = [{"begrip": b, "definitie": d} for b, d in begrip_definitie_pairs]
results = classifier.classify_batch(items)</code></pre>

<h3>3. Skip Re-classification</h3>

<pre><code># Alleen herclassificeren bij significante wijzigingen
if st.session_state.get('last_definitie') != definitie:
    result = classifier.classify(begrip, definitie)
    st.session_state.last_definitie = definitie
    st.session_state.last_result = result
else:
    result = st.session_state.last_result</code></pre>

<h2>Testing</h2>

<h3>Unit Test Example</h3>

<pre><code>from unittest.mock import Mock
import json

def test_my_classification():
    # Mock AI service
    ai_service = Mock()
    ai_service.generate_completion.return_value = json.dumps({
        "level": "TYPE",
        "confidence": 0.85,
        "rationale": "Test",
        "linguistic_cues": []
    })

    # Create classifier
    classifier = OntologyClassifierService(ai_service)
    classifier.system_prompt = "Test"
    classifier.user_template = "{begrip} {definitie}"

    # Test
    result = classifier.classify("appel", "Een fruit")

    assert result.level == "TYPE"
    assert result.confidence == 0.85</code></pre>

<h2>Demo</h2>

<p>Run de demo voor interactieve voorbeelden:</p>

<pre><code>python scripts/demo_ontology_classification.py</code></pre>

<p>Dit toont:</p>
<ul>
<li>Basis classificatie</li>
<li>Classificatie met context</li>
<li>Batch processing</li>
<li>Validatie warnings</li>
<li>Alle categorie√´n</li>
</ul>

<h2>Next Steps</h2>

<ul>
<li>**Integration Guide:** `docs/technisch/ontology_classification_integration.md`</li>
<li>**Implementation Roadmap:** `docs/architectuur/ontology_classification_implementation_roadmap.md`</li>
<li>**API Docs:** `src/services/classification/ontology_classifier.py`</li>
<li>**Tests:** `tests/services/classification/`</li>
</ul>

<h2>Help & Support</h2>

<p><strong>Issues:</strong></p>
<ul>
<li>Lage confidence? ‚Üí Voeg context/voorbeelden toe</li>
<li>Veel warnings? ‚Üí Review classificatie, mogelijk terecht</li>
<li>API errors? ‚Üí Check logs, API key, rate limits</li>
</ul>

<p><strong>Questions:</strong></p>
<ul>
<li>Check documentation in `docs/technisch/`</li>
<li>Review test cases in `tests/services/classification/`</li>
<li>Run demo script voor voorbeelden</li>
</ul>

  </div>
</body>
</html>