<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DefinitieAgent - Professionele Architectuur Documentatie</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Tab styles */
        .tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tab-button {
            flex: 1;
            padding: 20px;
            border: none;
            background: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .tab-button:hover {
            background: #f0f0f0;
        }
        .tab-button.active {
            background: #667eea;
            color: white;
        }
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #764ba2;
        }
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tab-content.active {
            display: block;
        }

        /* Architecture diagram styles */
        .architecture-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        .architecture-section h2 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .architecture-section h3 {
            color: #555;
            margin-top: 20px;
        }

        /* Diagram container */
        .diagram-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* Component boxes */
        .component-box {
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .component-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .component-box.active {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        .component-box.new {
            background: #e8f5e9;
            border-color: #4caf50;
        }
        .component-box.deprecated {
            background: #ffebee;
            border-color: #f44336;
            opacity: 0.7;
        }

        /* Flow diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            padding: 20px;
        }
        .flow-arrow {
            font-size: 24px;
            color: #667eea;
            margin: 0 20px;
        }

        /* Layer diagram */
        .layer-diagram {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .layer {
            padding: 20px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        .layer.presentation { background: #3498db; }
        .layer.application { background: #9b59b6; }
        .layer.domain { background: #e74c3c; }
        .layer.infrastructure { background: #34495e; }

        /* Metrics cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }
        .metric-value {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
        }
        .metric-label {
            color: #666;
            margin-top: 10px;
        }
        .metric-change {
            color: #4caf50;
            font-size: 14px;
            margin-top: 5px;
        }

        /* Technology stack */
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .tech-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .tech-icon {
            width: 40px;
            height: 40px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* Deployment diagram */
        .deployment-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .deployment-node {
            background: #f8f9fa;
            border: 2px dashed #999;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .deployment-node h4 {
            margin-top: 0;
            color: #555;
        }

        /* Data flow diagram */
        .data-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .data-node {
            background: white;
            padding: 15px 25px;
            border-radius: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-weight: bold;
        }
        .data-arrow {
            flex: 1;
            height: 2px;
            background: #667eea;
            position: relative;
            margin: 0 20px;
        }
        .data-arrow::after {
            content: '‚ñ∂';
            position: absolute;
            right: -10px;
            top: -10px;
            color: #667eea;
        }

        /* Security layers */
        .security-layers {
            background: linear-gradient(to bottom, #ffebee, #ffcdd2, #ef9a9a);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .security-layer {
            background: rgba(255,255,255,0.8);
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid #f44336;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #667eea;
        }
        .timeline-item {
            position: relative;
            padding: 20px;
            width: 45%;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .timeline-item:nth-child(odd) {
            left: 0;
        }
        .timeline-item:nth-child(even) {
            left: 55%;
        }
        .timeline-dot {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #667eea;
            border-radius: 50%;
            top: 25px;
        }
        .timeline-item:nth-child(odd) .timeline-dot {
            right: -58px;
        }
        .timeline-item:nth-child(even) .timeline-dot {
            left: -58px;
        }

        /* Matrix diagram */
        .matrix-diagram {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .matrix-cell {
            padding: 15px;
            text-align: center;
            border-radius: 6px;
            font-size: 14px;
        }
        .matrix-header {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        .matrix-cell.high { background: #ffcdd2; }
        .matrix-cell.medium { background: #fff3cd; }
        .matrix-cell.low { background: #c8e6c9; }

        /* Service mesh diagram */
        .service-mesh {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
            position: relative;
        }
        .service-node {
            background: white;
            border: 2px solid #667eea;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        .mesh-connection {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 1px;
            background: #ddd;
            transform-origin: left center;
            z-index: 1;
        }

        /* Component relationship diagram */
        .relationship-diagram {
            position: relative;
            min-height: 600px;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            padding: 20px;
        }

        /* Enhanced diagram styles for detailed visualizations */
        .detailed-flow-diagram {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
        }

        .flow-group {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .flow-group.vertical {
            flex-direction: column;
        }

        .flow-node {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px 25px;
            margin: 10px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            min-width: 150px;
        }

        .flow-node:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .flow-node.primary {
            background: #667eea;
            color: white;
        }

        .flow-node.secondary {
            background: #f3e5f5;
            border-color: #9c27b0;
        }

        .flow-node.service {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .flow-node.data {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .flow-node.external {
            background: #fff3e0;
            border-color: #ff9800;
        }

        .flow-connector {
            display: flex;
            align-items: center;
            margin: 0 -10px;
        }

        .flow-line {
            flex: 1;
            height: 2px;
            background: #667eea;
            position: relative;
        }

        .flow-line::after {
            content: '‚ñ∂';
            position: absolute;
            right: -10px;
            top: -10px;
            color: #667eea;
            font-size: 16px;
        }

        .flow-line.vertical {
            width: 2px;
            height: 40px;
            margin: -10px auto;
        }

        .flow-line.vertical::after {
            content: '‚ñº';
            top: auto;
            bottom: -15px;
            right: -7px;
        }

        .flow-label {
            background: white;
            padding: 4px 12px;
            font-size: 12px;
            color: #666;
            border-radius: 12px;
            border: 1px solid #ddd;
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        /* Service communication pattern styles */
        .service-pattern-diagram {
            display: grid;
            grid-template-columns: 1fr 2px 1fr 2px 1fr;
            gap: 30px;
            align-items: stretch;
            padding: 40px;
            background: linear-gradient(to right, #e3f2fd, #f3e5f5, #e8f5e9);
            border-radius: 12px;
            margin: 20px 0;
        }

        .pattern-layer {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .pattern-layer h4 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .pattern-component {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 10px;
            margin: 8px 0;
            font-size: 14px;
            text-align: center;
        }

        .pattern-divider {
            background: linear-gradient(to bottom, transparent, #667eea, transparent);
            position: relative;
        }

        /* Event flow diagram */
        .event-flow-diagram {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 40px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .event-timeline {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            padding: 40px 0;
        }

        .event-node {
            background: white;
            border: 3px solid #667eea;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .event-node.trigger {
            background: #667eea;
            color: white;
        }

        .event-connection {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, #667eea, #764ba2, #667eea);
            z-index: 1;
        }

        .event-label {
            position: absolute;
            top: 100px;
            width: 120px;
            text-align: center;
            font-size: 12px;
            color: #666;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Microservices mesh diagram */
        .microservices-mesh {
            position: relative;
            background: radial-gradient(circle at center, #f8f9fa 0%, white 100%);
            border-radius: 12px;
            padding: 60px;
            margin: 20px 0;
            height: 600px;
            overflow: hidden;
        }

        .mesh-service {
            position: absolute;
            background: white;
            border: 3px solid;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 140px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .mesh-service:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .mesh-service.gateway {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .mesh-service.core {
            border-color: #2196f3;
            background: #e3f2fd;
        }

        .mesh-service.support {
            border-color: #9c27b0;
            background: #f3e5f5;
        }

        .mesh-service.data {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .mesh-line {
            position: absolute;
            background: #ddd;
            height: 2px;
            transform-origin: left center;
            z-index: 0;
        }

        .mesh-line.active {
            background: #667eea;
            height: 3px;
        }

        /* Domain context diagram */
        .domain-context-diagram {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 40px;
            margin: 20px 0;
            position: relative;
        }

        .bounded-context {
            border: 3px dashed;
            border-radius: 20px;
            padding: 40px;
            margin: 20px;
            position: relative;
            background: rgba(255,255,255,0.8);
        }

        .bounded-context.definition {
            border-color: #2196f3;
            background: rgba(227, 242, 253, 0.3);
        }

        .bounded-context.validation {
            border-color: #4caf50;
            background: rgba(232, 245, 233, 0.3);
        }

        .bounded-context.enrichment {
            border-color: #9c27b0;
            background: rgba(243, 229, 245, 0.3);
        }

        .bounded-context.export {
            border-color: #ff9800;
            background: rgba(255, 243, 224, 0.3);
        }

        .context-aggregate {
            background: white;
            border: 2px solid;
            border-radius: 8px;
            padding: 15px;
            margin: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .context-relationship {
            position: absolute;
            font-size: 12px;
            background: white;
            padding: 4px 12px;
            border-radius: 12px;
            border: 1px solid #ddd;
            color: #666;
        }

        /* Service mesh with Istio visualization */
        .istio-mesh-diagram {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            border-radius: 12px;
            padding: 40px;
            margin: 20px 0;
            position: relative;
        }

        .istio-pod {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin: 20px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .istio-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .istio-app {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex: 1;
        }

        .istio-proxy {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            min-width: 100px;
        }

        .istio-control-plane {
            background: #667eea;
            color: white;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 20px auto;
            max-width: 600px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .rel-component {
            position: absolute;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            min-width: 150px;
            cursor: move;
            transition: all 0.3s ease;
            z-index: 10;
        }
        .rel-component:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: scale(1.05);
        }
        .rel-component.ui { background: #e3f2fd; border-color: #2196f3; }
        .rel-component.service { background: #f3e5f5; border-color: #9c27b0; }
        .rel-component.data { background: #e8f5e9; border-color: #4caf50; }
        .rel-component.external { background: #fff3e0; border-color: #ff9800; }
        .rel-line {
            position: absolute;
            background: #667eea;
            height: 2px;
            transform-origin: left center;
            z-index: 1;
        }
        .rel-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 8px solid #667eea;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
            right: -8px;
            top: -3px;
        }
        .rel-label {
            position: absolute;
            background: white;
            padding: 2px 8px;
            font-size: 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            white-space: nowrap;
        }

        /* Sequence diagram */
        .sequence-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }
        .seq-actor {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 0 50px;
            position: relative;
        }
        .seq-lifeline {
            position: absolute;
            left: 50%;
            top: 100%;
            width: 2px;
            height: 400px;
            background: #ddd;
            transform: translateX(-50%);
        }
        .seq-message {
            position: absolute;
            height: 2px;
            background: #667eea;
            top: 100px;
            min-width: 100px;
        }
        .seq-message::after {
            content: '‚ñ∂';
            position: absolute;
            right: -10px;
            top: -10px;
            color: #667eea;
        }

        /* Network topology diagram */
        .network-diagram {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            padding: 30px;
            background: white;
            border-radius: 8px;
            position: relative;
        }
        .network-node {
            background: white;
            border: 3px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        .network-node::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 30px;
            height: 2px;
            background: #667eea;
        }
        .network-node:nth-child(4n)::before {
            display: none;
        }

        /* Context map */
        .context-map {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            position: relative;
        }
        .context-boundary {
            border: 3px dashed #999;
            border-radius: 20px;
            padding: 40px;
            margin: 20px;
            position: relative;
        }
        .context-core {
            background: #667eea;
            color: white;
            padding: 30px;
            border-radius: 50%;
            text-align: center;
            font-weight: bold;
        }
        .context-satellite {
            position: absolute;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            min-width: 120px;
            text-align: center;
        }
        .mesh-connection {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 1px;
            background: #ddd;
            transform-origin: left center;
            z-index: 1;
        }

        /* File list styles from original */
        .module {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
        }
        .file {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 3px;
            padding: 8px;
            margin: 5px 0;
            font-size: 14px;
        }
        .file-path {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #666;
        }
        .file-description {
            font-size: 12px;
            color: #555;
            margin-top: 3px;
        }
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-active { background: #d4edda; color: #155724; }
        .status-unused { background: #f8d7da; color: #721c24; }
        .status-partial { background: #fff3cd; color: #856404; }
        .status-new { background: #cce5ff; color: #004085; }
        .status-todo { background: #e2e3e5; color: #383d41; }

        /* Feature Dashboard Styles */
        .feature-dashboard {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .dashboard-header h3 {
            margin: 0;
            color: #333;
            font-size: 28px;
        }

        .dashboard-subtitle {
            color: #666;
            margin-top: 10px;
            font-size: 16px;
        }

        /* Progress Overview */
        .progress-overview {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 40px;
            margin-bottom: 60px;
            align-items: center;
        }

        .progress-circle-container {
            display: flex;
            justify-content: center;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .stat-card.complete {
            border-color: #4caf50;
        }

        .stat-card.complete:hover {
            background: #e8f5e9;
        }

        .stat-card.in-progress {
            border-color: #ff9800;
        }

        .stat-card.in-progress:hover {
            background: #fff3e0;
        }

        .stat-card.not-started {
            border-color: #f44336;
        }

        .stat-card.not-started:hover {
            background: #ffebee;
        }

        .stat-card.total {
            border-color: #667eea;
        }

        .stat-card.total:hover {
            background: #e8eaf6;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .stat-percentage {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        /* Epic Breakdown */
        .epic-breakdown {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .epic-breakdown h3 {
            margin-top: 0;
            margin-bottom: 30px;
            color: #333;
        }

        .epic-item {
            margin-bottom: 25px;
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }

        .epic-item:nth-child(2) { animation-delay: 0.1s; }
        .epic-item:nth-child(3) { animation-delay: 0.2s; }
        .epic-item:nth-child(4) { animation-delay: 0.3s; }
        .epic-item:nth-child(5) { animation-delay: 0.4s; }
        .epic-item:nth-child(6) { animation-delay: 0.5s; }
        .epic-item:nth-child(7) { animation-delay: 0.6s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .epic-item.critical .progress-bar-container {
            background: #ffebee;
        }

        .epic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .epic-name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }

        .epic-status {
            color: #666;
            font-size: 14px;
        }

        .progress-bar-container {
            background: #e0e0e0;
            border-radius: 20px;
            height: 30px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* Critical Features */
        .critical-features {
            margin-bottom: 40px;
        }

        .critical-features h3 {
            margin-bottom: 25px;
            color: #333;
        }

        .critical-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .critical-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            border: 2px solid;
            display: flex;
            gap: 20px;
            align-items: flex-start;
            transition: all 0.3s ease;
        }

        .critical-card.high {
            border-color: #f44336;
            background: #ffebee;
        }

        .critical-card.medium {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .critical-card.low {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .critical-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .critical-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .critical-content h4 {
            margin: 0 0 8px 0;
            color: #333;
            font-size: 18px;
        }

        .critical-content p {
            margin: 0;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Requirements Link */
        .requirements-link {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
        }

        .req-button {
            display: inline-block;
            background: white;
            color: #667eea;
            padding: 15px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .req-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            background: #f8f9fa;
        }

        .req-note {
            margin-top: 15px;
            font-size: 14px;
            opacity: 0.9;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .progress-overview {
                grid-template-columns: 1fr;
            }
            
            .progress-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .critical-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèóÔ∏è DefinitieAgent Architectuur Documentatie</h1>
        <p>Professionele Enterprise Architectuur - AS-IS & TO-BE</p>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('as-is')">
                üìä AS-IS Architectuur
            </button>
            <button class="tab-button" onclick="showTab('to-be')">
                üöÄ TO-BE Architectuur
            </button>
        </div>

        <!-- AS-IS Tab Content -->
        <div id="as-is" class="tab-content active">
            <div class="architecture-section">
                <h2>1. High-Level Architectuur Overzicht</h2>

                <div class="diagram-container">
                    <h3>Layered Architecture (Current State)</h3>
                    <div class="layer-diagram">
                        <div class="layer presentation">
                            Presentation Layer
                            <br><small>Streamlit UI, Web Interface, Session Management</small>
                        </div>
                        <div class="layer application">
                            Application Layer
                            <br><small>Business Logic, Workflow Orchestration, Service Coordination</small>
                        </div>
                        <div class="layer domain">
                            Domain Layer
                            <br><small>Domain Models, Business Rules, Validation Logic</small>
                        </div>
                        <div class="layer infrastructure">
                            Infrastructure Layer
                            <br><small>Database, External APIs, File System, Caching</small>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Component Architecture</h3>
                    <div class="flow-diagram">
                        <div class="component-box active">
                            <strong>Streamlit UI</strong>
                            <br>main.py
                            <br><small>Entry Point</small>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="component-box active">
                            <strong>UI Components</strong>
                            <br>7 Tabs (30% active)
                            <br><small>User Interface</small>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="component-box active">
                            <strong>Services</strong>
                            <br>6 Active Services
                            <br><small>Business Logic</small>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="component-box active">
                            <strong>Repository</strong>
                            <br>SQLite Database
                            <br><small>Data Persistence</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>2. Deployment Architecture</h2>

                <div class="deployment-diagram">
                    <div class="deployment-node">
                        <h4>üñ•Ô∏è Client Browser</h4>
                        <p>Streamlit Web UI</p>
                        <small>HTML/CSS/JS</small>
                    </div>
                    <div class="deployment-node">
                        <h4>üåê Application Server</h4>
                        <p>Python 3.11</p>
                        <p>Streamlit Server</p>
                        <small>Single Instance</small>
                    </div>
                    <div class="deployment-node">
                        <h4>üíæ Database</h4>
                        <p>SQLite (Local)</p>
                        <small>File-based DB</small>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>3. Data Flow Architecture</h2>

                <div class="data-flow">
                    <div class="data-node">User Input</div>
                    <div class="data-arrow"></div>
                    <div class="data-node">Validation</div>
                    <div class="data-arrow"></div>
                    <div class="data-node">AI Processing</div>
                    <div class="data-arrow"></div>
                    <div class="data-node">Storage</div>
                </div>

                <div class="diagram-container">
                    <h3>Service Interaction Pattern</h3>
                    <div class="service-mesh">
                        <div class="service-node">Definition<br>Generator</div>
                        <div class="service-node">Validator<br>Service</div>
                        <div class="service-node">Repository<br>Service</div>
                        <div class="service-node">Orchestrator</div>
                        <div class="service-node">Web Lookup</div>
                        <div class="service-node">AI Toetser</div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>4. Technology Stack</h2>

                <div class="tech-stack">
                    <div class="tech-item">
                        <div class="tech-icon">üêç</div>
                        <div>
                            <strong>Python 3.11</strong>
                            <br><small>Core Language</small>
                        </div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-icon">üé®</div>
                        <div>
                            <strong>Streamlit</strong>
                            <br><small>Web Framework</small>
                        </div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-icon">ü§ñ</div>
                        <div>
                            <strong>OpenAI API</strong>
                            <br><small>AI Provider</small>
                        </div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-icon">üíæ</div>
                        <div>
                            <strong>SQLAlchemy</strong>
                            <br><small>ORM</small>
                        </div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-icon">üóÑÔ∏è</div>
                        <div>
                            <strong>SQLite</strong>
                            <br><small>Database</small>
                        </div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-icon">üìä</div>
                        <div>
                            <strong>Pandas</strong>
                            <br><small>Data Processing</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>5. System Metrics & Issues</h2>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">304</div>
                        <div class="metric-label">Python Files</div>
                        <div class="metric-change">150+ unused</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">11%</div>
                        <div class="metric-label">Test Coverage</div>
                        <div class="metric-change">‚ö†Ô∏è Low</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">8-12s</div>
                        <div class="metric-label">Response Time</div>
                        <div class="metric-change">‚ùå Slow</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">30%</div>
                        <div class="metric-label">UI Complete</div>
                        <div class="metric-change">7 tabs inactive</div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Risk Matrix</h3>
                    <div class="matrix-diagram">
                        <div class="matrix-cell matrix-header">Risk</div>
                        <div class="matrix-cell matrix-header">Impact</div>
                        <div class="matrix-cell matrix-header">Likelihood</div>
                        <div class="matrix-cell matrix-header">Priority</div>

                        <div class="matrix-cell">Database Locks</div>
                        <div class="matrix-cell high">High</div>
                        <div class="matrix-cell high">High</div>
                        <div class="matrix-cell high">Critical</div>

                        <div class="matrix-cell">Memory Leaks</div>
                        <div class="matrix-cell medium">Medium</div>
                        <div class="matrix-cell high">High</div>
                        <div class="matrix-cell high">High</div>

                        <div class="matrix-cell">Widget Duplicates</div>
                        <div class="matrix-cell medium">Medium</div>
                        <div class="matrix-cell medium">Medium</div>
                        <div class="matrix-cell medium">Medium</div>

                        <div class="matrix-cell">UTF-8 Issues</div>
                        <div class="matrix-cell low">Low</div>
                        <div class="matrix-cell medium">Medium</div>
                        <div class="matrix-cell low">Low</div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>6. Security Architecture (Current)</h2>

                <div class="security-layers">
                    <div class="security-layer">
                        <strong>Application Security</strong>
                        <br>‚ùå No Authentication
                        <br>‚ùå No Authorization
                        <br>‚ö†Ô∏è Basic Input Validation
                    </div>
                    <div class="security-layer">
                        <strong>API Security</strong>
                        <br>‚úÖ API Key Management
                        <br>‚úÖ Rate Limiting
                        <br>‚ùå No API Gateway
                    </div>
                    <div class="security-layer">
                        <strong>Data Security</strong>
                        <br>‚ùå No Encryption at Rest
                        <br>‚ö†Ô∏è HTTPS Only
                        <br>‚ùå No Data Masking
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>7. Integration Architecture</h2>

                <div class="diagram-container">
                    <h3>External Integrations</h3>
                    <div class="flow-diagram">
                        <div class="component-box active">
                            <strong>DefinitieAgent</strong>
                        </div>
                        <span class="flow-arrow">‚ü∑</span>
                        <div class="component-box active">
                            <strong>OpenAI API</strong>
                            <br><small>GPT-4 Model</small>
                        </div>
                    </div>
                    <div class="flow-diagram">
                        <div class="component-box active">
                            <strong>DefinitieAgent</strong>
                        </div>
                        <span class="flow-arrow">‚ü∑</span>
                        <div class="component-box deprecated">
                            <strong>Web Sources</strong>
                            <br><small>Not Integrated</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>8. Current File Structure</h2>

                <div class="module">
                    <h3>üöÄ Active Components</h3>
                    <div class="file">
                        <div class="file-path">src/main.py <span class="status status-active">‚úì Actief</span></div>
                        <div class="file-description">Hoofdapplicatie met Streamlit interface</div>
                    </div>
                    <div class="file">
                        <div class="file-path">ui/tabbed_interface.py <span class="status status-active">‚úì Actief</span></div>
                        <div class="file-description">Hoofd UI controller - beheert alle tabs</div>
                    </div>
                    <div class="file">
                        <div class="file-path">services/*.py <span class="status status-active">‚úì Actief</span></div>
                        <div class="file-description">6 actieve services voor business logic</div>
                    </div>
                </div>

                <div class="module">
                    <h3>‚ùå Technical Debt</h3>
                    <div class="file">
                        <div class="file-path">toetsregels/regels/*.py <span class="status status-unused">‚úó Ongebruikt</span></div>
                        <div class="file-description">50+ Python regel implementaties - vervangen door JSON</div>
                    </div>
                    <div class="file">
                        <div class="file-path">toetsregels/validators/*.py <span class="status status-unused">‚úó Ongebruikt</span></div>
                        <div class="file-description">50+ duplicate validator bestanden</div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>9. Detailed Relationship Diagrams</h2>

                <div class="diagram-container">
                    <h3>Component Dependencies Flow</h3>
                    <div class="detailed-flow-diagram">
                        <div class="flow-group vertical">
                            <div class="flow-node primary">
                                <strong>main.py</strong>
                                <br><small>Entry Point</small>
                            </div>
                            <div class="flow-line vertical"></div>
                            <div class="flow-node service">
                                <strong>tabbed_interface.py</strong>
                                <br><small>UI Controller</small>
                            </div>
                            <div class="flow-line vertical"></div>
                            <div class="flow-group">
                                <div class="flow-node secondary">
                                    <strong>definition_generator_tab</strong>
                                    <br><small>Active Tab</small>
                                </div>
                                <div class="flow-node secondary">
                                    <strong>expert_review_tab</strong>
                                    <br><small>Partial Tab</small>
                                </div>
                                <div class="flow-node secondary">
                                    <strong>web_lookup_tab</strong>
                                    <br><small>Inactive Tab</small>
                                </div>
                                <div class="flow-node secondary">
                                    <strong>other_tabs (4)</strong>
                                    <br><small>Not Implemented</small>
                                </div>
                            </div>
                            <div class="flow-line vertical"></div>
                            <div class="flow-group">
                                <div class="flow-node service">
                                    <strong>UnifiedDefinitionGenerator</strong>
                                    <br><small>Core Service</small>
                                </div>
                                <div class="flow-node service">
                                    <strong>DefinitionValidator</strong>
                                    <br><small>Validation Service</small>
                                </div>
                                <div class="flow-node service">
                                    <strong>DefinitionOrchestrator</strong>
                                    <br><small>Workflow Service</small>
                                </div>
                            </div>
                            <div class="flow-line vertical"></div>
                            <div class="flow-node data">
                                <strong>DefinitieRepository</strong>
                                <br><small>Data Access Layer</small>
                            </div>
                            <div class="flow-line vertical"></div>
                            <div class="flow-node data">
                                <strong>SQLite Database</strong>
                                <br><small>Storage</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Service Layer Communication Pattern</h3>
                    <div class="service-pattern-diagram">
                        <div class="pattern-layer">
                            <h4>UI Layer</h4>
                            <div class="pattern-component">Streamlit UI</div>
                            <div class="pattern-component">Session State</div>
                            <div class="pattern-component">Tab Controllers</div>
                            <div class="pattern-component">Event Handlers</div>
                        </div>
                        <div class="pattern-divider"></div>
                        <div class="pattern-layer">
                            <h4>Service Layer</h4>
                            <div class="pattern-component">Definition Generator</div>
                            <div class="pattern-component">Validator Service</div>
                            <div class="pattern-component">Orchestrator</div>
                            <div class="pattern-component">AI Toetser</div>
                        </div>
                        <div class="pattern-divider"></div>
                        <div class="pattern-layer">
                            <h4>Infrastructure</h4>
                            <div class="pattern-component">Repository Pattern</div>
                            <div class="pattern-component">SQLite DB</div>
                            <div class="pattern-component">OpenAI API</div>
                            <div class="pattern-component">File System</div>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Data Flow Sequence</h3>
                    <div class="event-flow-diagram">
                        <div class="event-timeline">
                            <div class="event-connection"></div>
                            <div class="event-node trigger">
                                <small>User<br>Input</small>
                                <div class="event-label">1. Enter term</div>
                            </div>
                            <div class="event-node">
                                <small>UI<br>Handler</small>
                                <div class="event-label">2. Validate input</div>
                            </div>
                            <div class="event-node">
                                <small>Service<br>Call</small>
                                <div class="event-label">3. Generate definition</div>
                            </div>
                            <div class="event-node">
                                <small>OpenAI<br>API</small>
                                <div class="event-label">4. AI processing</div>
                            </div>
                            <div class="event-node">
                                <small>Validator</small>
                                <div class="event-label">5. Quality check</div>
                            </div>
                            <div class="event-node">
                                <small>Database</small>
                                <div class="event-label">6. Save result</div>
                            </div>
                            <div class="event-node trigger">
                                <small>Display<br>Result</small>
                                <div class="event-label">7. Show to user</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Context Map - Bounded Contexts</h3>
                    <div class="context-map">
                        <div class="context-boundary">
                            <h4>Definition Management Context</h4>
                            <div class="context-core">Core<br>Domain</div>
                            <div class="context-satellite" style="top: -30px; left: 150px;">UI Context</div>
                            <div class="context-satellite" style="top: 80px; right: -30px;">Validation Context</div>
                            <div class="context-satellite" style="bottom: -30px; left: 100px;">Storage Context</div>
                            <div class="context-satellite" style="top: 50px; left: -150px;">AI Context</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>11. Feature Realisatie & Product Status</h2>
                
                <div class="feature-dashboard">
                    <div class="dashboard-header">
                        <h3>Overall Product Completion Status</h3>
                        <p class="dashboard-subtitle">Real-time view of feature implementation progress</p>
                    </div>
                    
                    <!-- Overall Progress Visualization -->
                    <div class="progress-overview">
                        <div class="progress-circle-container">
                            <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                                <circle cx="100" cy="100" r="90" fill="none" stroke="#e0e0e0" stroke-width="20"/>
                                <circle cx="100" cy="100" r="90" fill="none" stroke="#4caf50" stroke-width="20" 
                                        stroke-dasharray="163.36 401.64" stroke-dashoffset="0" 
                                        transform="rotate(-90 100 100)"/>
                                <circle cx="100" cy="100" r="90" fill="none" stroke="#ff9800" stroke-width="20" 
                                        stroke-dasharray="87.96 477.04" stroke-dashoffset="-163.36" 
                                        transform="rotate(-90 100 100)"/>
                                <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" 
                                      font-size="36" font-weight="bold" fill="#333">26%</text>
                                <text x="100" y="125" text-anchor="middle" font-size="14" fill="#666">Complete</text>
                            </svg>
                        </div>
                        
                        <div class="progress-stats">
                            <div class="stat-card complete">
                                <div class="stat-value">23</div>
                                <div class="stat-label">Complete</div>
                                <div class="stat-percentage">26%</div>
                            </div>
                            <div class="stat-card in-progress">
                                <div class="stat-value">12</div>
                                <div class="stat-label">In Progress</div>
                                <div class="stat-percentage">14%</div>
                            </div>
                            <div class="stat-card not-started">
                                <div class="stat-value">52</div>
                                <div class="stat-label">Not Started</div>
                                <div class="stat-percentage">60%</div>
                            </div>
                            <div class="stat-card total">
                                <div class="stat-value">87</div>
                                <div class="stat-label">Total Features</div>
                                <div class="stat-percentage">100%</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Epic Breakdown -->
                    <div class="epic-breakdown">
                        <h3>Feature Completion by Epic</h3>
                        
                        <div class="epic-item">
                            <div class="epic-header">
                                <span class="epic-name">Basis Definitie Generatie</span>
                                <span class="epic-status">4/5 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 80%">
                                    <span class="progress-text">80%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="epic-item">
                            <div class="epic-header">
                                <span class="epic-name">Kwaliteitstoetsing</span>
                                <span class="epic-status">3/4 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 75%">
                                    <span class="progress-text">75%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="epic-item">
                            <div class="epic-header">
                                <span class="epic-name">User Interface</span>
                                <span class="epic-status">3/15 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 20%">
                                    <span class="progress-text">20%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="epic-item critical">
                            <div class="epic-header">
                                <span class="epic-name">Security & Auth</span>
                                <span class="epic-status">0/5 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 0%">
                                    <span class="progress-text">0%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="epic-item">
                            <div class="epic-header">
                                <span class="epic-name">Performance</span>
                                <span class="epic-status">1/5 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 20%">
                                    <span class="progress-text">20%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="epic-item">
                            <div class="epic-header">
                                <span class="epic-name">Export/Import</span>
                                <span class="epic-status">1/7 features</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 14%">
                                    <span class="progress-text">14%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Critical Missing Features -->
                    <div class="critical-features">
                        <h3>Critical Missing Features</h3>
                        <div class="critical-grid">
                            <div class="critical-card high">
                                <div class="critical-icon">üî¥</div>
                                <div class="critical-content">
                                    <h4>Authentication System</h4>
                                    <p>No user authentication or authorization implemented</p>
                                </div>
                            </div>
                            <div class="critical-card high">
                                <div class="critical-icon">üî¥</div>
                                <div class="critical-content">
                                    <h4>Web Lookup Integration</h4>
                                    <p>External data source integration not functional</p>
                                </div>
                            </div>
                            <div class="critical-card high">
                                <div class="critical-icon">üî¥</div>
                                <div class="critical-content">
                                    <h4>Bulk Operations</h4>
                                    <p>No bulk import/export capabilities</p>
                                </div>
                            </div>
                            <div class="critical-card medium">
                                <div class="critical-icon">üü°</div>
                                <div class="critical-content">
                                    <h4>Performance Optimization</h4>
                                    <p>Response times exceed acceptable limits (8-12s)</p>
                                </div>
                            </div>
                            <div class="critical-card medium">
                                <div class="critical-icon">üü°</div>
                                <div class="critical-content">
                                    <h4>Export Formats</h4>
                                    <p>Limited export options (only JSON/Excel)</p>
                                </div>
                            </div>
                            <div class="critical-card low">
                                <div class="critical-icon">üü¢</div>
                                <div class="critical-content">
                                    <h4>UI Completion</h4>
                                    <p>5 tabs remain unimplemented</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Requirements Link -->
                    <div class="requirements-link">
                        <a href="../requirements/FUNCTIONAL_REQUIREMENTS.md" class="req-button">
                            üìã View Complete Requirements Document
                        </a>
                        <p class="req-note">Detailed functional and non-functional requirements specification</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TO-BE Tab Content -->
        <div id="to-be" class="tab-content">
            <div class="architecture-section">
                <h2>1. Target Architecture Vision</h2>

                <div class="diagram-container">
                    <h3>Microservices Architecture</h3>
                    <div class="service-mesh">
                        <div class="service-node" style="background: #e8f5e9;">
                            API<br>Gateway
                        </div>
                        <div class="service-node" style="background: #e3f2fd;">
                            Auth<br>Service
                        </div>
                        <div class="service-node" style="background: #fff3e0;">
                            Definition<br>Service
                        </div>
                        <div class="service-node" style="background: #fce4ec;">
                            Validation<br>Service
                        </div>
                        <div class="service-node" style="background: #f3e5f5;">
                            Export<br>Service
                        </div>
                        <div class="service-node" style="background: #e0f2f1;">
                            Monitor<br>Service
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Cloud-Native Deployment</h3>
                    <div class="deployment-diagram">
                        <div class="deployment-node" style="background: #e3f2fd;">
                            <h4>‚òÅÔ∏è Load Balancer</h4>
                            <p>Nginx/HAProxy</p>
                            <small>Auto-scaling</small>
                        </div>
                        <div class="deployment-node" style="background: #e8f5e9;">
                            <h4>üê≥ Kubernetes Cluster</h4>
                            <p>3+ Nodes</p>
                            <p>Docker Containers</p>
                            <small>Orchestration</small>
                        </div>
                        <div class="deployment-node" style="background: #fff3e0;">
                            <h4>üóÑÔ∏è PostgreSQL</h4>
                            <p>Master-Slave</p>
                            <p>Redis Cache</p>
                            <small>High Availability</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>2. Event-Driven Architecture</h2>

                <div class="data-flow">
                    <div class="data-node" style="background: #e3f2fd;">User Request</div>
                    <div class="data-arrow"></div>
                    <div class="data-node" style="background: #e8f5e9;">Event Bus</div>
                    <div class="data-arrow"></div>
                    <div class="data-node" style="background: #fff3e0;">Services</div>
                    <div class="data-arrow"></div>
                    <div class="data-node" style="background: #fce4ec;">Response</div>
                </div>

                <div class="diagram-container">
                    <h3>Message Queue Architecture</h3>
                    <p style="text-align: center; color: #666;">
                        RabbitMQ / Kafka for asynchronous processing
                    </p>
                </div>
            </div>

            <div class="architecture-section">
                <h2>3. Enhanced Technology Stack</h2>

                <div class="tech-stack">
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">üöÄ</div>
                        <div>
                            <strong>FastAPI</strong>
                            <br><small>REST API</small>
                        </div>
                    </div>
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">üê≥</div>
                        <div>
                            <strong>Docker</strong>
                            <br><small>Containerization</small>
                        </div>
                    </div>
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">‚ò∏Ô∏è</div>
                        <div>
                            <strong>Kubernetes</strong>
                            <br><small>Orchestration</small>
                        </div>
                    </div>
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">üêò</div>
                        <div>
                            <strong>PostgreSQL</strong>
                            <br><small>Primary DB</small>
                        </div>
                    </div>
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">‚ö°</div>
                        <div>
                            <strong>Redis</strong>
                            <br><small>Caching</small>
                        </div>
                    </div>
                    <div class="tech-item" style="border-color: #4caf50;">
                        <div class="tech-icon">üìä</div>
                        <div>
                            <strong>Grafana</strong>
                            <br><small>Monitoring</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>4. Target Metrics</h2>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value"><5s</div>
                        <div class="metric-label">Response Time</div>
                        <div class="metric-change">‚úÖ 60% faster</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">80%</div>
                        <div class="metric-label">Test Coverage</div>
                        <div class="metric-change">‚úÖ 7x increase</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">100%</div>
                        <div class="metric-label">UI Complete</div>
                        <div class="metric-change">‚úÖ All tabs active</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">99.9%</div>
                        <div class="metric-label">Uptime SLA</div>
                        <div class="metric-change">‚úÖ Enterprise</div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>5. Security Architecture (Target)</h2>

                <div class="security-layers" style="background: linear-gradient(to bottom, #c8e6c9, #a5d6a7, #81c784);">
                    <div class="security-layer">
                        <strong>Identity & Access Management</strong>
                        <br>‚úÖ OAuth 2.0 / SAML
                        <br>‚úÖ Role-Based Access Control (RBAC)
                        <br>‚úÖ Multi-Factor Authentication
                    </div>
                    <div class="security-layer">
                        <strong>API Security</strong>
                        <br>‚úÖ API Gateway with Rate Limiting
                        <br>‚úÖ JWT Token Authentication
                        <br>‚úÖ API Versioning & Deprecation
                    </div>
                    <div class="security-layer">
                        <strong>Data Protection</strong>
                        <br>‚úÖ Encryption at Rest (AES-256)
                        <br>‚úÖ TLS 1.3 in Transit
                        <br>‚úÖ Data Masking & Tokenization
                    </div>
                    <div class="security-layer">
                        <strong>Infrastructure Security</strong>
                        <br>‚úÖ Network Segmentation
                        <br>‚úÖ WAF & DDoS Protection
                        <br>‚úÖ Security Monitoring & SIEM
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>6. Implementation Roadmap</h2>

                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <h4>Phase 1: Foundation (Week 1-4)</h4>
                        <p>‚úì WAL Mode, Config, CI/CD, Auth</p>
                        <div style="background: #4caf50; height: 4px; width: 30%;"></div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <h4>Phase 2: Services (Week 5-8)</h4>
                        <p>Service decomposition, Facade pattern</p>
                        <div style="background: #ff9800; height: 4px; width: 10%;"></div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <h4>Phase 3: Features (Week 9-12)</h4>
                        <p>UI completion, Web lookup, Enrichment</p>
                        <div style="background: #f44336; height: 4px; width: 0%;"></div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <h4>Phase 4: Scale (Week 13-16)</h4>
                        <p>Redis, PostgreSQL, Monitoring, Deploy</p>
                        <div style="background: #f44336; height: 4px; width: 0%;"></div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>7. Data Architecture Evolution</h2>

                <div class="diagram-container">
                    <h3>From Monolithic to Distributed</h3>
                    <div class="flow-diagram">
                        <div class="component-box deprecated">
                            <strong>SQLite</strong>
                            <br>Single File
                            <br><small>Current</small>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="component-box new">
                            <strong>PostgreSQL</strong>
                            <br>Master-Slave
                            <br><small>Target</small>
                        </div>
                        <span class="flow-arrow">+</span>
                        <div class="component-box new">
                            <strong>Redis</strong>
                            <br>Distributed Cache
                            <br><small>Performance</small>
                        </div>
                        <span class="flow-arrow">+</span>
                        <div class="component-box new">
                            <strong>S3/Blob</strong>
                            <br>Document Store
                            <br><small>Scalability</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>8. Monitoring & Observability</h2>

                <div class="diagram-container">
                    <h3>Full Stack Observability</h3>
                    <div class="tech-stack">
                        <div class="tech-item">
                            <div class="tech-icon">üìä</div>
                            <div>
                                <strong>Prometheus</strong>
                                <br><small>Metrics Collection</small>
                            </div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-icon">üìà</div>
                            <div>
                                <strong>Grafana</strong>
                                <br><small>Visualization</small>
                            </div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-icon">üîç</div>
                            <div>
                                <strong>Jaeger</strong>
                                <br><small>Distributed Tracing</small>
                            </div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-icon">üìù</div>
                            <div>
                                <strong>ELK Stack</strong>
                                <br><small>Log Aggregation</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>9. New Services & Components</h2>

                <div class="module">
                    <h3>üÜï New Services TO-BE</h3>
                    <div class="file">
                        <div class="file-path">services/prompt_optimizer.py <span class="status status-new">üÜï Nieuw</span></div>
                        <div class="file-description">Token reduction to <10k for cost optimization</div>
                    </div>
                    <div class="file">
                        <div class="file-path">services/validation_orchestrator.py <span class="status status-new">üÜï Nieuw</span></div>
                        <div class="file-description">Central validation orchestration service</div>
                    </div>
                    <div class="file">
                        <div class="file-path">services/content_enrichment_service.py <span class="status status-new">üÜï Nieuw</span></div>
                        <div class="file-description">Synonyms, antonyms, and context enrichment</div>
                    </div>
                    <div class="file">
                        <div class="file-path">auth/authentication.py <span class="status status-new">üÜï Nieuw</span></div>
                        <div class="file-description">OAuth 2.0 authentication implementation</div>
                    </div>
                    <div class="file">
                        <div class="file-path">monitoring/metrics_collector.py <span class="status status-new">üÜï Nieuw</span></div>
                        <div class="file-description">Prometheus metrics exporter</div>
                    </div>
                </div>
            </div>

            <div class="architecture-section">
                <h2>10. Detailed Relationship Diagrams</h2>

                <div class="diagram-container">
                    <h3>Microservices Communication Pattern</h3>
                    <div class="microservices-mesh">
                        <!-- Connection lines -->
                        <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#667eea" />
                                </marker>
                            </defs>
                            <!-- Lines will be drawn by JavaScript -->
                        </svg>

                        <!-- API Gateway in center -->
                        <div class="mesh-service gateway" style="left: 50%; top: 50%; transform: translate(-50%, -50%);">
                            <strong>API Gateway</strong>
                            <br><small>Kong/Nginx</small>
                        </div>

                        <!-- Core Services in ring around gateway -->
                        <div class="mesh-service core" style="left: 50%; top: 20%; transform: translateX(-50%);">
                            <strong>Auth Service</strong>
                            <br><small>OAuth 2.0/JWT</small>
                        </div>
                        <div class="mesh-service core" style="left: 75%; top: 35%; transform: translate(-50%, -50%);">
                            <strong>Definition Service</strong>
                            <br><small>Core Logic</small>
                        </div>
                        <div class="mesh-service core" style="left: 75%; top: 65%; transform: translate(-50%, -50%);">
                            <strong>Validation Service</strong>
                            <br><small>Quality Control</small>
                        </div>
                        <div class="mesh-service core" style="left: 50%; top: 80%; transform: translateX(-50%);">
                            <strong>Enrichment Service</strong>
                            <br><small>Content Enhancement</small>
                        </div>
                        <div class="mesh-service core" style="left: 25%; top: 65%; transform: translate(-50%, -50%);">
                            <strong>Export Service</strong>
                            <br><small>Multi-format</small>
                        </div>
                        <div class="mesh-service core" style="left: 25%; top: 35%; transform: translate(-50%, -50%);">
                            <strong>Notification Service</strong>
                            <br><small>Events & Alerts</small>
                        </div>

                        <!-- Support Services outer ring -->
                        <div class="mesh-service support" style="left: 85%; top: 50%; transform: translateY(-50%);">
                            <strong>Monitoring</strong>
                            <br><small>Prometheus</small>
                        </div>
                        <div class="mesh-service support" style="left: 15%; top: 50%; transform: translateY(-50%);">
                            <strong>Logging</strong>
                            <br><small>ELK Stack</small>
                        </div>

                        <!-- Data stores at bottom -->
                        <div class="mesh-service data" style="left: 20%; top: 90%; transform: translate(-50%, -50%);">
                            <strong>PostgreSQL</strong>
                            <br><small>Primary DB</small>
                        </div>
                        <div class="mesh-service data" style="left: 40%; top: 90%; transform: translate(-50%, -50%);">
                            <strong>Redis</strong>
                            <br><small>Cache</small>
                        </div>
                        <div class="mesh-service data" style="left: 60%; top: 90%; transform: translate(-50%, -50%);">
                            <strong>RabbitMQ</strong>
                            <br><small>Message Queue</small>
                        </div>
                        <div class="mesh-service data" style="left: 80%; top: 90%; transform: translate(-50%, -50%);">
                            <strong>S3/Blob</strong>
                            <br><small>Documents</small>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Event-Driven Architecture Flow</h3>
                    <div class="event-flow-diagram">
                        <div class="event-timeline">
                            <div class="event-connection"></div>
                            <div class="event-node trigger">
                                <small>User<br>Action</small>
                                <div class="event-label">1. Create Definition</div>
                            </div>
                            <div class="event-node">
                                <small>API<br>Gateway</small>
                                <div class="event-label">2. Route & Auth</div>
                            </div>
                            <div class="event-node">
                                <small>Definition<br>Service</small>
                                <div class="event-label">3. Process Request</div>
                            </div>
                            <div class="event-node trigger">
                                <small>Event<br>Published</small>
                                <div class="event-label">4. "DefinitionCreated"</div>
                            </div>
                            <div class="event-node">
                                <small>Validation<br>Service</small>
                                <div class="event-label">5. React to Event</div>
                            </div>
                            <div class="event-node">
                                <small>Enrichment<br>Service</small>
                                <div class="event-label">6. React to Event</div>
                            </div>
                            <div class="event-node">
                                <small>Notification<br>Service</small>
                                <div class="event-label">7. Send Updates</div>
                            </div>
                            <div class="event-node trigger">
                                <small>Complete</small>
                                <div class="event-label">8. All Done</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Service Mesh Architecture (Istio)</h3>
                    <div class="istio-mesh-diagram">
                        <div class="istio-control-plane">
                            <h4>Istio Control Plane</h4>
                            <small>Pilot ‚Ä¢ Citadel ‚Ä¢ Galley ‚Ä¢ Mixer</small>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 40px;">
                            <div class="istio-pod">
                                <h5>Definition Service Pod</h5>
                                <div class="istio-container">
                                    <div class="istio-app">
                                        <strong>App</strong>
                                        <br><small>FastAPI</small>
                                    </div>
                                    <div class="istio-proxy">
                                        <strong>Envoy</strong>
                                        <br><small>Sidecar</small>
                                    </div>
                                </div>
                            </div>

                            <div class="istio-pod">
                                <h5>Validation Service Pod</h5>
                                <div class="istio-container">
                                    <div class="istio-app">
                                        <strong>App</strong>
                                        <br><small>FastAPI</small>
                                    </div>
                                    <div class="istio-proxy">
                                        <strong>Envoy</strong>
                                        <br><small>Sidecar</small>
                                    </div>
                                </div>
                            </div>

                            <div class="istio-pod">
                                <h5>Enrichment Service Pod</h5>
                                <div class="istio-container">
                                    <div class="istio-app">
                                        <strong>App</strong>
                                        <br><small>FastAPI</small>
                                    </div>
                                    <div class="istio-proxy">
                                        <strong>Envoy</strong>
                                        <br><small>Sidecar</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 30px; color: #666;">
                            <small>‚Ä¢ Traffic Management ‚Ä¢ Security ‚Ä¢ Observability ‚Ä¢ Policy Enforcement ‚Ä¢</small>
                        </div>
                    </div>
                </div>

                <div class="diagram-container">
                    <h3>Domain-Driven Design - Bounded Contexts</h3>
                    <div class="domain-context-diagram">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px;">
                            <div class="bounded-context definition">
                                <h4 style="color: #2196f3;">Definition Context</h4>
                                <div class="context-aggregate" style="border-color: #2196f3;">
                                    <strong>Definition Aggregate</strong>
                                    <br><small>Root Entity</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #2196f3;">
                                    <strong>Term</strong>
                                    <br><small>Value Object</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #2196f3;">
                                    <strong>Metadata</strong>
                                    <br><small>Value Object</small>
                                </div>
                                <div class="context-relationship" style="top: 20px; right: -80px;">
                                    Upstream ‚ûú
                                </div>
                            </div>

                            <div class="bounded-context validation">
                                <h4 style="color: #4caf50;">Validation Context</h4>
                                <div class="context-aggregate" style="border-color: #4caf50;">
                                    <strong>Validation Rules</strong>
                                    <br><small>Entity</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #4caf50;">
                                    <strong>Quality Metrics</strong>
                                    <br><small>Value Object</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #4caf50;">
                                    <strong>Validation Result</strong>
                                    <br><small>Entity</small>
                                </div>
                                <div class="context-relationship" style="bottom: 20px; left: -80px;">
                                    ‚¨Ö Downstream
                                </div>
                            </div>

                            <div class="bounded-context enrichment">
                                <h4 style="color: #9c27b0;">Enrichment Context</h4>
                                <div class="context-aggregate" style="border-color: #9c27b0;">
                                    <strong>Synonyms</strong>
                                    <br><small>Entity</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #9c27b0;">
                                    <strong>Context Info</strong>
                                    <br><small>Value Object</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #9c27b0;">
                                    <strong>External Sources</strong>
                                    <br><small>Service</small>
                                </div>
                                <div class="context-relationship" style="top: -40px; left: 50%;">
                                    Partnership ‚Üî
                                </div>
                            </div>

                            <div class="bounded-context export">
                                <h4 style="color: #ff9800;">Export Context</h4>
                                <div class="context-aggregate" style="border-color: #ff9800;">
                                    <strong>Export Format</strong>
                                    <br><small>Entity</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #ff9800;">
                                    <strong>Template Engine</strong>
                                    <br><small>Service</small>
                                </div>
                                <div class="context-aggregate" style="border-color: #ff9800;">
                                    <strong>Delivery Method</strong>
                                    <br><small>Value Object</small>
                                </div>
                                <div class="context-relationship" style="bottom: -40px; right: 50%;">
                                    Consumer ‚¨Ö
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active class from all buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Set active button
            event.target.classList.add('active');
        }
    </script>

    <script>
        // Draw relationship lines for diagrams
        function drawMicroservicesConnections() {
            const container = document.querySelector('.microservices-mesh');
            if (!container) return;

            const svg = container.querySelector('svg');
            if (!svg) return;

            // Clear existing lines but keep defs
            const defs = svg.querySelector('defs');
            svg.innerHTML = '';
            if (defs) svg.appendChild(defs);

            // Get service positions
            const gateway = container.querySelector('.mesh-service.gateway');
            const services = container.querySelectorAll('.mesh-service.core');
            const dataServices = container.querySelectorAll('.mesh-service.data');

            if (gateway) {
                const gatewayRect = gateway.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();
                const gatewayCenterX = gatewayRect.left + gatewayRect.width / 2 - containerRect.left;
                const gatewayCenterY = gatewayRect.top + gatewayRect.height / 2 - containerRect.top;

                // Draw lines from gateway to all core services
                services.forEach(service => {
                    const serviceRect = service.getBoundingClientRect();
                    const serviceCenterX = serviceRect.left + serviceRect.width / 2 - containerRect.left;
                    const serviceCenterY = serviceRect.top + serviceRect.height / 2 - containerRect.top;

                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', gatewayCenterX);
                    line.setAttribute('y1', gatewayCenterY);
                    line.setAttribute('x2', serviceCenterX);
                    line.setAttribute('y2', serviceCenterY);
                    line.setAttribute('stroke', '#667eea');
                    line.setAttribute('stroke-width', '2');
                    line.setAttribute('opacity', '0.3');
                    svg.appendChild(line);
                });

                // Draw lines from services to data stores
                dataServices.forEach((dataService, index) => {
                    if (index < services.length) {
                        const service = services[index];
                        const serviceRect = service.getBoundingClientRect();
                        const dataRect = dataService.getBoundingClientRect();

                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', serviceRect.left + serviceRect.width / 2 - containerRect.left);
                        line.setAttribute('y1', serviceRect.top + serviceRect.height / 2 - containerRect.top);
                        line.setAttribute('x2', dataRect.left + dataRect.width / 2 - containerRect.left);
                        line.setAttribute('y2', dataRect.top + dataRect.height / 2 - containerRect.top);
                        line.setAttribute('stroke', '#999');
                        line.setAttribute('stroke-width', '1');
                        line.setAttribute('stroke-dasharray', '5,5');
                        line.setAttribute('opacity', '0.5');
                        svg.appendChild(line);
                    }
                });
            }
        }

        // Initialize on load and tab switch
        window.addEventListener('load', () => {
            setTimeout(drawMicroservicesConnections, 100);

            // Redraw when tab is switched
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    setTimeout(drawMicroservicesConnections, 200);
                });
            });
        });

        // Redraw on window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(drawMicroservicesConnections, 250);
        });
    </script>
</body>
</html>
