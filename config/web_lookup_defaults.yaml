web_lookup:
  enabled: true

  # Juridische synoniemen voor verbeterde recall (NIEUW - Oct 2025)
  synonyms:
    enabled: true
    config_path: "config/juridische_synoniemen.yaml"
    max_synonyms_per_query: 3  # Limiteer aantal synoniemen per query
    # Juridische ranking boost factoren
    juridical_boost:
      juridische_bron: 1.2       # Boost voor rechtspraak.nl, overheid.nl
      keyword_per_match: 1.1     # Boost per juridisch keyword (max 1.3x)
      artikel_referentie: 1.15   # Boost voor artikel-referenties
      lid_referentie: 1.05       # Boost voor lid-referenties
      context_match: 1.1         # Boost voor context token matches

  cache:
    strategy: "stale-while-revalidate"
    grace_period: 300
    default_ttl: 3600
    max_entries: 1000

  sanitization:
    strip_tags: [script, style, iframe, object, embed, form]
    block_protocols: [javascript, data, vbscript]
    max_snippet_length: 500

  providers:
    wikipedia:
      enabled: true
      weight: 0.7
      timeout: 5
      cache_ttl: 7200
      min_score: 0.3

    sru_overheid:
      enabled: true
      weight: 1.0  # Highest for juridisch
      timeout: 5
      cache_ttl: 3600
      min_score: 0.4

    wetgeving_nl:
      enabled: false  # DISABLED (2025-10-08): 0% hit rate - BWB niet queryable voor concepten
      weight: 0.9
      timeout: 5
      cache_ttl: 3600
      min_score: 0.4
      # NOTE: Schema fix (oai_dc â†’ gzd) heeft niet geholpen
      # BWB indexeert per artikel, niet per juridisch concept
      # Overheid.nl + Rechtspraak.nl leveren voldoende juridische content

    rechtspraak_ecli:
      enabled: true
      weight: 0.9
      timeout: 5
      cache_ttl: 3600
      min_score: 0.4

    eur_lex:
      enabled: true
      weight: 0.6
      timeout: 5
      cache_ttl: 3600
      min_score: 0.3

    wikidata:
      enabled: true
      weight: 0.3   # low priority enrichment
      timeout: 5
      cache_ttl: 3600
      min_score: 0.2

    dbpedia:
      enabled: true
      weight: 0.2   # low priority enrichment
      timeout: 5
      cache_ttl: 3600
      min_score: 0.2

  context_mappings:
    DJI: ["Pbw", "WvSr"]
    OM: ["WvSv"]
    Rechtspraak: ["Rv"]

  prompt_augmentation:
    enabled: true
    # Include all hits in the prompt initially (overridden by token budget safeguards in code)
    include_all_hits: true
    max_snippets: 3
    max_tokens_per_snippet: 100
    total_token_budget: 400
    prioritize_juridical: true
    section_header: "### Contextinformatie uit bronnen:"
    snippet_separator: "\n- "
    position: "after_context"  # one of: prepend, after_context, before_examples

  sru:
    circuit_breaker:
      enabled: true
      consecutive_empty_threshold: 4  # Stop after 4 consecutive empty results (was 2)
      # Provider-specific overrides (optional)
      providers:
        overheid: 4
        rechtspraak: 3  # Legal docs might need more attempts
        wetgeving_nl: 4
        overheid_zoek: 4
