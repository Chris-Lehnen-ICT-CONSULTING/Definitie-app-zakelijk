# Rule Reasoning Configuration
# Purpose: Reasoning patterns and confidence thresholds for validation rules
version: "1.0"
created: "2025-10-02"
description: "Configuration for validation rule reasoning, confidence scoring, and pattern matching"

# Confidence thresholds for validation scoring
confidence_thresholds:
  high:
    threshold: 0.8
    color: "green"
    label: "High confidence"
    description: "Rule passed with high confidence, no issues detected"

  medium:
    threshold: 0.5
    color: "orange"
    label: "Medium confidence"
    description: "Rule passed with some concerns or warnings"

  low:
    threshold: 0.0
    color: "red"
    label: "Low confidence"
    description: "Rule failed or passed with significant issues"

# Score mappings for partial passes
score_levels:
  perfect: 1.0
  good: 0.8
  acceptable: 0.5
  failed: 0.0

# Rule reasoning templates - explain why rules pass
# These provide user-friendly explanations for validation results
rule_reasoning:
  ARAI-01:
    rule_name: "Lengte check"
    threshold_min: 50
    threshold_max: 500
    pass_explanation: "Definitie valt binnen acceptabele lengterange ({min}-{max} karakters)"
    fail_explanation: "Definitie is te kort (< {min}) of te lang (> {max})"
    warning_threshold: 450  # Warn if approaching max

  CON-01:
    rule_name: "Begrip occurrence check"
    pass_explanation: "Begrip '{begrip}' komt voor in de definitie"
    fail_explanation: "Begrip '{begrip}' ontbreekt in de definitie"

  ESS-02:
    rule_name: "Structure check"
    required_patterns:
      - ":"
      - "is"
      - "zijn"
    pass_explanation: "Definitie heeft herkenbare structuur"
    fail_explanation: "Definitie mist herkenbare structuur (geen ':' of 'is'/'zijn')"

  INT-01:
    rule_name: "Abbreviation check"
    pattern: '\b[A-Z]{2,}\b'
    pass_explanation: "Geen afkortingen gedetecteerd"
    fail_explanation: "Afkortingen gevonden: {abbreviations}"
    warning_explanation: "Mogelijk afkorting gedetecteerd, verifieer: {potential}"

  SAM-01:
    rule_name: "Sentence count check"
    max_sentences: 3
    pass_explanation: "Definitie is beknopt ({count} zinnen)"
    fail_explanation: "Definitie bevat te veel zinnen ({count} > {max})"

  STR-01:
    rule_name: "Bullet/numbering check"
    forbidden_patterns:
      - '[\‚Ä¢\-\*]\s'
      - '^\d+[\.\)]\s'
    pass_explanation: "Geen opsommingstekens of nummering"
    fail_explanation: "Opsommingstekens of nummering gedetecteerd"

  VER-01:
    rule_name: "Length adequacy"
    optimal_min: 100
    optimal_max: 300
    pass_explanation: "Definitie heeft adequate lengte voor begrip"
    fail_explanation: "Definitie lengte is niet adequaat ({length} karakters)"

  SAM-06:
    rule_name: "Begrip/voorkeursterm in definitie"
    special_score: 0.8  # Special case where absence is good
    pass_explanation: "Noch begrip noch voorkeursterm in definitie"
    fail_explanation: "Begrip of voorkeursterm komt voor in definitie (tautologisch)"

# Pattern matching configuration for rule detection
pattern_matching:
  case_sensitive: false
  unicode_support: true
  multiline: false

  # Common regex patterns used across rules
  common_patterns:
    verb_start: '\b(is|zijn|wordt|worden|kan|mag|moet|zal|heeft|hebben)\b'
    abbreviation: '\b[A-Z]{2,}\b'
    bullet_point: '[\‚Ä¢\-\*]\s|^\d+[\.\)]\s'
    sentence_delimiter: '[.!?]'

# Similarity thresholds for duplicate detection
similarity:
  jaccard_threshold: 0.70  # 70% similarity threshold
  description: "Jaccard similarity threshold for fuzzy duplicate matching"
  algorithm: "jaccard"

  normalization:
    strip_whitespace: true
    lowercase: true
    remove_punctuation: false
    sort_tokens: true

# Message formatting
messages:
  emoji_enabled: true
  success_emoji: "‚úîÔ∏è"
  warning_emoji: "üü°"
  error_emoji: "‚ùå"

  # Message templates
  templates:
    pass: "{emoji} {rule_id}: {explanation}"
    fail: "{emoji} {rule_id}: {explanation}"
    warning: "{emoji} {rule_id}: {explanation}"
    error: "{emoji} {rule_id}: Validatie fout - {error}"

# Validation execution settings
execution:
  stop_on_critical: false
  parallel_execution: false
  timeout_per_rule_ms: 500
  max_retries: 0

# Environment overrides
overrides:
  development:
    confidence_thresholds:
      high:
        threshold: 0.7  # Lower threshold in dev
    execution:
      timeout_per_rule_ms: 1000  # More time in dev

  production:
    execution:
      stop_on_critical: true
      timeout_per_rule_ms: 300
